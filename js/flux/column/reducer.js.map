{"version":3,"sources":["../../../src/flux/column/reducer.js"],"names":["setInObj","fns","crColumn","noteIdsTo","filterNoteIds","removeProp","moveExternal","moveInternal","reducer","state","action","initState","columns","type","ACTION","EDIT_COLUMN_TITLE","columnId","title","ADD_COLUMN","REMOVE_COLUMN","TOGGLE_COLUMN","column","isHide","TA","MOVE_NOTE","noteId","source","destination","from","droppableId","to","DELETE_NOTE","newNodeIds","ADD_NOTE","newNoteIds","noteIds"],"mappings":"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","sourcesContent":["import { ACTION } from './actions'\r\nimport { ACTION as TA } from '../note/actions'\r\nimport initState from '../initialState'\r\nimport fns from './fns'\r\n\r\nconst {\r\n  setInObj,\r\n  crColumn,\r\n  noteIdsTo, filterNoteIds,\r\n  removeProp,\r\n  moveExternal, moveInternal\r\n} = fns;\r\n\r\nconst reducer = function(\r\n  state /*: TopicState */=initState.columns,\r\n  action /*: TopicAction */\r\n) /*: TopicState */ {\r\n  switch(action.type){\r\n    case ACTION.EDIT_COLUMN_TITLE: {\r\n      const { columnId, title } = action;\r\n      return setInObj(state, columnId, {\r\n        ...state[columnId],\r\n        title\r\n      });\r\n    }\r\n    case ACTION.ADD_COLUMN: {\r\n      const { columnId } = action;\r\n      return setInObj(state, columnId,\r\n        crColumn(columnId)\r\n      );\r\n    }\r\n    case ACTION.REMOVE_COLUMN: {\r\n      const { columnId } = action;\r\n      return removeProp(state, columnId);\r\n    }\r\n    case ACTION.TOGGLE_COLUMN: {\r\n      const { columnId } = action\r\n      , column = state[columnId];\r\n      return setInObj(state, columnId, {\r\n        ...column,\r\n        isHide: !column.isHide\r\n      });\r\n    }\r\n\r\n    case TA.MOVE_NOTE: {\r\n      const { noteId, source, destination } = action\r\n      , from = state[source.droppableId]\r\n      , to = state[destination.droppableId];\r\n      return from === to\r\n        ? moveInternal(state, noteId, source, destination, from)\r\n        : moveExternal(state, noteId, source, destination, from, to);\r\n    }\r\n    case TA.DELETE_NOTE: {\r\n      const { columnId, noteId } = action\r\n        , column = state[columnId]\r\n        , newNodeIds = filterNoteIds(column, noteId);\r\n      return setInObj(state, columnId,\r\n        noteIdsTo(column, newNodeIds)\r\n      );\r\n    }\r\n    case TA.ADD_NOTE: {\r\n      const { columnId, noteId } = action\r\n      , column = state[columnId]\r\n      , newNoteIds = [noteId, ...column.noteIds];\r\n      return setInObj(state, columnId,\r\n        noteIdsTo(column, newNoteIds)\r\n      );      \r\n    }\r\n\r\n    default: return state;\r\n  }\r\n};\r\n\r\nexport default reducer\r\n"],"file":"reducer.js"}