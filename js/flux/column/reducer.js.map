{"version":3,"file":"reducer.js","names":["crColumn","fns","moveExternal","moveInternal","columnsSlice","createSlice","name","initialState","columns","reducers","editColumnTitle","state","action","payload","columnId","title","toggleColumn","column","isHide","addColumn","removeColumn","extraReducers","builder","addCase","addNote","noteId","noteIds","unshift","deleteNote","filter","id","moveNote","draggableId","source","destination","from","droppableId","to","actions","reducer"],"sources":["../../../src/flux/column/reducer.js"],"sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\r\n\r\nimport {\r\n  addNote,\r\n  deleteNote,\r\n  moveNote\r\n} from '../note/actions';\r\nimport fns from './fns';\r\n\r\nimport initialState from '../initialState';\r\n\r\nconst {\r\n  crColumn,\r\n  moveExternal,\r\n  moveInternal\r\n} = fns;\r\n\r\n/*\r\nconst initialState = {\r\n  'c-1': {\r\n    id: 'c-1',\r\n    title: 'Topic 1',\r\n    noteIds: [],\r\n    withAdd: true\r\n  },\r\n  'c-2': {\r\n    id: 'c-2',\r\n    title: 'Topic 2',\r\n    noteIds: []\r\n  }\r\n};\r\n*/\r\n\r\nconst columnsSlice = createSlice({\r\n  name: 'columns',\r\n  initialState: initialState.columns,\r\n  reducers: {\r\n     editColumnTitle(state, action){\r\n       const { columnId, title } = action.payload\r\n       state[columnId].title = title\r\n     },\r\n     toggleColumn(state, action){\r\n       const { columnId } = action.payload\r\n       , column = state[columnId]\r\n       state[columnId].isHide = !column.isHide\r\n     },\r\n     addColumn(state, action){\r\n       const { columnId } = action.payload\r\n       state[columnId] = crColumn(columnId)\r\n     },\r\n     removeColumn(state, action){\r\n       const { columnId } = action.payload\r\n       delete state[columnId]\r\n     }\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(addNote, (state, action) => {\r\n        const { columnId, noteId } = action.payload\r\n        state[columnId].noteIds.unshift(noteId)\r\n      })\r\n      .addCase(deleteNote, (state, action) => {\r\n        const { columnId, noteId } = action.payload\r\n        , column = state[columnId];\r\n        column.noteIds = column.noteIds\r\n          .filter(id => id !== noteId)\r\n      })\r\n      .addCase(moveNote, (state, action) => {\r\n         const { draggableId, source, destination } = action.payload\r\n         , from = state[source.droppableId]\r\n         , to = state[destination.droppableId];\r\n\r\n         if (from === to) {\r\n           moveInternal(state, draggableId, source, destination, from)\r\n         } else {\r\n           moveExternal(state, draggableId, source, destination, from, to);\r\n         }\r\n      })\r\n  }\r\n})\r\n\r\nconst { actions, reducer } = columnsSlice;\r\n\r\nexport const {\r\n  editColumnTitle,\r\n  toggleColumn\r\n} = actions\r\n\r\nexport default reducer\r\n"],"mappings":"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"}