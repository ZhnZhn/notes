{"version":3,"sources":["../../../src/flux/column/reducer.js"],"names":["setInObj","fns","crColumn","noteIdsTo","filterNoteIds","removeProp","moveExternal","moveInternal","reducer","state","action","initState","columns","type","ACTION","EDIT_COLUMN_TITLE","columnId","title","ADD_COLUMN","REMOVE_COLUMN","TOGGLE_COLUMN","column","isHide","TA","MOVE_NOTE","noteId","source","destination","from","droppableId","to","DELETE_NOTE","newNodeIds","ADD_NOTE","newNoteIds","noteIds"],"mappings":"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","sourcesContent":["import { ACTION } from './actions'\r\nimport { ACTION as TA } from '../note/actions'\r\nimport initState from '../initialState'\r\nimport fns from './fns'\r\n\r\nconst {\r\n  setInObj,\r\n  crColumn,\r\n  noteIdsTo, filterNoteIds,\r\n  removeProp,\r\n  moveExternal, moveInternal\r\n} = fns;\r\n\r\nconst reducer = function(\r\n  state /*: TopicState */=initState.columns,\r\n  action /*: TopicAction */\r\n) /*: TopicState */ {\r\n  switch(action.type){\r\n    case ACTION.EDIT_COLUMN_TITLE: {\r\n      const { columnId, title } = action;\r\n      return setInObj(state, columnId, {\r\n        ...state[columnId],\r\n        title\r\n      });\r\n    }\r\n    case ACTION.ADD_COLUMN: {\r\n      const { columnId } = action;\r\n      return setInObj(state, columnId,\r\n        crColumn(columnId)\r\n      );\r\n    }\r\n    case ACTION.REMOVE_COLUMN: {\r\n      const { columnId } = action;\r\n      return removeProp(state, columnId);\r\n    }\r\n    case ACTION.TOGGLE_COLUMN: {\r\n      const { columnId } = action\r\n      , column = state[columnId];\r\n      return setInObj(state, columnId, {\r\n        ...column,\r\n        isHide: !column.isHide\r\n      });\r\n    }\r\n\r\n    case TA.MOVE_NOTE: {\r\n      const { noteId, source, destination } = action\r\n      , from = state[source.droppableId]\r\n      , to = state[destination.droppableId];\r\n      return from === to\r\n        ? moveInternal(state, noteId, source, destination, from)\r\n        : moveExternal(state, noteId, source, destination, from, to);\r\n    }\r\n    case TA.DELETE_NOTE: {\r\n      const { columnId, noteId } = action\r\n        , column = state[columnId]\r\n        , newNodeIds = filterNoteIds(column, noteId);\r\n      return setInObj(state, columnId,\r\n        noteIdsTo(column, newNodeIds)\r\n      );\r\n    }\r\n    case TA.ADD_NOTE: {\r\n      const { columnId, noteId } = action\r\n      , column = state[columnId]\r\n      , newNoteIds = [noteId, ...column.noteIds];\r\n      return setInObj(state, columnId,\r\n        noteIdsTo(column, newNoteIds)\r\n      );      \r\n    }\r\n\r\n    default: return state;\r\n  }\r\n};\r\n\r\nexport default reducer\r\n"],"file":"reducer.js"}