{"version":3,"sources":["../../../src/flux/board/reducer.js"],"names":["setInObj","fns","removeProp","filterBy","moveInternal","moveExternal","reducer","state","action","initState","boards","type","ACTION","EDIT_BOARD_TITLE","boardId","title","newBoard","ADD_BOARD","id","columnIds","REMOVE_BOARD","CA","ADD_COLUMN","columnId","oldBoard","REMOVE_COLUMN","MOVE_COLUMN","source","destination","from","droppableId","to"],"mappings":"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","sourcesContent":["import { ACTION } from './actions'\r\nimport { ACTION as CA } from '../column/actions'\r\nimport initState from '../initialState'\r\n\r\nimport fns from '../reducerFns'\r\nimport fDnDMoveFns from '../fDnDMoveFns'\r\n\r\nconst {\r\n  setInObj,\r\n  removeProp,\r\n  filterBy\r\n} = fns;\r\nconst {\r\n  moveInternal,\r\n  moveExternal\r\n} = fDnDMoveFns('columnIds');\r\n\r\n\r\n/*\r\nboards: {\r\n  'b-1': {\r\n    id: 'b-1',\r\n    title: 'Board 1',\r\n    columnIds: ['c-1','c-2']\r\n  }\r\n}\r\n*/\r\n\r\nconst reducer = function (\r\n  state /*: BoardState */=initState.boards,\r\n  action /*: BoardAction */\r\n) /*: BoardState */ {\r\n  switch(action.type){\r\n    case ACTION.EDIT_BOARD_TITLE: {\r\n      const { boardId, title } = action\r\n         , newBoard = {...state[boardId], title };\r\n      return setInObj(state, boardId, newBoard)\r\n    }\r\n    case ACTION.ADD_BOARD: {\r\n      const { boardId } = action;\r\n      return setInObj(state, boardId, {\r\n        id: boardId,\r\n        title: 'New Board',\r\n        columnIds: []\r\n      });\r\n    }\r\n    case ACTION.REMOVE_BOARD: {\r\n      const { boardId } = action;\r\n      return removeProp(state, boardId);\r\n    }\r\n    case CA.ADD_COLUMN: {\r\n      const { boardId, columnId } = action\r\n      , oldBoard = state[boardId]\r\n      , newBoard = {\r\n        ...oldBoard,\r\n        columnIds: [\r\n          ...oldBoard.columnIds\r\n          , columnId\r\n        ]\r\n      }\r\n      return setInObj(state, boardId, newBoard);\r\n    }\r\n    case CA.REMOVE_COLUMN:{\r\n      const { boardId, columnId } = action\r\n      , oldBoard = state[boardId];\r\n      return setInObj(state, boardId, {\r\n        ...oldBoard,\r\n        columnIds: filterBy(oldBoard.columnIds, columnId)\r\n      });\r\n    }\r\n    case CA.MOVE_COLUMN: {\r\n      const { columnId, source, destination } = action\r\n      , from = state[source.droppableId]\r\n      , to = state[destination.droppableId];\r\n      return from === to\r\n        ? moveInternal(state, columnId, source, destination, from)\r\n        : moveExternal(state, columnId, source, destination, from, to);\r\n    }\r\n    default: return state;\r\n  }\r\n};\r\n\r\nexport default reducer\r\n"],"file":"reducer.js"}