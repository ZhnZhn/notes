{"version":3,"file":"store.js","names":["_middlewares","middlewares","process","env","NODE_ENV","logger","store","next","action","result","console","group","log","getState","groupEnd","err","push","_getInitialState","_initialState","_str","window","localStorage","getItem","CONF","STORAGE_KEY","JSON","parse","e","msg","initialState","configureStore","reducer","rootReducer","preloadedState","devTools","middleware","getDefaultMiddleware","concat"],"sources":["../../src/flux/store.js"],"sourcesContent":["import { configureStore } from '@reduxjs/toolkit';\r\n\r\nimport CONF from './appConf'\r\nimport rootReducer from './rootReducer'\r\nimport initialState from './initialState'\r\nimport middlewares from './zh-middleware/middlewares'\r\n\r\nconst _middlewares = [\r\n  ...middlewares\r\n];\r\n\r\n/*eslint-disable no-undef, no-console*/\r\nif (process.env.NODE_ENV === 'development'){\r\n/*eslint-enable no-undef, no-console*/\r\n    const logger = store => next => action => {\r\n      let result;\r\n      try {\r\n        console.group('dispatching', action)\r\n        console.log('before', store.getState())\r\n        result = next(action)\r\n        console.log('after', store.getState());\r\n        console.groupEnd();\r\n        return result;\r\n      } catch (err){\r\n        console.log(err);\r\n        return result;\r\n      }\r\n    }\r\n    _middlewares.push(logger)\r\n }\r\n\r\nconst _getInitialState = () => {\r\n  let _initialState;\r\n  try {\r\n    const _str = window.localStorage\r\n      .getItem(CONF.STORAGE_KEY);\r\n    if (_str) {\r\n      _initialState = JSON.parse(_str)\r\n    }\r\n  } catch(e) {\r\n     console.log(e.msg)\r\n  }\r\n  return _initialState || initialState;\r\n};\r\n\r\nconst store = configureStore({\r\n  reducer: rootReducer,\r\n  preloadedState: _getInitialState(),\r\n  /*eslint-disable no-undef, no-console*/\r\n  devTools: process.env.NODE_ENV === 'development',\r\n  middleware: getDefaultMiddleware => process.env.NODE_ENV === 'development'\r\n     ? getDefaultMiddleware().concat(_middlewares)\r\n     : _middlewares\r\n  /*eslint-enable no-undef, no-console*/\r\n});\r\n\r\nexport default store\r\n"],"mappings":";;;;;;;AAAA;;AAEA;;AACA;;AACA;;AACA;;AAEA,IAAMA,YAAY,aACbC,wBADa,CAAlB;AAIA;;;AACA,IAAIC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,aAA7B,EAA2C;EAC3C;EACI,IAAMC,MAAM,GAAG,SAATA,MAAS,CAAAC,KAAK;IAAA,OAAI,UAAAC,IAAI;MAAA,OAAI,UAAAC,MAAM,EAAI;QACxC,IAAIC,MAAJ;;QACA,IAAI;UACFC,OAAO,CAACC,KAAR,CAAc,aAAd,EAA6BH,MAA7B;UACAE,OAAO,CAACE,GAAR,CAAY,QAAZ,EAAsBN,KAAK,CAACO,QAAN,EAAtB;UACAJ,MAAM,GAAGF,IAAI,CAACC,MAAD,CAAb;UACAE,OAAO,CAACE,GAAR,CAAY,OAAZ,EAAqBN,KAAK,CAACO,QAAN,EAArB;UACAH,OAAO,CAACI,QAAR;UACA,OAAOL,MAAP;QACD,CAPD,CAOE,OAAOM,GAAP,EAAW;UACXL,OAAO,CAACE,GAAR,CAAYG,GAAZ;UACA,OAAON,MAAP;QACD;MACF,CAb2B;IAAA,CAAR;EAAA,CAApB;;EAcAT,YAAY,CAACgB,IAAb,CAAkBX,MAAlB;AACF;;AAEF,IAAMY,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAM;EAC7B,IAAIC,aAAJ;;EACA,IAAI;IACF,IAAMC,IAAI,GAAGC,MAAM,CAACC,YAAP,CACVC,OADU,CACFC,mBAAA,CAAKC,WADH,CAAb;;IAEA,IAAIL,IAAJ,EAAU;MACRD,aAAa,GAAGO,IAAI,CAACC,KAAL,CAAWP,IAAX,CAAhB;IACD;EACF,CAND,CAME,OAAMQ,CAAN,EAAS;IACRjB,OAAO,CAACE,GAAR,CAAYe,CAAC,CAACC,GAAd;EACF;;EACD,OAAOV,aAAa,IAAIW,yBAAxB;AACD,CAZD;;AAcA,IAAMvB,KAAK,GAAG,IAAAwB,uBAAA,EAAe;EAC3BC,OAAO,EAAEC,uBADkB;EAE3BC,cAAc,EAAEhB,gBAAgB,EAFL;;EAG3B;EACAiB,QAAQ,EAAEhC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,aAJR;EAK3B+B,UAAU,EAAE,oBAAAC,oBAAoB;IAAA,OAAIlC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,aAAzB,GAC/BgC,oBAAoB,GAAGC,MAAvB,CAA8BrC,YAA9B,CAD+B,GAE/BA,YAF2B;EAAA;EAGhC;;AAR2B,CAAf,CAAd;eAWeM,K"}