{"version":3,"sources":["../../../src/flux/zh-middleware/appStorage.js"],"names":["appStorage","action","type","ACTION","SAVE_BOARD","window","localStorage","setItem","CONF","STORAGE_KEY","JSON","stringify","store","getState","e","console","log","msg","CLEAN_STORAGE","removeItem","next"],"mappings":";;;;;;AAAA;;AACA;;;;;;AAEA,IAAMA,aAAa,SAAbA,UAAa;AAAA,SAAS;AAAA,WAAQ,kBAAU;AAC5C,cAAOC,OAAOC,IAAd;AACE,aAAKC,gBAAOC,UAAZ;AAAwB;AACtB,gBAAI;AACFC,qBAAOC,YAAP,CAAoBC,OAApB,CACEC,kBAAKC,WADP,EAEEC,KAAKC,SAAL,CAAeC,MAAMC,QAAN,EAAf,CAFF;AAIA,qBAAO,IAAP;AACD,aAND,CAME,OAAMC,CAAN,EAAS;AACTC,sBAAQC,GAAR,CAAYF,EAAEG,GAAd;AACA,qBAAO,KAAP;AACD;AACF;AACD,aAAKd,gBAAOe,aAAZ;AAA2B;AACzB,gBAAI;AACFb,qBAAOC,YAAP,CAAoBa,UAApB,CAA+BX,kBAAKC,WAApC;AACA,qBAAO,IAAP;AACD,aAHD,CAGE,OAAMK,CAAN,EAAQ;AACRC,sBAAQC,GAAR,CAAYF,EAAEG,GAAd;AACA,qBAAO,KAAP;AACD;AACF;AACD;AAAS,iBAAOG,KAAKnB,MAAL,CAAP;AAtBX;AAwBD,KAzB2B;AAAA,GAAT;AAAA,CAAnB;;kBA2BeD,U","file":"appStorage.js","sourcesContent":["import { ACTION } from '../app/actions'\r\nimport CONF from '../appConf'\r\n\r\nconst appStorage = store => next => action => {\r\n  switch(action.type){\r\n    case ACTION.SAVE_BOARD: {\r\n      try {\r\n        window.localStorage.setItem(\r\n          CONF.STORAGE_KEY,\r\n          JSON.stringify(store.getState())\r\n        )\r\n        return true;\r\n      } catch(e) {\r\n        console.log(e.msg)\r\n        return false;\r\n      }\r\n    }\r\n    case ACTION.CLEAN_STORAGE: {\r\n      try {\r\n        window.localStorage.removeItem(CONF.STORAGE_KEY)\r\n        return true;\r\n      } catch(e){\r\n        console.log(e.msg)\r\n        return false;\r\n      }\r\n    }\r\n    default: return next(action)\r\n  }\r\n};\r\n\r\nexport default appStorage\r\n"]}