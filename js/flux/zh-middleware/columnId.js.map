{"version":3,"sources":["../../../src/flux/zh-middleware/columnId.js"],"names":["_isMax","state","boardId","sBoard","columnIds","length","CONF","MAX_COLUMNS","columnIdMiddleware","getState","dispatch","next","action","type","ACTION","ADD_COLUMN","N_MAX_COLUMNS","columnId","COLUMNS_PREFIX"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AAEA,IAAMA,MAAM,GAAG,SAATA,MAAS,CAACC,KAAD,EAAQC,OAAR;AAAA,SAAoBC,kBAChCC,SADgC,CACtBH,KADsB,EACfC,OADe,EACNG,MADM,IACIC,oBAAKC,WAD7B;AAAA,CAAf;;AAGA,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB;AAAA,MAAGC,QAAH,QAAGA,QAAH;AAAA,MAAaC,QAAb,QAAaA,QAAb;AAAA,SAA4B,UAAAC,IAAI;AAAA,WAAI,UAAAC,MAAM,EAAI;AACvE,UAAIA,MAAM,CAACC,IAAP,KAAgBC,gBAAOC,UAA3B,EAAuC;AACrC,YAAIf,MAAM,CAACS,QAAQ,EAAT,EAAaG,MAAM,CAACV,OAApB,CAAV,EAAwC;AACtCQ,UAAAA,QAAQ,CAAC,yBAAUJ,oBAAKU,aAAf,CAAD,CAAR;AACA,iBAAO,KAAP;AACD;;AACDJ,QAAAA,MAAM,iCACDA,MADC;AAEJK,UAAAA,QAAQ,EAAE,sBAAKX,oBAAKY,cAAV;AAFN,UAAN;AAID;;AACD,aAAOP,IAAI,CAACC,MAAD,CAAX;AACD,KAZ0D;AAAA,GAAhC;AAAA,CAA3B;;eAceJ,kB","sourcesContent":["import { ACTION } from '../column/actions'\r\nimport { showNotif } from '../modal/actions'\r\nimport { sBoard } from '../selectors'\r\nimport crId from './crId'\r\nimport CONF from '../appConf'\r\n\r\nconst _isMax = (state, boardId) => sBoard\r\n  .columnIds(state, boardId).length >= CONF.MAX_COLUMNS;\r\n\r\nconst columnIdMiddleware = ({ getState, dispatch }) => next => action => {\r\n  if (action.type === ACTION.ADD_COLUMN) {\r\n    if (_isMax(getState(), action.boardId)) {\r\n      dispatch(showNotif(CONF.N_MAX_COLUMNS))\r\n      return false;\r\n    }\r\n    action = {\r\n      ...action,\r\n      columnId: crId(CONF.COLUMNS_PREFIX)\r\n    }\r\n  }\r\n  return next(action);\r\n}\r\n\r\nexport default columnIdMiddleware\r\n"],"file":"columnId.js"}