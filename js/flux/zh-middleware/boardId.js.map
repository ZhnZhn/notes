{"version":3,"sources":["../../../src/flux/zh-middleware/boardId.js"],"names":["_isMax","state","sApp","boardIds","length","CONF","MAX_BOARDS","boardIdMiddleware","getState","dispatch","next","action","type","ACTION","ADD_BOARD","N_MAX_BOARDS","boardId","BOARDS_PREFIX"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AAEA,IAAMA,MAAM,GAAG,SAATA,MAAS,CAACC,KAAD;AAAA,SAAWC,gBACvBC,QADuB,CACdF,KADc,EACPG,MADO,IACGC,oBAAKC,UADnB;AAAA,CAAf;;AAGA,IAAMC,iBAAiB,GAAG,SAApBA,iBAAoB;AAAA,MAAGC,QAAH,QAAGA,QAAH;AAAA,MAAaC,QAAb,QAAaA,QAAb;AAAA,SAA4B,UAAAC,IAAI;AAAA,WAAI,UAAAC,MAAM,EAAI;AACtE,UAAIA,MAAM,CAACC,IAAP,KAAgBC,gBAAOC,SAA3B,EAAsC;AACpC,YAAKd,MAAM,CAACQ,QAAQ,EAAT,CAAX,EAA0B;AACxBC,UAAAA,QAAQ,CAAC,yBAAUJ,oBAAKU,YAAf,CAAD,CAAR;AACA,iBAAO,KAAP;AACD;;AACDJ,QAAAA,MAAM,iCACDA,MADC;AAEJK,UAAAA,OAAO,EAAE,sBAAKX,oBAAKY,aAAV;AAFL,UAAN;AAID;;AACD,aAAOP,IAAI,CAACC,MAAD,CAAX;AACD,KAZyD;AAAA,GAAhC;AAAA,CAA1B;;eAceJ,iB","sourcesContent":["import { ACTION } from '../board/actions'\r\nimport { showNotif } from '../modal/actions'\r\nimport crId from './crId'\r\nimport { sApp } from '../selectors'\r\nimport CONF from '../appConf'\r\n\r\nconst _isMax = (state) => sApp\r\n  .boardIds(state).length >= CONF.MAX_BOARDS;\r\n\r\nconst boardIdMiddleware = ({ getState, dispatch }) => next => action => {\r\n  if (action.type === ACTION.ADD_BOARD) {\r\n    if ( _isMax(getState()) ) {\r\n      dispatch(showNotif(CONF.N_MAX_BOARDS))\r\n      return false;\r\n    }\r\n    action  = {\r\n      ...action,\r\n      boardId: crId(CONF.BOARDS_PREFIX)\r\n     }\r\n  }\r\n  return next(action);\r\n};\r\n\r\nexport default boardIdMiddleware\r\n"],"file":"boardId.js"}