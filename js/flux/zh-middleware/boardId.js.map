{"version":3,"file":"boardId.js","names":["_isMax","state","sApp","boardIds","length","CONF","MAX_BOARDS","boardIdMiddleware","getState","dispatch","next","action","type","addBoard","showNotif","N_MAX_BOARDS","boardId","crId","BOARDS_PREFIX","payload"],"sources":["../../../src/flux/zh-middleware/boardId.js"],"sourcesContent":["import { addBoard } from '../board/actions'\r\nimport { showNotif } from '../modal/reducer'\r\nimport crId from './crId'\r\nimport { sApp } from '../selectors'\r\nimport CONF from '../appConf'\r\n\r\nconst _isMax = state => sApp\r\n  .boardIds(state).length >= CONF.MAX_BOARDS;\r\n\r\nconst boardIdMiddleware = ({ getState, dispatch }) => next => action => {\r\n  if (action.type === addBoard.type) {\r\n    if ( _isMax(getState()) ) {\r\n      dispatch(showNotif(CONF.N_MAX_BOARDS))\r\n      return false;\r\n    }\r\n    const boardId = crId(CONF.BOARDS_PREFIX)\r\n    action.payload = { boardId }\r\n    next(action)\r\n    return boardId;\r\n  }\r\n  return next(action);\r\n};\r\n\r\nexport default boardIdMiddleware\r\n"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AAEA,IAAMA,MAAM,GAAG,SAATA,MAAS,CAAAC,KAAK;EAAA,OAAIC,eAAA,CACrBC,QADqB,CACZF,KADY,EACLG,MADK,IACKC,mBAAA,CAAKC,UADd;AAAA,CAApB;;AAGA,IAAMC,iBAAiB,GAAG,SAApBA,iBAAoB;EAAA,IAAGC,QAAH,QAAGA,QAAH;EAAA,IAAaC,QAAb,QAAaA,QAAb;EAAA,OAA4B,UAAAC,IAAI;IAAA,OAAI,UAAAC,MAAM,EAAI;MACtE,IAAIA,MAAM,CAACC,IAAP,KAAgBC,iBAAA,CAASD,IAA7B,EAAmC;QACjC,IAAKZ,MAAM,CAACQ,QAAQ,EAAT,CAAX,EAA0B;UACxBC,QAAQ,CAAC,IAAAK,kBAAA,EAAUT,mBAAA,CAAKU,YAAf,CAAD,CAAR;UACA,OAAO,KAAP;QACD;;QACD,IAAMC,OAAO,GAAG,IAAAC,gBAAA,EAAKZ,mBAAA,CAAKa,aAAV,CAAhB;QACAP,MAAM,CAACQ,OAAP,GAAiB;UAAEH,OAAO,EAAPA;QAAF,CAAjB;QACAN,IAAI,CAACC,MAAD,CAAJ;QACA,OAAOK,OAAP;MACD;;MACD,OAAON,IAAI,CAACC,MAAD,CAAX;IACD,CAZyD;EAAA,CAAhC;AAAA,CAA1B;;eAceJ,iB"}