{"version":3,"file":"useClickOutside.js","names":["_removeClickListener","listener","ref","getRefValue","document","removeEventListener","setRefValue","useClickOutside","isShow","onClickOutside","_ref","useRef","_refIs","_hClickOutside","useCallback","event","_el","contains","target","stopPropagation","useEffect","addEventListener"],"sources":["../../../src/component/hooks/useClickOutside.js"],"sourcesContent":["import {\r\n  useRef,\r\n  useCallback,\r\n  useEffect,\r\n  getRefValue,\r\n  setRefValue\r\n} from '../uiApi';\r\n\r\nconst _removeClickListener = (\r\n  listener,\r\n  ref\r\n) => {\r\n  if (getRefValue(ref)) {\r\n    document.removeEventListener('click', listener, true);\r\n    setRefValue(ref, null)\r\n  }\r\n};\r\n\r\nconst useClickOutside = (\r\n  isShow,\r\n  onClickOutside\r\n) => {\r\n  const _ref = useRef(null)\r\n  , _refIs = useRef(null)\r\n  /*eslint-disable react-hooks/exhaustive-deps */\r\n  , _hClickOutside = useCallback(event => {\r\n      const _el = getRefValue(_ref);\r\n      if ( _el && _el.contains\r\n        && !_el.contains(event.target)\r\n      ){\r\n        event.stopPropagation()\r\n        onClickOutside(event)\r\n      }\r\n  }, [])\r\n  // onClickOutside\r\n  /*eslint-enable react-hooks/exhaustive-deps */\r\n\r\n  useEffect(() => {\r\n    if (isShow && !getRefValue(_refIs)) {\r\n      document.addEventListener('click', _hClickOutside, true)\r\n      setRefValue(_refIs, true)\r\n    } else if (!isShow) {\r\n      _removeClickListener(_hClickOutside, _refIs)\r\n    }\r\n  })\r\n\r\n  /*eslint-disable react-hooks/exhaustive-deps */\r\n  useEffect(() => {\r\n    return () => _removeClickListener(_hClickOutside, _refIs);\r\n  }, [])\r\n  // _hClickOutside\r\n  /*eslint-enable react-hooks/exhaustive-deps */\r\n\r\n  return _ref;\r\n};\r\n\r\nexport default useClickOutside\r\n"],"mappings":";;;;;AAAA;;AAQA,IAAMA,oBAAoB,GAAG,SAAvBA,oBAAuB,CAC3BC,QAD2B,EAE3BC,GAF2B,EAGxB;EACH,IAAI,IAAAC,kBAAA,EAAYD,GAAZ,CAAJ,EAAsB;IACpBE,QAAQ,CAACC,mBAAT,CAA6B,OAA7B,EAAsCJ,QAAtC,EAAgD,IAAhD;IACA,IAAAK,kBAAA,EAAYJ,GAAZ,EAAiB,IAAjB;EACD;AACF,CARD;;AAUA,IAAMK,eAAe,GAAG,SAAlBA,eAAkB,CACtBC,MADsB,EAEtBC,cAFsB,EAGnB;EACH,IAAMC,IAAI,GAAG,IAAAC,aAAA,EAAO,IAAP,CAAb;EAAA,IACEC,MAAM,GAAG,IAAAD,aAAA,EAAO,IAAP;EACX;EAFA;EAAA,IAGEE,cAAc,GAAG,IAAAC,kBAAA,EAAY,UAAAC,KAAK,EAAI;IACpC,IAAMC,GAAG,GAAG,IAAAb,kBAAA,EAAYO,IAAZ,CAAZ;;IACA,IAAKM,GAAG,IAAIA,GAAG,CAACC,QAAX,IACA,CAACD,GAAG,CAACC,QAAJ,CAAaF,KAAK,CAACG,MAAnB,CADN,EAEC;MACCH,KAAK,CAACI,eAAN;MACAV,cAAc,CAACM,KAAD,CAAd;IACD;EACJ,CARkB,EAQhB,EARgB,CAHnB,CADG,CAaH;;EACA;;;EAEA,IAAAK,gBAAA,EAAU,YAAM;IACd,IAAIZ,MAAM,IAAI,CAAC,IAAAL,kBAAA,EAAYS,MAAZ,CAAf,EAAoC;MAClCR,QAAQ,CAACiB,gBAAT,CAA0B,OAA1B,EAAmCR,cAAnC,EAAmD,IAAnD;MACA,IAAAP,kBAAA,EAAYM,MAAZ,EAAoB,IAApB;IACD,CAHD,MAGO,IAAI,CAACJ,MAAL,EAAa;MAClBR,oBAAoB,CAACa,cAAD,EAAiBD,MAAjB,CAApB;IACD;EACF,CAPD;EASA;;EACA,IAAAQ,gBAAA,EAAU,YAAM;IACd,OAAO;MAAA,OAAMpB,oBAAoB,CAACa,cAAD,EAAiBD,MAAjB,CAA1B;IAAA,CAAP;EACD,CAFD,EAEG,EAFH,EA1BG,CA6BH;;EACA;;EAEA,OAAOF,IAAP;AACD,CApCD;;eAsCeH,e"}