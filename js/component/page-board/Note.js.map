{"version":3,"file":"Note.js","names":["CL","DnDNote","props","columnId","note","dragHandleProps","noteId","id","noteTitle","title","_refTitle","useRef","useBool","isMenuMore","openMenuMore","closeMenuMore","useToggle","isDetails","toggleDetails","dispatch","useDispatch","_deleteNote","useCallback","deleteNote","_blurTitle","evt","target","value","_titleInst","getRefValue","setValue","editNoteTitle","_editDetails","showDetails"],"sources":["../../../src/component/page-board/Note.jsx"],"sourcesContent":["//import PropsType from 'prop-types'\r\nimport {\r\n  useDispatch,\r\n  useRef,\r\n  useCallback,\r\n  getRefValue\r\n} from '../uiApi';\r\n\r\nimport useBool from '../hooks/useBool';\r\nimport useToggle from '../hooks/useToggle';\r\n\r\nimport { deleteNote } from '../../flux/note/actions';\r\nimport { editNoteTitle } from '../../flux/note/reducer';\r\n\r\nimport { showDetails } from '../../flux/modal/reducer';\r\n\r\nimport NoteCaption from './NoteCaption';\r\nimport NoteDetails from './NoteDetails';\r\n\r\nconst CL = 'note';\r\n\r\nconst DnDNote = (\r\n  props\r\n) => {\r\n  const {\r\n    columnId,\r\n    note,\r\n    dragHandleProps\r\n  } = props\r\n  , {\r\n    id:noteId,\r\n    title:noteTitle\r\n  } = note\r\n  , _refTitle = useRef()\r\n  , [\r\n    isMenuMore,\r\n    openMenuMore,\r\n    closeMenuMore\r\n  ] = useBool()\r\n  , [\r\n    isDetails,\r\n    toggleDetails\r\n  ] = useToggle()\r\n  , dispatch = useDispatch()\r\n  /*eslint-disable react-hooks/exhaustive-deps */\r\n  , _deleteNote = useCallback(() => {\r\n    dispatch(deleteNote({\r\n      columnId,\r\n      noteId\r\n    }))\r\n  }, [columnId])\r\n  //dispatch, noteId\r\n  /*eslint-enable react-hooks/exhaustive-deps */\r\n  /*eslint-disable react-hooks/exhaustive-deps */\r\n  , _blurTitle = useCallback((evt) => {\r\n    const title = evt.target.value;\r\n    if (!title) {\r\n      const _titleInst = getRefValue(_refTitle);\r\n      if (_titleInst) {\r\n        _titleInst.setValue(noteTitle)\r\n      }\r\n    } else if (title !== noteTitle) {\r\n      dispatch(editNoteTitle({\r\n        noteId,\r\n        title\r\n      }))\r\n    }\r\n  }, [noteTitle])\r\n  // dispatch, noteId\r\n  /*eslint-enable react-hooks/exhaustive-deps */\r\n  /*eslint-disable react-hooks/exhaustive-deps */\r\n  , _editDetails = useCallback(() => {\r\n     dispatch(showDetails(note))\r\n     closeMenuMore()\r\n  }, [note]);\r\n  // dispatch, closeMenuMore\r\n  /*eslint-enable react-hooks/exhaustive-deps */\r\n\r\n\r\n  return (\r\n    <div\r\n      className={CL}\r\n      id={noteId}\r\n    >\r\n      <NoteCaption\r\n        dragHandleProps={dragHandleProps}\r\n        isDetails={isDetails}\r\n        onClickHandle={toggleDetails}\r\n\r\n        refTitle={_refTitle}\r\n        noteTitle={noteTitle}\r\n        onBlurTitle={_blurTitle}\r\n\r\n        isMenuMore={isMenuMore}\r\n        onClickMenuMore={openMenuMore}\r\n        onCloseMenuMore={closeMenuMore}\r\n        onEditDetails={_editDetails}\r\n        onRemoveNote={_deleteNote}\r\n      />\r\n      <NoteDetails\r\n        isShow={isDetails}\r\n        note={note}\r\n        editDetails={_editDetails}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\n/*\r\nDnDNote.propTypes = {\r\n  dragHandleProps: PropsType.object,\r\n  note: PropsType.object\r\n  columnId: PropsType.string\r\n}\r\n*/\r\n\r\nexport default DnDNote\r\n"],"mappings":";;;;;;;AACA;;AAOA;;AACA;;AAEA;;AACA;;AAEA;;AAEA;;AACA;;;;AAjBA;AAmBA,IAAMA,EAAE,GAAG,MAAX;;AAEA,IAAMC,OAAO,GAAG,SAAVA,OAAU,CACdC,KADc,EAEX;EACH,IACEC,QADF,GAIID,KAJJ,CACEC,QADF;EAAA,IAEEC,IAFF,GAIIF,KAJJ,CAEEE,IAFF;EAAA,IAGEC,eAHF,GAIIH,KAJJ,CAGEG,eAHF;EAAA,IAMKC,MANL,GAQIF,IARJ,CAMEG,EANF;EAAA,IAOQC,SAPR,GAQIJ,IARJ,CAOEK,KAPF;EAAA,IASEC,SATF,GASc,IAAAC,aAAA,GATd;EAAA,eAcI,IAAAC,oBAAA,GAdJ;EAAA,IAWEC,UAXF;EAAA,IAYEC,YAZF;EAAA,IAaEC,aAbF;EAAA,iBAkBI,IAAAC,sBAAA,GAlBJ;EAAA,IAgBEC,SAhBF;EAAA,IAiBEC,aAjBF;EAAA,IAmBEC,QAnBF,GAmBa,IAAAC,kBAAA,GAnBb;EAAA,IAqBEC,WArBF,GAqBgB,IAAAC,kBAAA,EAAY,YAAM;IAChCH,QAAQ,CAAC,IAAAI,mBAAA,EAAW;MAClBpB,QAAQ,EAARA,QADkB;MAElBG,MAAM,EAANA;IAFkB,CAAX,CAAD,CAAR;EAID,CALe,EAKb,CAACH,QAAD,CALa,CArBhB;EAAA,IA8BEqB,UA9BF,GA8Be,IAAAF,kBAAA,EAAY,UAACG,GAAD,EAAS;IAClC,IAAMhB,KAAK,GAAGgB,GAAG,CAACC,MAAJ,CAAWC,KAAzB;;IACA,IAAI,CAAClB,KAAL,EAAY;MACV,IAAMmB,UAAU,GAAG,IAAAC,kBAAA,EAAYnB,SAAZ,CAAnB;;MACA,IAAIkB,UAAJ,EAAgB;QACdA,UAAU,CAACE,QAAX,CAAoBtB,SAApB;MACD;IACF,CALD,MAKO,IAAIC,KAAK,KAAKD,SAAd,EAAyB;MAC9BW,QAAQ,CAAC,IAAAY,sBAAA,EAAc;QACrBzB,MAAM,EAANA,MADqB;QAErBG,KAAK,EAALA;MAFqB,CAAd,CAAD,CAAR;IAID;EACF,CAbc,EAaZ,CAACD,SAAD,CAbY,CA9Bf;EAAA,IA+CEwB,YA/CF,GA+CiB,IAAAV,kBAAA,EAAY,YAAM;IAChCH,QAAQ,CAAC,IAAAc,qBAAA,EAAY7B,IAAZ,CAAD,CAAR;IACAW,aAAa;EACf,CAHgB,EAGd,CAACX,IAAD,CAHc,CA/CjB,CADG,CAoDH;;EACA;;;EAGA,oBACE;IACE,SAAS,EAAEJ,EADb;IAEE,EAAE,EAAEM,MAFN;IAAA,wBAIE,qBAAC,uBAAD;MACE,eAAe,EAAED,eADnB;MAEE,SAAS,EAAEY,SAFb;MAGE,aAAa,EAAEC,aAHjB;MAKE,QAAQ,EAAER,SALZ;MAME,SAAS,EAAEF,SANb;MAOE,WAAW,EAAEgB,UAPf;MASE,UAAU,EAAEX,UATd;MAUE,eAAe,EAAEC,YAVnB;MAWE,eAAe,EAAEC,aAXnB;MAYE,aAAa,EAAEiB,YAZjB;MAaE,YAAY,EAAEX;IAbhB,EAJF,eAmBE,qBAAC,uBAAD;MACE,MAAM,EAAEJ,SADV;MAEE,IAAI,EAAEb,IAFR;MAGE,WAAW,EAAE4B;IAHf,EAnBF;EAAA,EADF;AA2BD,CArFD;AAuFA;AACA;AACA;AACA;AACA;AACA;AACA;;;eAEe/B,O"}