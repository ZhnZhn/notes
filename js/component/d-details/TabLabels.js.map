{"version":3,"file":"TabLabels.js","names":["S_LABELS","padding","S_BT_ADD","marginLeft","TabLabels","props","isSelected","note","dispatch","onClose","id","useState","labels","setLabels","_refBtClose","useRef","_refLabel","_refInputLabel","_refInputColor","_onBlurLabel","useCallback","evt","current","target","value","_onAddLabel","prevState","addLabel","toTitle","getRefValue","getColor","setValue","_onRemoveLabel","label","removeLabel","_saveLabels","editNoteLabels","noteId","useBtFocus","CL_CARD_BT","CL_MD_ACTIONS"],"sources":["../../../src/component/d-details/TabLabels.jsx"],"sourcesContent":["import {\r\n  useRef,\r\n  useState,\r\n  useCallback,\r\n  getRefValue\r\n} from '../uiApi'\r\nimport useBtFocus from './useBtFocus'\r\n\r\nimport { editNoteLabels } from '../../flux/note/actions'\r\n\r\nimport LabelList from './LabelList'\r\nimport InputText from '../zhn/InputText'\r\nimport PaneColors from '../zhn-m/PaneColors'\r\nimport FlatButton from '../zhn-m/FlatButton'\r\nimport DialogButtons from './DialogButtons'\r\n\r\nimport {\r\n  toTitle,\r\n  addLabel,\r\n  removeLabel\r\n} from './TabLabelsFn';\r\n\r\nimport {\r\n  CL_CARD_BT,\r\n  CL_MD_ACTIONS\r\n} from '../style/CL';\r\n\r\nconst S_LABELS = { padding: '4px 0 8px 12px' }\r\n, S_BT_ADD = { marginLeft: 16 };\r\n\r\nconst TabLabels = (props) => {\r\n  const {\r\n    isSelected,\r\n    note,\r\n    dispatch,\r\n    onClose\r\n  } = props\r\n  , { id } = note\r\n  , [\r\n    labels,\r\n    setLabels\r\n  ] = useState(() => note.labels || [])\r\n  , _refBtClose = useRef(null)\r\n  , _refLabel = useRef('')\r\n  , _refInputLabel = useRef(null)\r\n  , _refInputColor = useRef(null)\r\n  , _onBlurLabel = useCallback(evt => {\r\n     _refLabel.current = evt.target.value\r\n  }, [])\r\n  , _onAddLabel = useCallback(() => {\r\n    setLabels(prevState => addLabel(\r\n      prevState,\r\n      toTitle(getRefValue(_refLabel)),\r\n      getRefValue(_refInputColor).getColor()\r\n    ), getRefValue(_refInputLabel).setValue(''))\r\n  }, [])\r\n  , _onRemoveLabel = useCallback(label => {\r\n     setLabels(prevState => removeLabel(\r\n       prevState,\r\n       label\r\n     ))\r\n  }, [])\r\n  /*eslint-disable react-hooks/exhaustive-deps */\r\n  , _saveLabels = useCallback(() => {\r\n    dispatch(editNoteLabels({ noteId: id, labels }))\r\n  }, [id, labels]);\r\n  //dispatch\r\n  /*eslint-enable react-hooks/exhaustive-deps */\r\n\r\n  useBtFocus(_refBtClose, isSelected, props)\r\n\r\n  return (\r\n      <>\r\n        <div style={S_LABELS}>\r\n          <LabelList\r\n            labels={labels}\r\n            onRemove={_onRemoveLabel}\r\n          />\r\n          <InputText\r\n            ref={_refInputLabel}\r\n            onBlur={_onBlurLabel}\r\n          />\r\n          <FlatButton\r\n            clCaption={CL_CARD_BT}\r\n            style={S_BT_ADD}\r\n            caption=\"AddLabel\"\r\n            title=\"Click to add a new label\"\r\n            timeout={400}\r\n            onClick={_onAddLabel}\r\n          />\r\n        </div>\r\n        <PaneColors\r\n          ref={_refInputColor}\r\n        />\r\n        <DialogButtons\r\n          refBtClose={_refBtClose}\r\n          className={CL_MD_ACTIONS}\r\n          onSave={_saveLabels}\r\n          onClose={onClose}\r\n        />\r\n      </>\r\n  );\r\n}\r\n\r\nexport default TabLabels\r\n"],"mappings":"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"}