{"version":3,"sources":["../../../src/component/zhn-ch/ModalPane.jsx"],"names":["ModalPane","_isEventTargetOutside","event","rootNode","contains","target","_hClickOutside","onClose","props","stopPropagation","_addOutsideListener","document","addEventListener","_removeOutsideListener","removeEventListener","_initShowMode","focus","_hKeyDown","evt","key","preventDefault","_refRootNode","n","componentDidMount","isShow","componentWillUnmount","componentDidUpdate","prevProps","render","className","style","children","Component","defaultProps"],"mappings":";;;;;;;;;;;AAAA;;IAEMA,S;;;;;;;;;;;;UAcJC,qB,GAAwB,UAACC,KAAD;AAAA,aAAW,MAAKC,QAAL,IAC7B,MAAKA,QAAL,CAAcC,QADe,IAE7B,CAAC,MAAKD,QAAL,CAAcC,QAAd,CAAuBF,KAAK,CAACG,MAA7B,CAFiB;AAAA,K;;UAIxBC,c,GAAiB,UAACJ,KAAD,EAAW;AAAA,UAClBK,OADkB,GACN,MAAKC,KADC,CAClBD,OADkB;;AAE1B,UAAI,MAAKN,qBAAL,CAA2BC,KAA3B,CAAJ,EAAuC;AACrCA,QAAAA,KAAK,CAACO,eAAN;AACAF,QAAAA,OAAO,CAACL,KAAD,CAAP;AACD;AACF,K;;UAEDQ,mB,GAAsB,YAAM;AAC1BC,MAAAA,QAAQ,CAACC,gBAAT,CAA0B,OAA1B,EAAmC,MAAKN,cAAxC,EAAwD,IAAxD;AACD,K;;UACDO,sB,GAAyB,YAAM;AAC7BF,MAAAA,QAAQ,CAACG,mBAAT,CAA6B,OAA7B,EAAsC,MAAKR,cAA3C,EAA2D,IAA3D;AACD,K;;UAEDS,a,GAAgB,YAAM;AACpB,YAAKL,mBAAL;;AACA,UAAI,MAAKP,QAAT,EAAmB;AACjB,cAAKA,QAAL,CAAca,KAAd;AACD;AACF,K;;UAsBDC,S,GAAY,UAACC,GAAD,EAAS;AACnB,UAAIA,GAAG,CAACC,GAAJ,KAAY,QAAhB,EAA0B;AACxBD,QAAAA,GAAG,CAACE,cAAJ;;AACA,cAAKZ,KAAL,CAAWD,OAAX,CAAmBW,GAAnB;AACD;AACF,K;;UAEDG,Y,GAAe,UAAAC,CAAC;AAAA,aAAI,MAAKnB,QAAL,GAAgBmB,CAApB;AAAA,K;;;;;;;SA3BhBC,iB,GAAA,6BAAoB;AAClB,QAAI,KAAKf,KAAL,CAAWgB,MAAf,EAAuB;AACrB,WAAKT,aAAL;AACD;AACF,G;;SACDU,oB,GAAA,gCAAuB;AACrB,SAAKZ,sBAAL;AACD,G;;SAGDa,kB,GAAA,4BAAmBC,SAAnB,EAA8B;AAC5B,QAAI,KAAKnB,KAAL,KAAemB,SAAnB,EAA8B;AAC5B,UAAI,KAAKnB,KAAL,CAAWgB,MAAf,EAAsB;AACpB,aAAKT,aAAL;AACD,OAFD,MAEO;AACL,aAAKF,sBAAL;AACD;AACF;AACF,G;;SAWDe,M,GAAA,kBAAQ;AAAA,sBAKF,KAAKpB,KALH;AAAA,QAEJqB,SAFI,eAEJA,SAFI;AAAA,QAGJC,KAHI,eAGJA,KAHI;AAAA,QAIJC,QAJI,eAIJA,QAJI;AAMN,wBACE;AACE,MAAA,GAAG,EAAE,KAAKV,YADZ;AAEE,MAAA,SAAS,EAAEQ,SAFb;AAGE,MAAA,KAAK,EAAEC,KAHT;AAIE,MAAA,QAAQ,EAAC,GAJX,CAKE;AACA;AANF;AAOE,MAAA,SAAS,EAAE,KAAKb,SAPlB;AAAA,gBASGc;AATH,MADF;AAaD,G;;;EAxFqBC,gB;;AAAlBhC,S,CAUGiC,Y,GAAe;AACpB1B,EAAAA,OAAO,EAAE,mBAAM,CAAE;AADG,C;eAiFTP,S","sourcesContent":["import { Component } from 'react'\r\n\r\nclass ModalPane extends Component {\r\n  /*\r\n  static propTypes = {\r\n    className: PropTypes.string,\r\n    style: PropTypes.object,\r\n    isShow: PropTypes.bool,\r\n    onClose: PropTypes.func\r\n  }\r\n  */\r\n\r\n  static defaultProps = {\r\n    onClose: () => {}\r\n  }\r\n\r\n  _isEventTargetOutside = (event) => this.rootNode\r\n     && this.rootNode.contains\r\n     && !this.rootNode.contains(event.target)\r\n\r\n  _hClickOutside = (event) => {\r\n    const { onClose } = this.props;\r\n    if (this._isEventTargetOutside(event)) {\r\n      event.stopPropagation()\r\n      onClose(event)\r\n    }\r\n  }\r\n\r\n  _addOutsideListener = () => {\r\n    document.addEventListener('click', this._hClickOutside, true)\r\n  }\r\n  _removeOutsideListener = () => {\r\n    document.removeEventListener('click', this._hClickOutside, true)\r\n  }\r\n\r\n  _initShowMode = () => {\r\n    this._addOutsideListener()\r\n    if (this.rootNode) {\r\n      this.rootNode.focus()\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (this.props.isShow) {\r\n      this._initShowMode()\r\n    }\r\n  }\r\n  componentWillUnmount() {\r\n    this._removeOutsideListener()\r\n  }\r\n\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (this.props !== prevProps ){\r\n      if (this.props.isShow){\r\n        this._initShowMode()\r\n      } else {\r\n        this._removeOutsideListener()\r\n      }\r\n    }\r\n  }\r\n\r\n  _hKeyDown = (evt) => {\r\n    if (evt.key === 'Escape') {\r\n      evt.preventDefault()\r\n      this.props.onClose(evt)\r\n    }\r\n  }\r\n\r\n  _refRootNode = n => this.rootNode = n\r\n\r\n  render(){\r\n    const {\r\n      className,\r\n      style,\r\n      children\r\n    } = this.props;\r\n    return (\r\n      <div\r\n        ref={this._refRootNode}\r\n        className={className}\r\n        style={style}\r\n        tabIndex=\"0\"\r\n        //role=\"dialog\"\r\n        //aria-modal={true}\r\n        onKeyDown={this._hKeyDown}\r\n      >\r\n        {children}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ModalPane\r\n"],"file":"ModalPane.js"}