/*! For license information please see app_772e0dd0d17abc3d99d2.js.LICENSE.txt */
"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([[143],{12:(e,t,n)=>{var o=n(935),r=n(216),i=n(403),s=function(e,t){return"Max number ("+t+") of "+e+" reached."},a=8,l=8,c=12;const d={STORAGE_KEY:"notes-manager",DMSG_PREFIX:"m",MSG_SAVED:"Boards saved",MSG_SAVE_FAIL:"Boards not saved",MSG_CLEANED:"localStorage cleaned",MSG_CLEAN_FAIL:"localStorage not cleaned",BOARDS_PREFIX:"b",MAX_BOARDS:a,N_MAX_BOARDS:{descr:s("boards",a)},MAX_COLUMNS:l,COLUMNS_PREFIX:"c",N_MAX_COLUMNS:{descr:s("columns",l)},MAX_NOTES:c,NOTES_PREFIX:"n",N_MAX_NOTES:{descr:s("notes",c)},NLABELS_PREFIX:"nl"};var u=n(857),p=(0,i.PH)("boards/addBoard"),h=(0,i.PH)("boards/removeBoard"),f=(0,i.PH)("boards/setCurrentBoard");const m={app:{boardId:"b-1",boardIds:["b-1"],uiTheme:"DARK"},drawerMsg:[],modal:{id:void 0,data:void 0},boards:{"b-1":{id:"b-1",title:"Board 1",columnIds:["c-1","c-2"]}},notes:{},noteLabels:{},columns:{"c-1":{id:"c-1",title:"Topic 1",noteIds:[],withAdd:!0},"c-2":{id:"c-2",title:"Topic 2",noteIds:[]}}};var v=(0,i.oM)({name:"app",initialState:m.app,reducers:{setUiTheme:function(e,t){var n=t.payload.uiTheme;e.uiTheme=n}},extraReducers:function(e){return e.addCase(p,(function(e,t){var n=t.payload.boardId;e.boardIds.push(n)})).addCase(h,(function(e,t){var n=t.payload.boardId;e.boardIds=e.boardIds.filter((function(e){return e!==n}))})).addCase(f,(function(e,t){var n=t.payload.boardId;e.boardId=n}))}}),g=v.actions,x=v.reducer,_=g.setUiTheme;const C=x;var b=function(e,t){return{id:e,msg:t}},y=(0,i.oM)({name:"drawerMsg",initialState:m.drawerMsg,reducers:{addDrawerMsg:function(e,t){var n=t.payload,o=n.id,r=n.msg;e.unshift(b(o,r))},removeDrawerMsg:function(e,t){var n=t.payload.id;return e.filter((function(e){return e.id!==n}))}}}),N=y.actions,j=y.reducer,I=N.addDrawerMsg,S=N.removeDrawerMsg;const D=j;var w=n(294),E=n(462),T=n(721),A=Array.isArray,R=function(e){return A(e)?e[0]?e[1]:"":e||""};const M=function(e,t){var n=R(e),o=R(t);return n?o?n+" "+o:n:o||void 0};var O=n(893);const B=function(e){var t=e.className,n=e.style,o=e.tabIndex,r=e.onClose;return(0,O.jsx)("button",{tabIndex:o,className:M("bt-svg-close",t),style:n,onClick:r,children:(0,O.jsxs)("svg",{viewBox:"0 0 12 12",width:"100%",height:"100%",preserveAspectRatio:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,O.jsx)("path",{d:"M 0,0 L 12,12"}),(0,O.jsx)("path",{d:"M 12,0 L 0,12"})]})})};var k="dialog__header",L="dialog__caption not-selected",P="dialog__svg-close";const H=function(e){var t=e.rootStyle,n=(e.svgStyle,e.caption),o=e.children,r=e.onClose;return(0,O.jsxs)("div",{className:k,style:t,children:[(0,O.jsx)("span",{className:L,children:n}),o,(0,O.jsx)(B,{className:P,onClose:r})]})};var G=Array.isArray,Z=function(e){return G(e)?e[0]?e[1]:void 0:e||void 0};const F=function(){var e=Z(arguments.length<=0?void 0:arguments[0]),t=Z(arguments.length<=1?void 0:arguments[1]);return e?t?(0,E.Z)({},e,t):e:t||void 0};var U={KEY:{textDecoration:"underline"}},K=function(e,t){var n=function(e,t){return e?t.toLowerCase().indexOf(e):-1}(e,t);if(-1===n)return t;var o=t.substring(0,n),r=t.substring(n,n+1),i=t.substring(n+1);return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)("span",{children:o}),(0,O.jsx)("span",{style:U.KEY,children:r}),(0,O.jsx)("span",{children:i})]})};const W=function(e){var t=e.className,n=e.caption,o=e.accessKey,r=e.children;return n?(0,O.jsxs)("span",{className:t,children:[K(o,n),r]}):null};var X="bt-flat",V="bt-flat__div",z="bt-flat__span",Y={PRIMARY:{color:"#607d8b"}};const $=(0,w.forwardRef)((function(e,t){var n=e.timeout,o=void 0===n?3e3:n,r=e.className,i=e.style,s=e.clDiv,a=void 0===s?V:s,l=e.clCaption,c=e.isPrimary,d=e.title,u=void 0===d?"":d,p=e.caption,h=e.accessKey,f=e.children,m=e.isEvent,v=void 0===m||m,g=e.onClick,x=(0,w.useRef)(null),_=(0,w.useCallback)((function(e){var t=v?e:void 0;if(0!==o){var n=x.current,r=e.timeStamp;(null==n||r-n>o)&&(g(t),x.current=r)}else g(t)}),[v,o,g]),C=M(X,r),b=M(z,l),y=F(i,[c,Y.PRIMARY]),N=function(e,t){return t?e+" ["+t+"]":e}(u,h);return(0,O.jsx)("button",{ref:t,className:C,style:y,accessKey:h,title:N,onClick:_,children:(0,O.jsxs)("div",{className:a,children:[(0,O.jsx)(W,{className:b,caption:p,accessKey:h}),f]})})}));var J="modal-dialog",q="md__actions",Q="show-popup",ee="hide-popup",te={SHOW:{display:"block"},HIDE:{display:"none"},HIDE_POPUP:{opacity:0,transform:"scaleY(0)"}},ne=function(e){function t(t){var n;return(n=e.call(this,t)||this)._hClickDialog=function(e){e.stopPropagation()},n._refBtClose=function(e){return n._btClose=e},n._renderCommandButton=function(){var e=n.props,t=e.commandButtons,o=e.withoutClose,r=e.onClose;return(0,O.jsxs)("div",{className:q,children:[t,!o&&(0,O.jsx)($,{ref:n._refBtClose,caption:"Close",timeout:0,onClick:r})]})},n.wasClosing=!1,n}(0,T.Z)(t,e);var n=t.prototype;return n.shouldComponentUpdate=function(e,t){return e===this.props||!e.isNotUpdate},n.focusBtClose=function(){this.props.isFocusClose&&this._btClose&&this._btClose.focus()},n.componentDidMount=function(){this.focusBtClose()},n.componentDidUpdate=function(e,t){var n=this,o=this.props,r=o.timeout,i=o.isShow;e.isShow&&!i&&(this.wasClosing=!0,setTimeout((function(){n.setState({})}),r)),!1===e.isShow&&i&&this.focusBtClose()},n.render=function(){var e,t,n=this.props,o=n.className,r=n.style,i=n.isShow,s=n.isWithButton,a=n.caption,l=n.captionStyle,c=n.children,d=n.onClose;return this.wasClosing?(t=te.HIDE,this.wasClosing=!1):(e=i?J+" "+o+" "+Q:J+" "+o+" "+ee,t=i?te.SHOW:te.HIDE_POPUP),(0,O.jsxs)("div",{role:"dialog",className:e,style:(0,E.Z)({},r,t),onClick:this._hClickDialog,children:[(0,O.jsx)(H,{rootStyle:l,caption:a,onClose:d}),(0,O.jsx)("div",{children:c}),s&&this._renderCommandButton()]})},t}(w.Component);ne.defaultProps={className:"",isWithButton:!0,isNotUpdate:!1,isFocusClose:!0,timeout:450};const oe=ne;var re="d-notif__row",ie="d-notif__caption",se="d-notif__descr",ae=function(e){var t=e.isShow,n=e.data,o=void 0===n?{}:n,r=e.TS,i=e.onClose,s=o.caption,a=void 0===s?"":s,l=o.descr,c=void 0===l?"":l;return(0,O.jsxs)(oe,{style:r.DIALOG,caption:"Notification",isShow:t,onClose:i,children:[a&&(0,O.jsx)("div",{className:re,children:(0,O.jsx)("p",{className:ie,children:a})}),(0,O.jsx)("div",{className:re,children:(0,O.jsx)("p",{className:se,children:c})})]})},le=function(e,t){return e.isShow===t.isShow};const ce=(0,w.memo)(ae,le);const de=(0,w.createContext)();const ue=function(e){return(0,w.useContext)(de).createStyle(e)};var pe={themeName:void 0,style:void 0,createStyle:function(e){return{DIALOG:(0,E.Z)({},e.BG),SELECT:{MODAL_PANE:(0,E.Z)({},e.BG)}}}};const he=pe;var fe={app:function(e){return e.app||{}},currentBoard:function(e){return fe.app(e).boardId},boardIds:function(e){return fe.app(e).boardIds||[]},uiTheme:function(e){return fe.app(e).uiTheme}},me={msg:function(e){return e.drawerMsg||[]}},ve={boards:function(e){return e.boards||{}},currentBoard:function(e){return ve.boards(e)[fe.currentBoard(e)]||{}},board:function(e,t){return ve.boards(e)[t]||{}},columnIds:function(e,t){return ve.board(e,t).columnIds||[]},boardIds:function(e){return fe.boardIds(e)}},ge=function(e){return e.noteLabels||{}},xe={columns:function(e){return e.columns||{}},column:function(e,t){return xe.columns(e)[t]||{}},noteIds:function(e,t){return xe.column(e,t).noteIds||[]}};const _e={app:fe,drawer:me,board:ve,note:{notes:function(e){return e.notes||{}}},column:xe};const Ce=function(){return(0,O.jsx)("svg",{viewBox:"0 0 24 24",className:"m-select__svg-arrow",children:(0,O.jsx)("path",{d:"M7 10l5 5 5-5z"})})};var be=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this)._isEventTargetOutside=function(e){return t.rootNode&&t.rootNode.contains&&!t.rootNode.contains(e.target)},t._hClickOutside=function(e){var n=t.props.onClose;t._isEventTargetOutside(e)&&(e.stopPropagation(),n(e))},t._addOutsideListener=function(){document.addEventListener("click",t._hClickOutside,!0)},t._removeOutsideListener=function(){document.removeEventListener("click",t._hClickOutside,!0)},t._initShowMode=function(){t._addOutsideListener(),t.rootNode&&t.rootNode.focus()},t._hKeyDown=function(e){"Escape"===e.key&&(e.preventDefault(),t.props.onClose(e))},t._refRootNode=function(e){return t.rootNode=e},t}(0,T.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.isShow&&this._initShowMode()},n.componentWillUnmount=function(){this._removeOutsideListener()},n.componentDidUpdate=function(e){this.props!==e&&(this.props.isShow?this._initShowMode():this._removeOutsideListener())},n.render=function(){var e=this.props,t=e.className,n=e.style,o=e.children;return(0,O.jsx)("div",{ref:this._refRootNode,className:t,style:n,tabIndex:"0",onKeyDown:this._hKeyDown,children:o})},t}(w.Component);be.defaultProps={onClose:function(){}};const ye=be;var Ne={display:"block"},je={display:"none"};const Ie=function(e){var t=e.isShow,n=e.className,o=e.style,r=e.children,i=M(n,[t,"show-popup"]),s=F(o,t?Ne:je);return(0,O.jsx)("div",{className:i,style:s,children:r})};var Se={PANE:{position:"absolute",top:12,zIndex:20,width:"100%",paddingTop:12,paddingBottom:12,lineHeight:1.8,backgroundColor:"rgb(77, 77, 77)",borderRadius:2,boxShadow:"rgba(0, 0, 0, 0.3) 0px 2px 2px 0px, rgba(0, 0, 0, 0.1) 0px 0px 0px 1px"},ITEM:{lineHeight:2.2,paddingLeft:12},ITEM_CURRENT:{color:"greenyellow"}},De=function(e,t,n,o,r){return e.map((function(e){var r,i=e.value===t.value?(0,E.Z)({},Se.ITEM,Se.ITEM_CURRENT):Se.ITEM,s=o.bind(null,e),a=(r=s,function(e){13===e.which&&r(e)});return(0,O.jsx)("div",{role:"button",tabIndex:"0",style:i,className:n,onClick:s,onKeyPress:a,children:e.caption},e.value)}))};const we=function(e){var t=e.isShow,n=e.options,o=e.item,r=e.rootStyle,i=e.clItem,s=e.onSelect,a=e.onClose;return(0,O.jsx)(ye,{style:r,isShow:t,onClose:a,children:(0,O.jsx)(Ie,{isShow:t,style:(0,E.Z)({},Se.PANE,r),children:De(n,o,i,s)})})};var Ee="m-select",Te="m-select__label",Ae="m-select__div",Re="m-select__div__value",Me="m-select__div__bt",Oe="m-select__line",Be=function(e){function t(t){var n;return(n=e.call(this)||this)._handleOpen=function(){n.setState({isShow:!0})},n._handleClose=function(){n.setState({isShow:!1})},n._handleSelect=function(e,t){t.stopPropagation(),n.props.onSelect(e),n.setState({isShow:!1,item:e})},n.state={isShow:!1,item:t.initItem},n}return(0,T.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.caption,n=e.options,o=e.styleConfig,r=void 0===o?{}:o,i=this.state,s=i.isShow,a=i.item;return(0,O.jsxs)("div",{className:Ee,style:r.ROOT,onClick:this._handleOpen,children:[(0,O.jsx)(we,{rootStyle:r.MODAL_PANE,isShow:s,item:a,options:n,clItem:r.CL_ITEM,onSelect:this._handleSelect,onClose:this._handleClose}),(0,O.jsx)("label",{className:Te,children:t}),(0,O.jsxs)("div",{className:Ae,children:[(0,O.jsx)("div",{className:Re,children:a.caption}),(0,O.jsx)("button",{className:Me,tabIndex:"0",children:(0,O.jsx)("div",{children:(0,O.jsx)(Ce,{})})}),(0,O.jsx)("div",{className:Oe})]})]})},t}(w.Component);Be.defaultProps={initItem:{caption:"",value:""}};const ke=Be;var Le={caption:"Dark",value:"DARK"},Pe=[{caption:"Dark",value:"DARK"},{caption:"Light",value:"WHITE"},{caption:"Sand",value:"SAND"}],He=function(e){var t=e.isShow,n=e.store,o=e.dispatch,r=e.onClose,i=(0,w.useState)((function(){return function(e){if(!e)return Le;var t=Pe.find((function(t){return t.value===e}));return t?(0,E.Z)({},t):Le}(fe.uiTheme(n.getState()))})),s=i[0],a=i[1],l=ue(he),c=(0,w.useCallback)((function(e){var t=e.value;t!==s&&(o(_({uiTheme:t})),a(t))}),[]);return(0,O.jsx)(oe,{className:"md-settings",style:l.DIALOG,caption:"User Settings",isShow:t,onClose:r,children:(0,O.jsx)("div",{children:(0,O.jsx)(ke,{styleConfig:l.SELECT,caption:"UI Theme (Default: Dark)",initItem:s,options:Pe,onSelect:c})})})},Ge=function(e,t){return e.isShow===t.isShow};const Ze=(0,w.memo)(He,Ge);var Fe={listStyle:"outside none none",marginTop:4,marginLeft:12,marginRight:5,marginBottom:8,textAlign:"left"},Ue={width:"100%",height:"100%"},Ke={display:"block",width:"100%",height:"100%"},We={display:"none"},Xe=function(e,t,n){return e.map((function(e,o){return(0,w.cloneElement)(e,{key:o,id:o,onClick:function(){return n(o)},isSelected:o===t})}))},Ve=function(e,t){return e.map((function(e,n){var o=n===t,r=o?Ke:We;return(0,O.jsx)("div",{style:r,role:"tabpanel",id:"tabpanel-"+n,"aria-labelledby":"tab-"+n,children:(0,w.cloneElement)(e.props.children,{key:"comp"+n,isSelected:o})},"a"+n)}))};const ze=(0,w.forwardRef)((function(e,t){var n=e.width,o=e.height,r=e.tabsStyle,i=e.children,s=(0,w.useState)(0),a=s[0],l=s[1];return(0,w.useImperativeHandle)(t,(function(){return{getSelectedTabIndex:function(){return a}}}),[a]),(0,O.jsxs)("div",{style:{width:n,height:o},children:[(0,O.jsx)("ul",{style:(0,E.Z)({},Fe,r),children:Xe(i,a,l)}),(0,O.jsx)("div",{style:Ue,children:Ve(i,a)})]})}));const Ye=function(e){var t=e.id,n=e.title,o=e.isSelected,r=e.onClick,i=M("tab not-selected",[o,"tab--selected"]),s=function(){o||r()};return(0,O.jsx)("li",{role:"tab",tabIndex:0,className:i,id:"tab-"+t,"aria-selected":o,"aria-controls":"tabpanel-"+t,onClick:s,onKeyDown:function(e){(function(e){return""===e.key||32===e.keyCode})(e)&&s()},children:(0,O.jsx)("span",{children:n})})};var $e=(0,i.oM)({name:"notes",initialState:{},reducers:{addNote:function(e,t){var n=t.payload.noteId;e[n]=function(e){return{id:e,title:"New Note"}}(n)},deleteNote:function(e,t){delete e[t.payload.noteId]},editNoteTitle:function(e,t){var n=t.payload,o=n.noteId,r=n.title;e[o].title=r},editNoteDescr:function(e,t){var n=t.payload,o=n.noteId,r=n.descr;e[o].descr=r},editNoteLabels:function(e,t){var n=t.payload,o=n.noteId,r=n.labelsTo;e[o].labels=r}}}),Je=$e.reducer,qe=$e.actions,Qe=qe.editNoteTitle,et=qe.editNoteDescr;const tt=Je;const nt=function(e){return"Delete"===e.key||46===e.keyCode};var ot=function(e){function t(t){var n;return(n=e.call(this,t)||this)._hChange=function(e){n.setState({value:e.target.value})},n._hKeyDown=function(e){nt(e)&&n.setState({value:""})},n._refInputNode=function(e){return n._inputNode=e},n.state={value:t.initValue},n}(0,T.Z)(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.className,n=e.style,o=e.maxLength,r=this.state.value;return(0,O.jsx)("textarea",{ref:this._refInputNode,className:t,style:n,value:r,maxLength:o,onChange:this._hChange,onKeyDown:this._hKeyDown})},n.getValue=function(){return this.state.value},n.focus=function(){this._inputNode&&this._inputNode.focus&&this._inputNode.focus()},t}(w.Component);ot.defaultProps={initValue:""};const rt=ot;const it=function(e){var t=e.refBtClose,n=e.className,o=e.onSave,r=e.onClose;return(0,O.jsxs)("div",{className:n,children:[(0,O.jsx)($,{caption:"Save",timeout:100,onClick:o}),(0,O.jsx)($,{ref:t,caption:"Close",timeout:0,onClick:r})]})};const st=function(e){return"object"!=typeof e||null==e?"This note is not exist.":e.descr||"Edit description..."};var at="md-details__descr",lt="md__actions";const ct=function(e){var t=e.isSelected,n=e.note,o=e.dispatch,r=e.onClose,i=n.id,s=(0,w.useRef)(null),a=(0,w.useRef)(null),l=(0,w.useCallback)((function(){o(et({noteId:i,descr:a.current.getValue()}))}),[i]);(0,w.useEffect)((function(){var e=s.current;t&&e&&e.focus()}),[e]);var c=st(n);return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(rt,{ref:a,className:at,maxLength:250,initValue:c},i),(0,O.jsx)(it,{refBtClose:s,className:lt,onSave:l,onClose:r})]})};var dt=(0,i.PH)("notes/addNote"),ut=(0,i.PH)("notes/deleteNote"),pt=(0,i.PH)("notes/moveNote"),ht=(0,i.PH)("notes/editNoteLabels");const ft=function(e){var t=e.className,n=e.clClose,o=e.item,r=e.onRemove;return(0,O.jsxs)("button",{className:t,style:{backgroundColor:o.color},onClick:r,children:[o.title,r&&(0,O.jsx)("span",{className:n,children:"x"})]})};const mt={HEADER:"header",LOGO:"header__logo-notes",TITLE_GAP:"header__title-gap",LOGO_BOARD:"header-board__logo_notes",HEADER_TITLE:"header__title",TITLE_BOARD:"header-board__title",CONT:"container-list",MODAL_PANE:"modal-pane",MD_ACTIONS:"md__actions",ITEM_CARD:"card",CARD_TITLE:"card__title",CARD_BT:"bt__card",NOTE_LABEL:"note__label",NOTE_LABEL_CLOSE:"note__label__close",INPUT:"input-text",BT_CIRCLE:"bt-circle",NAV_LINK:"nav-link",ML_8:"ml-8"};var vt={paddingBottom:4};const gt=function(e){var t=e.labels,n=e.onRemove;return(0,O.jsx)("div",{style:vt,children:(t||[]).map((function(e){return(0,O.jsx)(ft,{className:mt.NOTE_LABEL,clClose:mt.NOTE_LABEL_CLOSE,item:e,onRemove:n?n.bind(null,e):void 0},e.id||e.title)}))})};const xt=function(e){return"Enter"===e.key||13===e.keyCode};var _t=function(e){return{value:e.value}},Ct=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this).state=_t(t.props),t._hChange=function(e){var n=e.target.value;n.length<=t.props.maxLength&&t.setState({value:n})},t._hKeyDown=function(e){if(xt(e)){var n=document.activeElement;n&&"function"==typeof n.blur&&n.blur()}else nt(e)&&t.setState({value:""})},t}(0,T.Z)(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.className,n=e.style,o=e.onBlur,r=M(mt.INPUT,t),i=this.state.value;return(0,O.jsx)("input",{type:"text",className:r,style:n,value:i,onChange:this._hChange,onBlur:o,onKeyDown:this._hKeyDown})},n.setValue=function(e){this.setState({value:e})},t}(w.Component);Ct.defaultProps={maxLength:40};const bt=Ct;const yt=function(e){var t=e.tabIndex,n=void 0===t?"-1":t,o=e.style,r=e.color,i=e.onClick,s=e.children,a=r?{backgroundColor:r}:void 0,l=i?i.bind(null,r):void 0;return(0,O.jsx)("button",{tabIndex:n,style:(0,E.Z)({},o,a),onClick:l,children:s})};var Nt=["#8abb5d","#f7a35c","#795548","#f45b5b","#d2b772","#dda0dd"],jt=["#f1d600","#008b8b","#2f7ed8","#000000","#607d8b","#7092be"],It={paddingBottom:4},St={paddingLeft:56,paddingTop:4},Dt={marginRight:4,position:"relative",display:"inline-block",height:32,width:32,borderRadius:2,verticalAlign:"bottom",boxShadow:"0 2px 2px 0 rgba(0,0,0,0.3), 0 0 0 1px rgba(0,0,0,0.1)"},wt=(0,E.Z)({},Dt,{marginLeft:12,marginRight:12}),Et=function(e){var t=e.colors,n=e.onClick;return(0,O.jsx)(O.Fragment,{children:t.map((function(e){return(0,O.jsx)(yt,{color:e,style:Dt,onClick:n},e)}))})};const Tt=(0,w.forwardRef)((function(e,t){var n=e.initColor,o=void 0===n?"#2f7ed8":n,r=(0,w.useState)(o),i=r[0],s=r[1],a=(0,w.useCallback)((function(e){e&&s(e)}),[]),l=(0,w.useCallback)((function(){return s(o)}),[o]);return(0,w.useImperativeHandle)(t,(function(){return{getColor:function(){return i}}}),[i]),(0,O.jsxs)("div",{style:It,children:[(0,O.jsxs)("div",{children:[(0,O.jsx)(yt,{style:wt,color:i,onClick:l}),(0,O.jsx)(Et,{colors:Nt,onClick:a})]}),(0,O.jsx)("div",{style:St,children:(0,O.jsx)(Et,{colors:jt,onClick:a})})]})}));const At={toTitle:function(e){if("string"!=typeof e)return"";var t=e.trim();return t&&t.length>0?t[0].toUpperCase()+t.slice(1):t},addLabel:function(e,t,n){return!t||e.find((function(e){return e.title===t}))?e:e.concat({title:t,color:n})},removeLabel:function(e,t){return e.filter((function(e){return e.title!==t.title}))}};var Rt=At.toTitle,Mt=At.addLabel,Ot=At.removeLabel,Bt={LABELS:{paddingTop:4,paddingLeft:12,paddingBottom:8},BT_ADD:{marginLeft:16}};const kt=function(e){var t=e.isSelected,n=e.note,o=e.dispatch,r=e.onClose,i=n.id,s=(0,w.useState)((function(){return n.labels||[]})),a=s[0],l=s[1],c=(0,w.useRef)(null),d=(0,w.useRef)(""),u=(0,w.useRef)(null),p=(0,w.useRef)(null),h=(0,w.useCallback)((function(e){d.current=e.target.value}),[]),f=(0,w.useCallback)((function(){l((function(e){return Mt(e,Rt(d.current),p.current.getColor())}),u.current.setValue(""))}),[]),m=(0,w.useCallback)((function(e){l((function(t){return Ot(t,e)}))}),[]),v=(0,w.useCallback)((function(){o(ht({noteId:i,labels:a}))}),[i,a]);return(0,w.useEffect)((function(){var e=c.current;t&&e&&e.focus()}),[e]),(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)("div",{style:Bt.LABELS,children:[(0,O.jsx)(gt,{labels:a,onRemove:m}),(0,O.jsx)(bt,{ref:u,onBlur:h}),(0,O.jsx)($,{clCaption:mt.CARD_BT,style:Bt.BT_ADD,caption:"AddLabel",title:"Click to add a new label",timeout:400,onClick:f})]}),(0,O.jsx)(Tt,{ref:p}),(0,O.jsx)(it,{refBtClose:c,className:mt.MD_ACTIONS,onSave:v,onClose:r})]})};var Lt="md-details",Pt={CAPTION:{marginBottom:0}},Ht=function(e){var t,n,o,r=e.isShow,i=e.data,s=e.dispatch,a=e.onClose,l=ue(he),c=(t=i.title,"Details: "+(o=(n=void 0===t?"":t).substring(0,12))+(n.length>o.length?"...":""));return(0,O.jsx)(oe,{className:Lt,style:l.DIALOG,captionStyle:Pt.CAPTION,caption:c,isShow:r,withoutClose:!0,onClose:a,children:(0,O.jsxs)(ze,{width:"100%",children:[(0,O.jsx)(Ye,{title:"Descr",children:(0,O.jsx)(ct,{note:i,dispatch:s,onClose:a})}),(0,O.jsx)(Ye,{title:"Labels",children:(0,O.jsx)(kt,{note:i,dispatch:s,onClose:a})})]},i.id)})},Gt=function(e,t){return e.isShow===t.isShow};const Zt=(0,w.memo)(Ht,Gt);var Ft,Ut="NOTIF",Kt="SETTINGS",Wt="DETAILS",Xt=((Ft={DF:ce})[Ut]=ce,Ft[Kt]=Ze,Ft[Wt]=Zt,Ft);const Vt={getDialog:function(e){return Xt[e]||Xt.DF}};var zt=(0,i.oM)({name:"modal",initialState:{id:null,data:null},reducers:{showModal:function(e,t){var n=t.payload;return{id:n.id,data:n.data}}}}),Yt=zt.actions,$t=zt.reducer,Jt=Yt.showModal,qt=function(e){return Jt({id:Ut,data:e})};const Qt=$t;var en=(0,i.PH)("columns/addColumn"),tn=(0,i.PH)("columns/removeColumn"),nn=(0,i.PH)("columns/moveColumn");const on=function(e){return function(t,n){var o;return(0,E.Z)({},t,((o={})[e]=n,o))}};var rn=function(e,t){return function(n,o,r,i,s){var a=[].concat(s[e]);a.splice(r.index,1),a.splice(i.index,0,o),n[s.id]=t(s,a)}},sn=function(e,t){return function(n,o,r,i,s,a){var l=[].concat(s[e]);l.splice(r.index,1);var c=[].concat(a[e]);c.splice(i.index,0,o),n[s.id]=t(s,l),n[a.id]=t(a,c)}};const an=function(e){var t=on(e);return{idsTo:t,moveInternal:rn(e,t),moveExternal:sn(e,t)}};var ln=an("columnIds"),cn=ln.moveInternal,dn=ln.moveExternal,un=(0,i.oM)({name:"boards",initialState:m.boards,reducers:{editBoardTitle:function(e,t){var n=t.payload,o=n.boardId,r=n.title;e[o].title=r},addBoard:function(e,t){var n=t.payload.boardId;e[n]={id:n,title:"New Board",columnIds:[]}},removeBoard:function(e,t){delete e[t.payload.boardId]}},extraReducers:function(e){return e.addCase(en,(function(e,t){var n=t.payload,o=n.boardId,r=n.columnId;e[o].columnIds.push(r)})).addCase(tn,(function(e,t){var n=t.payload,o=n.boardId,r=n.columnId,i=e[o];i.columnIds=i.columnIds.filter((function(e){return e!==r}))})).addCase(nn,(function(e,t){var n=t.payload,o=n.draggableId,r=n.source,i=n.destination,s=e[r.droppableId],a=e[i.droppableId];s===a?cn(e,o,r,i,s):dn(e,o,r,i,s,a)}))}}),pn=un.actions,hn=un.reducer,fn=pn.editBoardTitle;const mn=hn;const vn=(0,i.oM)({name:"noteLabels",initialState:m.noteLabels,extraReducers:function(e){return e.addCase(ht,(function(e,t){t.payload.newLabels.forEach((function(t){e[t.id]=t}))}))}}).reducer;var gn=an("noteIds"),xn=gn.moveInternal;const _n={crColumn:function(e,t){return void 0===t&&(t=!0),{id:e,title:"New Topic",noteIds:[],withAdd:t}},moveExternal:gn.moveExternal,moveInternal:xn};var Cn=_n.crColumn,bn=_n.moveExternal,yn=_n.moveInternal,Nn=(0,i.oM)({name:"columns",initialState:m.columns,reducers:{editColumnTitle:function(e,t){var n=t.payload,o=n.columnId,r=n.title;e[o].title=r},toggleColumn:function(e,t){var n=t.payload.columnId,o=e[n];e[n].isHide=!o.isHide},addColumn:function(e,t){var n=t.payload.columnId;e[n]=Cn(n)},removeColumn:function(e,t){delete e[t.payload.columnId]}},extraReducers:function(e){e.addCase(dt,(function(e,t){var n=t.payload,o=n.columnId,r=n.noteId;e[o].noteIds.unshift(r)})).addCase(ut,(function(e,t){var n=t.payload,o=n.columnId,r=n.noteId,i=e[o];i.noteIds=i.noteIds.filter((function(e){return e!==r}))})).addCase(pt,(function(e,t){var n=t.payload,o=n.draggableId,r=n.source,i=n.destination,s=e[r.droppableId],a=e[i.droppableId];s===a?yn(e,o,r,i,s):bn(e,o,r,i,s,a)}))}}),jn=Nn.actions,In=Nn.reducer,Sn=jn.editColumnTitle,Dn=jn.toggleColumn;const wn=In;const En=(0,u.UY)({app:C,drawerMsg:D,modal:Qt,boards:mn,notes:tt,noteLabels:vn,columns:wn});const Tn=function(e){return void 0===e&&(e="a"),e+"-"+(Date.now().toString(36)+Math.random().toString(36).substr(2,9)).toUpperCase().substr(12)};const An=function(e){var t=e.getState,n=e.dispatch;return function(e){return function(o){if(o.type===p.type){if(i=t(),fe.boardIds(i).length>=d.MAX_BOARDS)return n(qt(d.N_MAX_BOARDS)),!1;var r=Tn(d.BOARDS_PREFIX);return o.payload={boardId:r},e(o),r}var i;return e(o)}}};const Rn=function(e){var t=e.getState,n=e.dispatch;return function(e){return function(o){if(o.type===en.type){if(function(e,t){return ve.columnIds(e,t).length>=d.MAX_COLUMNS}(t(),o.payload.boardId))return n(qt(d.N_MAX_COLUMNS)),!1;var r=Tn(d.COLUMNS_PREFIX);return o.payload.columnId=r,e(o),r}return e(o)}}};const Mn=function(e){var t=e.getState,n=e.dispatch;return function(e){return function(o){if(o.type===dt.type){var r=o.payload.columnId;if(function(e,t){return xe.noteIds(e,t).length>=d.MAX_NOTES}(t(),r))return n(qt(d.N_MAX_NOTES)),!1;var i=Tn(d.NOTES_PREFIX);return o.payload.noteId=i,e(o),i}return e(o)}}};const On=function(e){return Object.keys(e).map((function(t){return e[t]}))};const Bn=function(e){var t=e.getState;e.dispatch;return function(e){return function(n){if(n.type===ht.type){var o=ge(t()),r=n.payload;n.payload=(0,E.Z)({},r,function(e,t){var n=[],o=[];if(!e||"object"!=typeof e||!Array.isArray(t))return{labelsTo:n,newLabels:o};var r=On(e);return t.forEach((function(e){if(e.id)n.push(e);else{var t=r.find(function(e){return function(t){return t.title===e.title&&t.color===e.color}}(e));t?(e.id=t.id,n.push(e)):(e.id=Tn(d.NLABELS_PREFIX),n.push(e),o.push(e))}})),{labelsTo:n,newLabels:o}}(o,r.labels))}return e(n)}}};var kn=(0,i.PH)("app/saveBoard"),Ln=(0,i.PH)("app/cleanStorage");const Pn=function(e){var t=e.getState,n=e.dispatch;return function(e){return function(o){switch(o.type){case kn.type:try{return window.localStorage.setItem(d.STORAGE_KEY,JSON.stringify((0,E.Z)({},t(),{drawerMsg:[],modal:{id:null,data:null}}))),n(I({msg:d.MSG_SAVED})),!0}catch(e){return n(I({msg:d.MSG_SAVE_FAIL})),console.log(e.msg),!1}case Ln.type:try{return window.localStorage.removeItem(d.STORAGE_KEY),n(I({msg:d.MSG_CLEANED})),!0}catch(e){return n(I({msg:d.MSG_CLEAN_FAIL})),console.log(e.msg),!1}default:return e(o)}}}};var Hn=function(e){return e<10?"0"+e:""+e};const Gn=function(){return function(e){return function(t){if(t.type===I.type){var n=t.payload,o=Tn(d.DMSG_PREFIX);return n.id=o,n.msg=(r=n.msg,i=new Date,Hn(i.getHours())+":"+Hn(i.getMinutes())+" "+r),e(t),o}var r,i;return e(t)}}};var Zn=Array.isArray;const Fn=function(e){var t=e.getState;return function(e){return function(n){if(n.type===tn.type){var o=xe.noteIds(t(),n.payload.columnId);if(!Zn(o)||0!==o.length)return!1}return e(n)}}};var Un=Array.isArray;var Kn=[].concat([An,Rn,Mn,Bn,Pn,Gn,Fn,function(e){var t=e.getState;return function(e){return function(n){if(n.type===h.type){var o=ve.columnIds(t(),n.payload.boardId);if(!Un(o)||0!==o.length)return!1}return e(n)}}},function(){return function(e){return function(t){return t.type!==Qe.type||"string"==typeof(n=t.payload.title)&&n.trim()?e(t):(t.payload.title="New Note",e(t),!1);var n}}}]);const Wn=(0,i.xC)({reducer:En,preloadedState:function(){var e;try{var t=window.localStorage.getItem(d.STORAGE_KEY);t&&(e=JSON.parse(t))}catch(e){console.log(e.msg)}return e||m}(),devTools:!1,middleware:function(e){return Kn}});var Xn,Vn=n(727),zn=n(977),Yn={BG:{},ITEM:{}},$n=Object.assign,Jn=[function(e,t){document.body.style.backgroundColor=t.BG_BODY},function(e,t){$n(e.BG,{backgroundColor:t.BG})},function(e,t){$n(e.ITEM,{backgroundColor:t.BG,border:"1px solid "+t.BG})}],qn={DEFAULT:"DARK",DARK:"DARK",WHITE:"WHITE",SAND:"SAND"},Qn=((Xn={})[qn.DARK]={pallete:{BG_BODY:"#5f5f5f",BG:"#4d4d4d",BG_HEADER:"#3a6799",C_HEADER:"#8a8a8a"},clSuffix:""},Xn[qn.WHITE]={pallete:{BG_BODY:"#d2d2d2",BG:"#ebf1f5",BG_HEADER:"rgb(0, 150, 200)",C_HEADER:"#4d4d4d"},clSuffix:"--white"},Xn[qn.SAND]={pallete:{BG_BODY:"darkgrey",BG:"#e8e0cb",BG_HEADER:"rgb(0, 150, 200)",C_HEADER:"#4d4d4d"},clSuffix:"--sand"},Xn),eo={},to=function(e){var t,n=Qn[e],o=n.clSuffix,r=n.pallete;void 0===(t=o)&&(t=""),Object.keys(eo).forEach((function(e){Yn[e]=eo[e]+t})),function(e,t){Jn.forEach((function(n){return n(e,t)}))}(Yn,r)},no={themeName:qn.DEFAULT,_init:function(){this.setThemeName(qn.DEFAULT)},getThemeName:function(){return this.themeName},setThemeName:function(e){this.themeName=qn[e]||qn.DEFAULT,to(this.themeName)},createStyle:function(e){return this.themeName!==e.themeName&&(e.style=e.createStyle(Yn,this.themeName),e.themeName=this.themeName),e.style}};no._init();const oo=no;var ro=n(164);const io=function(e){if(!e||"object"!=typeof e)return!1;var t=e.destination,n=e.source;return!t||!n||t.droppableId===n.droppableId&&t.index===n.index};var so={themeName:void 0,style:void 0,createStyle:function(e){return{COMP:(0,E.Z)({},e.BG)}}};const ao=so;const lo=function(e){var t=e.className,n=e.style,o=e.children,r=ue(ao);return(0,O.jsx)("header",{className:t,style:(0,E.Z)({},n,r.COMP),children:o})};const co=function(e){var t=(0,w.useState)((function(){return!!e})),n=t[0],o=t[1];return[n,(0,w.useCallback)((function(){return o((function(e){return!e}))}),[])]};var uo="drawer-bt",po="drawer-left",ho="drawer-modal",fo={BT_DRAWER:{width:"auto",height:"auto"},DRAWER_OFF:{transform:"translateX(-264px)",pointerEvents:"none"},DRAWER_ON:{transform:"translate(0px, 0px)"},MODAL_OFF:{opacity:0,zIndex:-1,transition:"opacity 195ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"},MODAL_ON:{opacity:1,zIndex:1e3,transition:"opacity 225ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"}};const mo=function(e){var t=e.btStyle,n=e.captionComp,o=e.children,r=co(!1),i=r[0],s=r[1],a=ue(ao),l=i?fo.DRAWER_ON:fo.DRAWER_OFF,c=i?fo.MODAL_ON:fo.MODAL_OFF,d=i?s:void 0;return[(0,O.jsx)("button",{className:uo,style:(0,E.Z)({},fo.BT_DRAWER,t),"aria-label":"Open Drawer",onClick:s,children:n},"bt-drawer"),(0,O.jsx)("div",{"aria-hidden":!i,className:ho,style:c,onClick:d},"wrapper"),(0,O.jsx)("aside",{className:po,style:(0,E.Z)({},l,a.COMP),children:o},"aside")]};const vo=function(e){var t=e.className,n=void 0===t?mt.LOGO:t,o=e.style,r=e.title,i=void 0===r?"Logo of web app Notes v0.3.0":r;return(0,O.jsx)("span",{className:n,style:o,title:i,children:(0,O.jsxs)("svg",{viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:"2",strokeWidth:"2",children:[(0,O.jsx)("rect",{ry:"1.8825414",rx:"194.14471",y:"1.434558",x:"19.176462",height:"12.460618",width:"10.85316",fill:"#8ecc2d",stroke:"#8ecc2d"}),(0,O.jsx)("rect",{ry:"1.87537",rx:"204.478",y:"16.639841",x:"8.8410215",height:"13.752699",width:"18.307165",fill:"#232f3b",stroke:"#232f3b"}),(0,O.jsx)("rect",{ry:"1.87537",rx:"204.478",y:"3.4229634",x:"2.5897937",height:"10.894996",width:"10.001963",fill:"#a487d4",stroke:"#a487d4"})]})})};const go=function(e,t){return void 0===t&&(t="Notes"),null==e?t+": Not Exist":t+": "+(e.title||"")+" ("+(Array.isArray(e.columnIds)?e.columnIds.length:0)+")"};const xo=function(){var e=(0,r.v9)(_e.board.currentBoard);return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(vo,{className:mt.LOGO_BOARD},"logo"),(0,O.jsx)("span",{className:mt.HEADER_TITLE+" "+mt.TITLE_BOARD,children:go(e)})]})},_o="drawer__title",Co="drawer__list",bo="drawer__list-bt",yo="drawer__list-bt__badge";const No=function(e){var t=e.board;return(0,O.jsx)("div",{className:_o,children:go(t,"Topics")})};var jo=function(e){var t=e.isHide;return(0,O.jsx)("span",{className:yo,children:t?"H":"S"})};const Io=function(e){var t=e.topic,n=e.onClick;if(!t)return null;var o=t.isHide,r=t.title,i="Click to "+(o?"show":"hide")+" topic";return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)($,{className:bo,caption:r,title:i,timeout:0,onClick:n}),(0,O.jsx)(jo,{isHide:o})]})};var So={listStyleType:"none"},Do={position:"relative"},wo=function(){},Eo=function(e){var t=e.board,n=e.columns,o=e.toggleColumn,r=void 0===o?wo:o;return(t.columnIds||[]).map((function(e){return(0,O.jsx)("li",{style:Do,children:(0,O.jsx)(Io,{topic:n[e],onClick:function(){return r({columnId:e})}})},e)}))};const To=function(e){return(0,O.jsx)("ul",{style:So,children:Eo(e)})};var Ao="drawer__msg-ul",Ro="drawer__msg-li",Mo="drawer__msg-bt",Oo={removeDrawerMsg:S};const Bo=(0,r.$j)((function(e){return{items:me.msg(e)}}),Oo)((function(e){var t=e.items,n=e.removeDrawerMsg;return(0,O.jsx)("ul",{className:Ao,children:t.map((function(e){return(0,O.jsx)("li",{className:Ro,children:(0,O.jsx)("button",{className:Mo,onClick:function(){return n({id:e.id})},children:e.msg})},e.id)}))})}));var ko={toggleColumn:Dn};const Lo=(0,r.$j)((function(e){return{board:_e.board.currentBoard(e),columns:_e.column.columns(e)}}),ko)((function(e){var t=e.board,n=e.columns,o=e.toggleColumn;return(0,O.jsxs)("div",{className:Co,children:[(0,O.jsx)(No,{board:t}),(0,O.jsx)(To,{board:t,columns:n,toggleColumn:o}),(0,O.jsx)(Bo,{})]})}));const Po=function(){return(0,O.jsx)(mo,{captionComp:(0,O.jsx)(xo,{}),children:(0,O.jsx)(Lo,{})})};var Ho="drawer-bt",Go="drawer-span",Zo="drawer-svg",Fo="drawer",Uo="drawer-modal",Ko={BT_DRAWER:{position:"absolute",top:4,right:16},DRAWER_OFF:{transform:"translateX(264px)",pointerEvents:"none"},DRAWER_ON:{transform:"translate(0px, 0px)"},MODAL_OFF:{opacity:0,zIndex:-1,transition:"opacity 195ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"},MODAL_ON:{opacity:1,zIndex:1e3,transition:"opacity 225ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"}};const Wo=function(e){var t=e.btStyle,n=e.children,o=co(!1),r=o[0],i=o[1],s=ue(ao),a=r?Ko.DRAWER_ON:Ko.DRAWER_OFF,l=r?Ko.MODAL_ON:Ko.MODAL_OFF,c=r?i:void 0;return[(0,O.jsx)("button",{className:Ho,style:(0,E.Z)({},Ko.BT_DRAWER,t),"aria-label":"Open Drawer",onClick:i,children:(0,O.jsx)("span",{className:Go,children:(0,O.jsxs)("svg",{className:Zo,focusable:"false",viewBox:"0 0 24 24","aria-hidden":"true",children:[(0,O.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"}),(0,O.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"})]})})},"bt-drawer"),(0,O.jsx)("div",{"aria-hidden":!r,className:Uo,style:l,onClick:c},"wrapper"),(0,O.jsx)("aside",{className:Fo,style:(0,E.Z)({},a,s.COMP),children:n},"aside")]};var Xo="header__title",Vo="drawer__list",zo="drawer__list-bt",Yo={HEADER:{marginLeft:16,paddingTop:16,paddingBottom:8},UL:{listStyleType:"none"}},$o={showSettings:function(){return Jt({id:Kt})},saveBoard:kn,cleanStorage:Ln};const Jo=(0,r.$j)(null,$o)((function(e){var t=e.showSettings,n=e.saveBoard,o=e.cleanStorage;return(0,O.jsxs)("div",{className:Vo,children:[(0,O.jsx)("div",{className:Xo,style:Yo.HEADER,children:"Web App Notes v0.3.0"}),(0,O.jsxs)("ul",{style:Yo.UL,children:[(0,O.jsx)("li",{children:(0,O.jsx)($,{className:zo,caption:"User Settings",title:"Click to open user settings dialog",onClick:t})}),(0,O.jsx)("li",{children:(0,O.jsx)($,{className:zo,caption:"Save Boards",title:"Click to save boards to localStorage",onClick:n})}),(0,O.jsx)("li",{children:(0,O.jsx)($,{className:zo,caption:"Clean Storage",title:"Click to remove boards from localStorage",onClick:o})})]}),(0,O.jsx)(Bo,{})]})}));const qo=function(){return(0,O.jsx)(Wo,{children:(0,O.jsx)(Jo,{})})};const Qo=function(e){var t=e.addColumn;return(0,O.jsxs)(lo,{className:mt.HEADER,children:[(0,O.jsx)(Po,{}),(0,O.jsx)($,{caption:"Add Topic",title:"Click to add topic to board",accessKey:"a",timeout:500,onClick:t}),(0,O.jsx)("nav",{children:(0,O.jsx)(Vn.OL,{to:"/boards",className:mt.NAV_LINK+" "+mt.ML_8,children:"ToBoards"})}),(0,O.jsx)(qo,{})]})};const er=function(e){var t=e.children;return(0,O.jsx)("main",{className:mt.CONT,children:t})};const tr=function(e){return!Array.isArray(e)||0===e.length};const nr=function(e){var t=e.className,n=e.style,o=e.svgStyle,r=e.title,i=e.onClick;return(0,O.jsx)("button",{className:M("bt-svg-more",t),style:n,title:r,onClick:i,children:(0,O.jsxs)("svg",{style:o,width:"6px",height:"22px",viewBox:"0 0 6 22",preserveAspectRatio:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,O.jsx)("circle",{cx:"3",cy:"4",r:"2"}),(0,O.jsx)("circle",{cx:"3",cy:"11",r:"2"}),(0,O.jsx)("circle",{cx:"3",cy:"18",r:"2"})]})})};var or={paddingLeft:8,width:"100%",textAlign:"left"};const rr=function(e){var t=e.style,n=e.isShow,o=e.onHideTopic,r=e.onAddNote,i=e.onClose,s=ue(ao);return(0,O.jsxs)(ye,{className:mt.MODAL_PANE,style:(0,E.Z)({},t,s.COMP),isShow:n,onClose:i,children:[(0,O.jsx)($,{style:or,caption:"Hide Topic",title:"Click to hide Topic",onClick:o}),(0,O.jsx)($,{style:or,caption:"Add Note",title:"Click to add new Note",timeout:100,onClick:r})]})};var ir={themeName:void 0,style:void 0,createStyle:function(e){return{ITEM:(0,E.Z)({},e.ITEM)}}};const sr=ir;var ar={display:"none"};var lr={paddingTop:8,paddingBottom:8,lineHeight:"36px"};var cr={display:"inline-block",fontWeight:600,paddingLeft:12};const dr={Item:function(e){var t=e.isHide,n=e.children,o=ue(sr),r=F(o.ITEM,[t,ar]);return(0,O.jsx)("section",{className:mt.ITEM_CARD,style:r,children:n})},Header:function(e){var t=e.children;return(0,O.jsx)("div",{style:lr,children:t})},Title:function(e){return(0,O.jsx)(bt,(0,E.Z)({className:mt.CARD_TITLE},e))},Counter:function(e){var t=e.style,n=e.value;return(0,O.jsx)("span",{style:(0,E.Z)({},cr,t),children:n})},BtCircle:function(e){var t=e.style,n=e.caption,o=e.title,r=e.tabIndex,i=void 0===r?"-1":r,s=e.onClick;return(0,O.jsx)("button",{className:mt.BT_CIRCLE,style:t,tabIndex:i,title:o,onClick:s,children:n})}};var ur=n(366),pr=["className","style","innerRef","isDraggingOver","notDraggingStyle","children"],hr={ROOT:{minHeight:100},DRAGGING_OVER:{border:"2px dashed lightgreen"},NOT_DRAGGING_OVER:{border:"2px dashed transparent"}};const fr=function(e){var t=e.className,n=e.style,o=e.innerRef,r=e.isDraggingOver,i=e.notDraggingStyle,s=e.children,a=(0,ur.Z)(e,pr),l=function(e,t){return e?hr.DRAGGING_OVER:t||hr.NOT_DRAGGING_OVER}(r,i);return(0,O.jsx)("div",(0,E.Z)({},a,{ref:o,className:t,style:(0,E.Z)({},hr.ROOT,n,l),children:s}))};var mr=["draggableProps","innerRef","isDragging","dragHandleProps"],vr=["style"],gr=function(e,t){return function(n){var o=n.draggableProps,r=n.innerRef,i=n.isDragging,s=n.dragHandleProps,a=(0,ur.Z)(n,mr),l=t||{},c=l.dragBg,d=l.notDragBg,u=l.isDragHanlerProps,p=o.style,h=(0,ur.Z)(o,vr),f=function(e,t,n){return void 0===t&&(t="#1e90ff"),void 0===n&&(n="transparent"),{backgroundColor:e?t:n}}(i,c,d),m=u?void 0:s;return(0,O.jsx)("div",(0,E.Z)({ref:r,style:(0,E.Z)({},p,f)},h,m,{children:(0,O.jsx)(e,(0,E.Z)({dragHandleProps:u?s:void 0},a))}))}};const xr=function(e,t){return"function"==typeof e?gr(e,t):function(t){return gr(t,e)}};var _r=["isDetails"];const Cr=function(e){var t=e.isDetails,n=(0,ur.Z)(e,_r),o=M("note__handle",[t,"note__handle--open"]);return(0,O.jsx)("span",(0,E.Z)({className:o},n))};const br=function(e){return function(t){function n(){return t.apply(this,arguments)||this}return(0,T.Z)(n,t),n.prototype.render=function(){var t=this;return(0,O.jsx)(de.Consumer,{children:function(n){return(0,O.jsx)(e,(0,E.Z)({},t.props,{theme:n}))}})},n}(w.Component)};var yr={BT:{paddingLeft:8,width:"100%",textAlign:"left"}};const Nr=br((function(e){var t=e.theme,n=e.className,o=e.style,r=e.isShow,i=e.onClose,s=e.onEdit,a=e.onRemove,l=t.createStyle(ao);return(0,O.jsxs)(ye,{className:mt.MODAL_PANE+" "+(n||""),style:(0,E.Z)({},o,l.COMP),isShow:r,onClose:i,children:[(0,O.jsx)($,{style:yr.BT,caption:"Edit Details",onClick:s}),(0,O.jsx)($,{style:yr.BT,caption:"Remove Note",onClick:a})]})}));var jr="note__caption",Ir="note__bt-more",Sr="note__menu-more";const Dr=function(e){var t=e.dragHandleProps,n=e.isDetails,o=e.onClickHandle,r=e.noteTitle,i=e.onBlurTitle,s=e.isMenuMore,a=e.onClickMenuMore,l=e.onCloseMenuMore,c=e.onEditDetails,d=e.onRemoveNote;return(0,O.jsxs)("div",{children:[(0,O.jsx)(Cr,(0,E.Z)({},t,{isDetails:n,onClick:o})),(0,O.jsx)(bt,{className:jr,value:r,onBlur:i}),(0,O.jsx)(nr,{className:Ir,title:"Click to open note menu",onClick:a}),s&&(0,O.jsx)(Nr,{isShow:s,className:Sr,onClose:l,onEdit:c,onRemove:d})]})};const wr=function(e){var t=e.isShow,n=e.note,o=e.editDetails,r=st(n);return(0,O.jsx)(Ie,{className:"note__details",isShow:t,children:(0,O.jsxs)("div",{onClick:o,children:[(0,O.jsx)(gt,{labels:n.labels}),(0,O.jsx)("div",{children:r})]})})};var Er=function(e){function t(t){var n;return(n=e.call(this,t)||this)._openMenuMore=function(){n.state.isMenuMore||n.setState({isMenuMore:!0})},n._closeMenuMore=function(){n.setState({isMenuMore:!1})},n._deleteNote=function(){var e=n.props;(0,e.deleteNote)({columnId:e.columnId,noteId:e.note.id})},n._blurTitle=function(e){var t=e.target.value,o=n.props,r=o.note,i=o.editNoteTitle;t!==r.title&&i({noteId:r.id,title:t})},n._toggleDetails=function(){n.setState((function(e){return{isDetails:!e.isDetails}}))},n._editDetails=function(){var e=n.props,t=e.note;(0,e.editDetails)(t),n._closeMenuMore()},n.state=function(e){return{noteTitle:e.note.title,isMenuMore:!1,isDetails:!1}}(t),n}return(0,T.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.dragHandleProps,n=e.note,o=this.state,r=o.noteTitle,i=o.isMenuMore,s=o.isDetails;return(0,O.jsxs)("div",{className:"note",id:n.id,children:[(0,O.jsx)(Dr,{dragHandleProps:t,isDetails:s,onClickHandle:this._toggleDetails,noteTitle:r,onBlurTitle:this._blurTitle,isMenuMore:i,onClickMenuMore:this._openMenuMore,onCloseMenuMore:this._closeMenuMore,onEditDetails:this._editDetails,onRemoveNote:this._deleteNote}),(0,O.jsx)(wr,{isShow:s,note:n,editDetails:this._editDetails})]})},t}(w.Component),Tr={deleteNote:ut,editNoteTitle:Qe,editDetails:function(e){return Jt({id:Wt,data:e})}};const Ar=(0,r.$j)(null,Tr)(Er);var Rr=xr({notDragBg:"#9e9e9e",isDragHanlerProps:!0})(Ar);Rr.displayName="DnDNote";const Mr=Rr;var Or={minHeight:50},Br={border:"2px solid #9e9e9e"};const kr=function(e){var t=e.cId,n=e.noteIds,o=e.notes;return(0,O.jsx)(ro.bK,{droppableId:t,children:function(e,r){return function(e){var t=e.provided,n=e.snapshot,o=e.noteIds,r=e.notes,i=e.cId;return(0,O.jsxs)(fr,(0,E.Z)({},t.droppableProps,{innerRef:t.innerRef,isDraggingOver:n.isDraggingOver,style:Or,notDraggingStyle:Br,children:[o.map((function(e,t){return(0,O.jsx)(ro._l,{draggableId:e,index:t,children:function(t,n){return(0,O.jsx)(Mr,{draggableProps:t.draggableProps,innerRef:t.innerRef,isDragging:n.isDragging,dragHandleProps:t.dragHandleProps,note:r[e],columnId:i})}},e)})),t.placeholder]}))}({provided:e,snapshot:r,noteIds:n,notes:o,cId:t})}})};var Lr={marginRight:8},Pr={position:"absolute",width:150},Hr=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this).state={isMenuMore:!1},t._openMenuMore=function(){t.state.isMenuMore||t.setState({isMenuMore:!0})},t._closeMenuMore=function(){t.setState({isMenuMore:!1})},t._hHideTopic=function(){var e=t.props;(0,e.toggleColumn)({columnId:e.column.id})},t._hAddNewTask=function(){var e=t.props,n=e.column;(0,e.addNote)({columnId:n.id})},t._hBlurTitle=function(e){var n=t.props,o=n.column;(0,n.editColumnTitle)({columnId:o.id,title:e.target.value})},t._hRemoveColumn=function(){var e=t.props,n=e.boardId,o=e.column;(0,e.removeColumn)({boardId:n,columnId:o.id})},t}return(0,T.Z)(t,e),t.prototype.render=function(){var e=this.state.isMenuMore,t=this.props,n=t.column,o=t.notes,r=n.id,i=n.isHide,s=n.title,a=n.withAdd,l=n.noteIds;return(0,O.jsxs)(dr.Item,{isHide:i,children:[(0,O.jsxs)(dr.Header,{children:[(0,O.jsx)(nr,{style:Lr,title:"Click to open topic menu",onClick:this._openMenuMore}),e&&(0,O.jsx)(rr,{style:Pr,isShow:e,onAddNote:this._hAddNewTask,onHideTopic:this._hHideTopic,onClose:this._closeMenuMore}),(0,O.jsx)(dr.Title,{value:s,onBlur:this._hBlurTitle}),(0,O.jsx)(dr.Counter,{value:l.length}),a&&(0,O.jsx)($,{clCaption:mt.CARD_BT,caption:"AddNote",title:"Click to add a new note",timeout:1e3,onClick:this._hAddNewTask})]}),(0,O.jsx)(kr,{cId:r,noteIds:l,notes:o}),(0,O.jsx)("div",{children:tr(l)&&(0,O.jsx)($,{clCaption:mt.CARD_BT,caption:"Remove Topic",onClick:this._hRemoveColumn})})]})},t}(w.Component),Gr={editColumnTitle:Sn,removeColumn:tn,toggleColumn:Dn};const Zr=(0,r.$j)(null,Gr)(Hr);var Fr=function(e){var t=e.boardId,n=e.columnIds,o=e.columns,r=e.notes,i=e.addNote;return(n||[]).map((function(e){var n=o[e];return(0,O.jsx)(Zr,{boardId:t,column:n,notes:r,addNote:i},n.id)}))},Ur={moveNote:pt,addNote:dt,addColumn:en};const Kr=(0,r.$j)((function(e){return{board:_e.board.currentBoard(e),notes:_e.note.notes(e),columns:_e.column.columns(e)}}),Ur)((function(e){var t=e.board,n=e.notes,o=e.columns,r=e.addNote,i=e.moveNote,s=e.addColumn,a=t.id,l=t.columnIds,c=(0,w.useCallback)((function(e){io(e)||i(e)}),[]),d=(0,w.useCallback)((function(){s({boardId:a})}),[]);return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(Qo,{addColumn:d}),(0,O.jsx)(ro.Z5,{onDragEnd:c,children:(0,O.jsx)(er,{children:(0,O.jsx)(Fr,{boardId:a,columnIds:l,columns:o,notes:n,addNote:r})})})]})}));var Wr={addBoard:p};const Xr=(0,r.$j)(null,Wr)((function(e){var t=e.style,n=e.addBoard;return(0,O.jsxs)(lo,{className:mt.HEADER,style:t,children:[(0,O.jsx)(vo,{}),(0,O.jsx)("span",{className:mt.TITLE_GAP}),(0,O.jsx)("span",{className:mt.HEADER_TITLE,children:"Notes: Boards"}),(0,O.jsx)($,{caption:"Add Board",title:"Click to add new board",accessKey:"a",isEvent:!1,timeout:200,onClick:n}),(0,O.jsx)(qo,{})]})}));var Vr={TOPIC:{paddingLeft:12,lineHeight:2},COUNTER:{float:"right",paddingRight:12}};var zr=xr((function(e){var t=e.title,n=e.count;return(0,O.jsxs)("div",{style:Vr.TOPIC,children:[(0,O.jsx)("span",{children:t}),(0,O.jsx)(dr.Counter,{style:Vr.COUNTER,value:n})]})}));zr.displayName="DnDTopic";const Yr=zr;const $r=function(e){var t=e.id,n=e.columnIds,o=e.columns;return(0,O.jsx)(ro.bK,{droppableId:t,children:function(e,t){return function(e){var t=e.provided,n=e.snapshot,o=e.columnIds,r=e.columns;return(0,O.jsxs)(fr,(0,E.Z)({},t.droppableProps,{innerRef:t.innerRef,isDraggingOver:n.isDraggingOver,children:[o.map((function(e,t){return(0,O.jsx)(ro._l,{draggableId:e,index:t,children:function(t,n){return(0,O.jsx)(Yr,(0,E.Z)({draggableProps:t.draggableProps,innerRef:t.innerRef,isDragging:n.isDragging,dragHandleProps:t.dragHandleProps},{title:(o=r[e]).title,count:o.noteIds.length}));var o}},e)})),t.placeholder]}))}({provided:e,snapshot:t,columnIds:n,columns:o})}})};var Jr={LINK:{marginTop:8,marginLeft:8,marginBottom:4}},qr=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this)._hBlurTitle=function(e){var n=t.props,o=n.board;(0,n.editBoardTitle)({boardId:o.id,title:e.target.value})},t._hSetCurrent=function(){var e=t.props,n=e.board;(0,e.setBoardCurrent)({boardId:n.id})},t._hRemove=function(){var e=t.props,n=e.board;(0,e.removeBoard)({boardId:n.id})},t._hToNotes=function(){var e=t.props,n=e.board;(0,e.setCurrentBoard)({boardId:n.id})},t}return(0,T.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.id,n=e.board,o=e.columns,r=n.columnIds;return(0,O.jsxs)(dr.Item,{children:[(0,O.jsxs)(dr.Header,{children:[(0,O.jsx)(dr.Title,{value:n.title,onBlur:this._hBlurTitle}),(0,O.jsx)(dr.Counter,{value:r.length})]}),(0,O.jsx)($r,{id:t,columnIds:r,columns:o}),(0,O.jsx)(Vn.OL,{to:"/boards/"+n.id,className:mt.NAV_LINK,style:Jr.LINK,onClick:this._hToNotes,children:"ToNotes"}),(0,O.jsx)("div",{children:tr(r)&&(0,O.jsx)($,{clCaption:mt.CARD_BT,caption:"Remove Board",onClick:this._hRemove})})]})},t}(w.Component),Qr={editBoardTitle:fn,setCurrentBoard:f,removeBoard:h};const ei=(0,r.$j)((function(e,t){return{board:ve.board(e,t.id),columns:xe.columns(e)}}),Qr)(qr);const ti=(0,r.$j)((function(e){return{boardIds:ve.boardIds(e),boards:ve.boards(e)}}))((function(e){var t=e.boardIds;e.boards;return t.map((function(e){return(0,O.jsx)(ei,{id:e},e)}))}));var ni={moveColumn:nn};const oi=(0,r.$j)(null,ni)((function(e){var t=e.moveColumn,n=(0,w.useCallback)((function(e){io(e)||t(e)}),[t]);return[(0,O.jsx)(Xr,{},"header"),(0,O.jsx)(ro.Z5,{onDragEnd:n,children:(0,O.jsx)(er,{children:(0,O.jsx)(ti,{})})},"ddc")]}));var ri="modal-root",ii="modal-root show-modal",si="modal-root hide-modal",ai={SHOW:{display:"block"},HIDE:{display:"none"},HIDE_BACKGROUND:{backgroundColor:"rgba(0,0,0, 0)"}},li=function(e){function t(t){var n;return(n=e.call(this)||this)._hideModal=function(){n.wasClosing=!0,n.setState({})},n.wasClosing=!0,n}(0,T.Z)(t,e);var n=t.prototype;return n.shouldComponentUpdate=function(e,t){return!!(this.wasClosing||e.isShow||this.props.isShow)},n.componentDidUpdate=function(e,t){e.isShow&&!this.props.isShow&&setTimeout(this._hideModal,this.props.timeout)},n.render=function(){var e,t,n,o=this.props,r=o.isShow,i=o.children,s=o.onClose;return!r&&this.wasClosing?(e=ri,t=ai.HIDE,n=!0,this.wasClosing=!1):(e=r?ii:si,t=r?ai.SHOW:ai.HIDE_BACKGROUND,n=!1),(0,O.jsx)("div",{className:e,style:t,"aria-hidden":n,onClick:s,children:i})},t}(w.Component);li.defaultProps={timeout:450};const ci=li;var di=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this).state={isShow:!1,inits:{},shows:{},data:{},dialogs:[],currentDialog:null},t._onStore=function(){var e=t.props.store.getState().modal,n=void 0===e?{}:e,o=n.id,r=n.data,i=void 0===r?{}:r;o&&t.modal!==n&&(t.modal=n,t.setState((function(e){var t=e.inits,n=e.shows,r=e.data,s=e.dialogs;return t[o]?(n[o]=!0,r[o]=i,{isShow:!0,currentDialog:o,shows:n,data:r}):(s.push({type:o,comp:Vt.getDialog(o)}),t[o]=!0,n[o]=!0,r[o]=i,{isShow:!0,currentDialog:o,shows:n,data:r,dialogs:s})})))},t._hClose=function(e){t.setState((function(t){return t.shows[e]=!1,{isShow:!1,currentDialog:null,shows:t.shows}}))},t._renderDialogs=function(){var e=t.props,n=e.store,o=e.theme,r=t.state,i=r.shows,s=r.data;return r.dialogs.map((function(e){var r=e.type,a=e.comp;return(0,w.createElement)(a,{key:r,isShow:i[r],data:s[r],onClose:t._hClose.bind(null,r),store:n,dispatch:n.dispatch,TS:o.createStyle(he)})}))},t}(0,T.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.unsubscribe=this.props.store.subscribe(this._onStore)},n.componentWillUnmount=function(){this.unsubscribe()},n.shouldComponentUpdate=function(e,t){return this.state.currentDialog!==t.currentDialog},n.render=function(){var e=this.state,t=e.isShow,n=e.currentDialog;return(0,O.jsx)(ci,{isShow:t,onClose:this._hClose.bind(null,n),children:this._renderDialogs()})},t}(w.Component);const ui=br(di);const pi=function(e){var t=e.basename,n=e.store,o=(0,w.useState)(oo),i=o[0],s=o[1],a=(0,r.v9)(fe.uiTheme);return(0,w.useEffect)((function(){i.getThemeName!==a&&(i.setThemeName(a),s((0,E.Z)({},i)))}),[a]),(0,O.jsx)(w.StrictMode,{children:(0,O.jsx)(Vn.VK,{basename:t,children:(0,O.jsxs)(de.Provider,{value:i,children:[(0,O.jsx)(ui,{store:n}),(0,O.jsxs)(zn.rs,{children:[(0,O.jsx)(zn.AW,{path:"/boards/:id",component:Kr}),(0,O.jsx)(zn.AW,{path:"/boards",component:oi}),(0,O.jsx)(zn.l_,{from:"/",to:"/boards"})]})]})})})};(0,o.render)((0,O.jsx)(r.zt,{store:Wn,children:(0,O.jsx)(pi,{basename:"/notes",store:Wn})}),document.getElementById("app"))},251:(e,t,n)=>{n(418);var o=n(294),r=60103;if(t.Fragment=60107,"function"==typeof Symbol&&Symbol.for){var i=Symbol.for;r=i("react.element"),t.Fragment=i("react.fragment")}var s=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a=Object.prototype.hasOwnProperty,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var o,i={},c=null,d=null;for(o in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)a.call(t,o)&&!l.hasOwnProperty(o)&&(i[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===i[o]&&(i[o]=t[o]);return{$$typeof:r,type:e,key:c,ref:d,props:i,_owner:s.current}}t.jsx=c,t.jsxs=c},893:(e,t,n)=>{e.exports=n(251)}},e=>{var t;t=12,e(e.s=t)}]);