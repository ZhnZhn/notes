/*! For license information please see app_9605168bcb1f2bd750c3.js.LICENSE.txt */
"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([[143],{397:(e,t,s)=>{var o=s(745),l=s(7),n=s(162);const a=(e,t)=>`Max number (${t}) of ${e} reached.`,r=8,i=8,d=12,c={STORAGE_KEY:"notes-manager",DMSG_PREFIX:"m",MSG_SAVED:"Boards saved",MSG_SAVE_FAIL:"Boards not saved",MSG_CLEANED:"localStorage cleaned",MSG_CLEAN_FAIL:"localStorage not cleaned",BOARDS_PREFIX:"b",MAX_BOARDS:r,N_MAX_BOARDS:{descr:a("boards",r)},MAX_COLUMNS:i,COLUMNS_PREFIX:"c",N_MAX_COLUMNS:{descr:a("columns",i)},MAX_NOTES:d,NOTES_PREFIX:"n",N_MAX_NOTES:{descr:a("notes",d)},NLABELS_PREFIX:"nl"};var u=s(849);const m=(0,n.PH)("boards/addBoard"),p=(0,n.PH)("boards/removeBoard"),h=(0,n.PH)("boards/setCurrentBoard"),x={app:{boardId:"b-1",boardIds:["b-1"],uiTheme:"DARK"},drawerMsg:[],modal:{id:void 0,data:void 0},boards:{"b-1":{id:"b-1",title:"Board 1",columnIds:["c-1","c-2"]}},notes:{},noteLabels:{},columns:{"c-1":{id:"c-1",title:"Topic 1",noteIds:[],withAdd:!0},"c-2":{id:"c-2",title:"Topic 2",noteIds:[]}}},g=(0,n.oM)({name:"app",initialState:x.app,reducers:{setUiTheme(e,t){const{uiTheme:s}=t.payload;e.uiTheme=s}},extraReducers:e=>e.addCase(m,((e,t)=>{const{boardId:s}=t.payload;e.boardIds.push(s)})).addCase(p,((e,t)=>{const{boardId:s}=t.payload;e.boardIds=e.boardIds.filter((e=>e!==s))})).addCase(h,((e,t)=>{const{boardId:s}=t.payload;e.boardId=s}))}),{actions:b,reducer:y}=g,{setUiTheme:j}=b,C=y,v={crMsg:(e,t)=>({id:e,msg:t})},{crMsg:f}=v,N=(0,n.oM)({name:"drawerMsg",initialState:x.drawerMsg,reducers:{addDrawerMsg(e,t){const{id:s,msg:o}=t.payload;e.unshift(f(s,o))},removeDrawerMsg(e,t){const{id:s}=t.payload;return e.filter((e=>e.id!==s))}}}),{actions:I,reducer:S}=N,{addDrawerMsg:_,removeDrawerMsg:w}=I,k=S;var E=s(711),D=s(294);const R=e=>(e||{}).current,A=(e,t)=>{e&&(e.current=t)},T=e=>{const t=R(e);t&&"function"==typeof t.focus&&t.focus()},B=(e,t)=>e.isShow===t.isShow,M=e=>(0,D.memo)(e,B),O=(e=>(t,s)=>(0,D.useCallback)((s=>{e(s)&&(s.preventDefault(),s.stopPropagation(),t(s))}),s||[]))((e=>27===e.keyCode||"Escape"===e.key)),L=Array.isArray,H=e=>L(e)?e[0]?e[1]:"":e||"",P=(e,t)=>{const s=H(e),o=H(t);return s?o?`${s} ${o}`:s:o||void 0};var $=s(893);const G=e=>{let{className:t,style:s,tabIndex:o,onClose:l}=e;return(0,$.jsx)("button",{tabIndex:o,className:P("bt-svg-close",t),style:s,onClick:l,children:(0,$.jsxs)("svg",{viewBox:"0 0 12 12",width:"100%",height:"100%",preserveAspectRatio:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,$.jsx)("path",{d:"M 0,0 L 12,12"}),(0,$.jsx)("path",{d:"M 12,0 L 0,12"})]})})},F=e=>{let{rootStyle:t,svgStyle:s,caption:o,onClose:l,children:n}=e;return(0,$.jsxs)("div",{className:"dialog__header",style:t,children:[(0,$.jsx)("span",{className:"dialog__caption not-selected",children:o}),n,(0,$.jsx)(G,{className:"dialog__svg-close",onClose:l})]})},K=function(e,t,s){void 0===t&&(t=3e3),void 0===s&&(s=!0);const o=(0,D.useRef)(null);return(0,D.useCallback)((l=>{const n=s?l:void 0;if(0===t)return void e(n);const a=o.current,{timeStamp:r}=l;(null==a||r-a>t)&&(e(n),o.current=r)}),[s,t,e])},X=Array.isArray,V=e=>X(e)?e[0]?e[1]:void 0:e||void 0,U=function(){const e=V(arguments.length<=0?void 0:arguments[0]),t=V(arguments.length<=1?void 0:arguments[1]);return e?t?{...e,...t}:e:t||void 0},z={textDecoration:"underline"},W=(e,t)=>{const s=((e,t)=>e?t.toLowerCase().indexOf(e):-1)(e,t);if(-1===s)return t;const o=t.substring(0,s),l=t.substring(s,s+1),n=t.substring(s+1);return(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)("span",{children:o}),(0,$.jsx)("span",{style:z,children:l}),(0,$.jsx)("span",{children:n})]})},Y=e=>{let{className:t,caption:s,accessKey:o,children:l}=e;return s?(0,$.jsxs)("span",{className:t,children:[W(o,s),l]}):null},Z="bt-flat__div",J={color:"#607d8b"},q=(0,D.forwardRef)(((e,t)=>{let{timeout:s,className:o,style:l,clDiv:n=Z,clCaption:a,isPrimary:r,title:i="",caption:d,accessKey:c,children:u,isEvent:m,onClick:p}=e;const h=K(p,s,m),x=P("bt-flat",o),g=P("bt-flat__span",a),b=U(l,[r,J]),y=((e,t)=>t?`${e} [${t}]`:e)(i,c);return(0,$.jsx)("button",{ref:t,className:x,style:b,accessKey:c,title:y,onClick:h,children:(0,$.jsxs)("div",{className:n,children:[(0,$.jsx)(Y,{className:g,caption:d,accessKey:c}),u]})})})),Q=q,ee="header",te=`${ee}__logo-notes`,se=`${ee}__title-gap`,oe=`${ee}-board__logo_notes`,le=`${ee}__title`,ne="modal-pane",ae="md__actions",re="card",ie=`${re}__title`,de="bt__card",ce="note__label",ue=`${ce}__close`,me="nav-link",pe={display:"block"},he={display:"none"},xe=e=>{let{buttons:t,refBtClose:s,withoutClose:o,onClose:l}=e;return(0,$.jsxs)("div",{className:ae,children:[t,!o&&(0,$.jsx)(Q,{ref:s,caption:"Close",timeout:0,onClick:l})]})},ge=e=>{let{className:t="",style:s,isShow:o,isWithButton:l=!0,isFocusClose:n=!0,caption:a,captionStyle:r,children:i,commandButtons:d,withoutClose:c,onClose:u}=e;const m=((e,t)=>{const s=(0,D.useRef)(),o=(0,D.useRef)(),l=(0,D.useRef)(),n=(0,D.useCallback)((()=>{o.current=document.activeElement,t&&T(s)}),[t]),a=(0,D.useCallback)((()=>{T(o),o.current=null}),[]);return(0,D.useEffect)((()=>{const t=R(l);e&&!t?n():!e&&t&&a(),l.current=e}),[e,n,a]),s})(o,n),p=(0,D.useCallback)((e=>{e.stopPropagation()}),[]),h=O(u),x=P(`modal-dialog ${t}`,[o,"show-popup"]),g=o?pe:he;return(0,$.jsxs)("div",{role:"dialog","aria-label":a,"aria-hidden":!o,className:x,style:{...s,...g},onClick:p,onKeyDown:h,children:[(0,$.jsx)(F,{rootStyle:r,caption:a,onClose:u}),(0,$.jsx)("div",{children:i}),l&&(0,$.jsx)(xe,{buttons:d,refBtClose:m,withoutClose:c,onClose:u})]})},be="d-notif__row",ye=M((e=>{let{isShow:t,data:s,TS:o,onClose:l}=e;const{caption:n="",descr:a=""}=s||{};return(0,$.jsxs)(ge,{style:o.DIALOG,caption:"Notification",isShow:t,onClose:l,children:[n&&(0,$.jsx)("div",{className:be,children:(0,$.jsx)("p",{className:"d-notif__caption",children:n})}),(0,$.jsx)("div",{className:be,children:(0,$.jsx)("p",{className:"d-notif__descr",children:a})})]})})),je=ye,Ce=(0,D.createContext)(),ve=Ce,fe=e=>(0,D.useContext)(ve).createStyle(e),Ne={themeName:void 0,style:void 0,createStyle:e=>({DIALOG:{...e.BG},SELECT:{MODAL_PANE:{...e.BG}}})},Ie=e=>!!e,Se=(e,t)=>t,_e=e=>{const[t,s]=(0,D.useReducer)(Se,e,Ie),o=(0,D.useRef)((()=>s(!0))),l=(0,D.useRef)((()=>s(!1)));return[t,R(o),R(l)]},we="m-select",ke=`${we}__label`,Ee=`${we}__div`,De=`${we}__div__value`,Re=`${we}__div__bt`,Ae=`${we}__line`,Te=`${we}__svg-arrow`,Be=()=>(0,$.jsx)("svg",{className:Te,viewBox:"0 0 24 24",children:(0,$.jsx)("path",{d:"M7 10l5 5 5-5z"})}),Me=(e,t)=>{R(t)&&(document.removeEventListener("click",e,!0),A(t,null))},Oe=(e,t)=>{const s=(0,D.useRef)(null),o=(0,D.useRef)(null),l=(0,D.useCallback)((e=>{const o=R(s);o&&o.contains&&!o.contains(e.target)&&(e.stopPropagation(),t(e))}),[]);return(0,D.useEffect)((()=>{e&&!R(o)?(document.addEventListener("click",l,!0),A(o,!0)):e||Me(l,o)})),(0,D.useEffect)((()=>()=>Me(l,o)),[]),s},Le=e=>{let{isShow:t,className:s,style:o,children:l,onClose:n}=e;const a=Oe(t,n),r=O(n),i=t?r:void 0;return(0,$.jsx)("div",{role:"presentation",ref:a,className:s,style:o,onKeyDown:i,children:l})},He={display:"block"},Pe={display:"none"},$e=e=>{let{isShow:t,className:s,style:o,children:l}=e;const n=P(s,[t,"show-popup"]),a=U(o,t?He:Pe);return(0,$.jsx)("div",{className:n,style:a,children:l})},Ge={position:"absolute",top:12,zIndex:20,width:"100%",paddingTop:12,paddingBottom:12,lineHeight:1.8,backgroundColor:"rgb(77, 77, 77)",borderRadius:2,boxShadow:"rgba(0, 0, 0, 0.3) 0px 2px 2px 0px, rgba(0, 0, 0, 0.1) 0px 0px 0px 1px"},Fe={lineHeight:2.2,paddingLeft:12},Ke={color:"greenyellow"},Xe=(e,t,s,o,l)=>e.map((e=>{const l=U(Fe,[e.value===t.value,Ke]),n=o.bind(null,e),a=(r=n,e=>{13===e.which&&r(e)});var r;return(0,$.jsx)("div",{role:"button",tabIndex:"0",style:l,className:s,onClick:n,onKeyPress:a,children:e.caption},e.value)})),Ve=e=>{let{isShow:t,style:s,options:o,item:l,clItem:n,onSelect:a,onClose:r}=e;return(0,$.jsx)(Le,{isShow:t,style:s,onClose:r,children:(0,$.jsx)($e,{isShow:t,style:{...Ge,...s},children:Xe(o,l,n,a)})})},Ue={caption:"",value:""},ze={},We=e=>{let{initialItem:t,caption:s,options:o,styleConfig:l=ze,onSelect:n}=e;const[a,r,i]=_e(),[d,c]=(0,D.useState)(t||Ue),u=(0,D.useCallback)(((e,t)=>{t.stopPropagation(),n(e),i(),c(e)}),[n,i]);return(0,$.jsxs)("div",{role:"presentation",className:we,style:l.ROOT,onClick:r,children:[(0,$.jsx)(Ve,{style:l.MODAL_PANE,isShow:a,item:d,options:o,clItem:l.CL_ITEM,onSelect:u,onClose:i}),(0,$.jsx)("label",{className:ke,children:s}),(0,$.jsxs)("div",{className:Ee,children:[(0,$.jsx)("div",{className:De,children:d.caption}),(0,$.jsx)("button",{className:Re,tabIndex:"0",children:(0,$.jsx)(Be,{})}),(0,$.jsx)("div",{className:Ae})]})]})},Ye=[{caption:"Dark",value:"DARK"},{caption:"Light",value:"WHITE"},{caption:"Sand",value:"SAND"}],Ze=Ye[0],Je=M((e=>{let{isShow:t,dispatch:s,onClose:o}=e;const l=(0,D.useCallback)((e=>{let{value:t}=e;s(j({uiTheme:t}))}),[]),n=fe(Ne);return(0,$.jsx)(ge,{isShow:t,className:"md-settings",style:n.DIALOG,caption:"User Settings",onClose:o,children:(0,$.jsx)(We,{styleConfig:n.SELECT,caption:"UI Theme (Default: Dark)",initialItem:Ze,options:Ye,onSelect:l})})})),qe={listStyle:"outside none none",marginTop:4,marginLeft:12,marginRight:5,marginBottom:8,textAlign:"left"},Qe={width:"100%",height:"100%"},et={display:"block",width:"100%",height:"100%"},tt={display:"none"},st=(e,t,s)=>e.map(((e,o)=>(0,D.cloneElement)(e,{key:o,id:o,onClick:()=>s(o),isSelected:o===t}))),ot=(e,t)=>e.map(((e,s)=>{const o=s===t,l=o?et:tt;return(0,$.jsx)("div",{style:l,role:"tabpanel",id:`tabpanel-${s}`,"aria-labelledby":`tab-${s}`,children:(0,D.cloneElement)(e.props.children,{key:"comp"+s,isSelected:o})},"a"+s)})),lt=(0,D.forwardRef)(((e,t)=>{let{width:s,height:o,tabsStyle:l,children:n}=e;const[a,r]=(0,D.useState)(0);return(0,D.useImperativeHandle)(t,(()=>({getSelectedTabIndex:()=>a})),[a]),(0,$.jsxs)("div",{style:{width:s,height:o},children:[(0,$.jsx)("ul",{style:{...qe,...l},children:st(n,a,r)}),(0,$.jsx)("div",{style:Qe,children:ot(n,a)})]})})),nt=e=>{let{id:t,title:s,isSelected:o,onClick:l}=e;const n=P("tab not-selected",[o,"tab--selected"]),a=()=>{o||l()};return(0,$.jsx)("li",{role:"tab",tabIndex:0,className:n,id:`tab-${t}`,"aria-selected":o,"aria-controls":`tabpanel-${t}`,onClick:a,onKeyDown:e=>{(e=>""===e.key||32===e.keyCode)(e)&&a()},children:(0,$.jsx)("span",{children:s})})},at=(e,t,s)=>(0,D.useEffect)((()=>{const e=R(e);t&&e&&e.focus()}),[s]),rt=(0,n.oM)({name:"notes",initialState:{},reducers:{addNote(e,t){const{noteId:s}=t.payload;e[s]=(e=>({id:e,title:"New Note"}))(s)},deleteNote(e,t){const{noteId:s}=t.payload;delete e[s]},editNoteTitle(e,t){const{noteId:s,title:o}=t.payload;e[s].title=o},editNoteDescr(e,t){const{noteId:s,descr:o}=t.payload;e[s].descr=o},editNoteLabels(e,t){const{noteId:s,labelsTo:o}=t.payload;e[s].labels=o}}}),{reducer:it,actions:dt}=rt,{editNoteTitle:ct,editNoteDescr:ut}=dt,mt=it,pt=e=>"Delete"===e.key||46===e.keyCode,ht=(0,D.forwardRef)(((e,t)=>{let{className:s,style:o,initialValue:l,maxLength:n}=e;const a=(0,D.useRef)(),[r,i]=(0,D.useState)(l),d=(0,D.useCallback)((e=>{i(e.target.value)}),[]),c=(0,D.useCallback)((e=>{pt(e)&&i("")}));return(0,D.useImperativeHandle)(t,(()=>({getValue:()=>r,focus:()=>{const e=R(a);e&&e.focus()}})),[r]),(0,$.jsx)("textarea",{ref:a,className:s,style:o,value:r,maxLength:n,onChange:d,onKeyDown:c})})),xt=e=>{let{refBtClose:t,className:s,onSave:o,onClose:l}=e;return(0,$.jsxs)("div",{className:s,children:[(0,$.jsx)(Q,{caption:"Save",timeout:100,onClick:o}),(0,$.jsx)(Q,{ref:t,caption:"Close",timeout:0,onClick:l})]})},gt=e=>"object"!=typeof e||null==e?"This note is not exist.":e.descr||"Edit description...",bt=e=>{const{isSelected:t,note:s,dispatch:o,onClose:l}=e,{id:n}=s,a=(0,D.useRef)(null),r=(0,D.useRef)(null),i=(0,D.useCallback)((()=>{o(ut({noteId:n,descr:R(r).getValue()}))}),[n]);at(a,t,e);const d=gt(s);return(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(ht,{ref:r,className:"md-details__descr",maxLength:250,initialValue:d},n),(0,$.jsx)(xt,{refBtClose:a,className:"md__actions",onSave:i,onClose:l})]})},yt=(0,n.PH)("notes/addNote"),jt=(0,n.PH)("notes/deleteNote"),Ct=(0,n.PH)("notes/moveNote"),vt=(0,n.PH)("notes/editNoteLabels"),ft=e=>{let{className:t,clClose:s,item:o,onRemove:l}=e;return(0,$.jsxs)("button",{className:t,style:{backgroundColor:o.color},onClick:l,children:[o.title,l&&(0,$.jsx)("span",{className:s,children:"x"})]})},Nt={paddingBottom:4},It=e=>{let{labels:t,onRemove:s}=e;return(0,$.jsx)("div",{style:Nt,children:(t||[]).map((e=>(0,$.jsx)(ft,{className:ce,clClose:ue,item:e,onRemove:s?s.bind(null,e):void 0},e.id||e.title)))})},St=e=>"Enter"===e.key||13===e.keyCode,_t=(0,D.forwardRef)(((e,t)=>{let{className:s,style:o,initialValue:l,maxLength:n=40,onBlur:a}=e;const[r,i]=(0,D.useState)(l),d=(0,D.useCallback)((e=>{const{value:t}=e.target;t.length<=n&&i(t)}),[n]),c=(0,D.useCallback)((e=>{if(St(e)){const e=document.activeElement;e&&"function"==typeof e.blur&&e.blur()}else pt(e)&&i("")}),[]);(0,D.useImperativeHandle)(t,(()=>({setValue:e=>{e.length<=n&&i(e)}})),[n]);const u=P("input-text",s);return(0,$.jsx)("input",{type:"text",className:u,style:o,value:r,onChange:d,onBlur:a,onKeyDown:c})})),wt=()=>{},kt=e=>{let{tabIndex:t="-1",style:s,color:o,onClick:l=wt,children:n}=e;const a=o?{backgroundColor:o}:void 0;return(0,$.jsx)("button",{tabIndex:t,style:{...s,...a},onClick:()=>l(o),children:n})},Et="#2f7ed8",Dt=["#8abb5d","#f7a35c","#795548","#f45b5b","#d2b772","#dda0dd"],Rt=["#f1d600","#008b8b","#2f7ed8","#000000","#607d8b","#7092be"],At={paddingBottom:4},Tt={padding:"4px 0 0 56px"},Bt={position:"relative",display:"inline-block",height:32,width:32,marginRight:4,borderRadius:2,verticalAlign:"bottom",boxShadow:"0 2px 2px 0 rgba(0,0,0,0.3), 0 0 0 1px rgba(0,0,0,0.1)"},Mt={...Bt,margin:"0 12px"},Ot=e=>{let{colors:t,onClick:s}=e;return(0,$.jsx)($.Fragment,{children:t.map((e=>(0,$.jsx)(kt,{color:e,style:Bt,onClick:s},e)))})},Lt=(0,D.forwardRef)(((e,t)=>{let{initColor:s=Et}=e;const[o,l]=(0,D.useState)(s),n=(0,D.useCallback)((e=>{e&&l(e)}),[]),a=(0,D.useCallback)((()=>l(s)),[s]);return(0,D.useImperativeHandle)(t,(()=>({getColor:()=>o})),[o]),(0,$.jsxs)("div",{style:At,children:[(0,$.jsxs)("div",{children:[(0,$.jsx)(kt,{style:Mt,color:o,onClick:a}),(0,$.jsx)(Ot,{colors:Dt,onClick:n})]}),(0,$.jsx)("div",{style:Tt,children:(0,$.jsx)(Ot,{colors:Rt,onClick:n})})]})})),Ht={padding:"4px 0 8px 12px"},Pt={marginLeft:16},$t=e=>{const{isSelected:t,note:s,dispatch:o,onClose:l}=e,{id:n}=s,[a,r]=(0,D.useState)((()=>s.labels||[])),i=(0,D.useRef)(null),d=(0,D.useRef)(""),c=(0,D.useRef)(null),u=(0,D.useRef)(null),m=(0,D.useCallback)((e=>{d.current=e.target.value}),[]),p=(0,D.useCallback)((()=>{r((e=>((e,t,s)=>!t||e.find((e=>e.title===t))?e:e.concat({title:t,color:s}))(e,(e=>{if("string"!=typeof e)return"";const t=e.trim();return t&&t.length>0?t[0].toUpperCase()+t.slice(1):t})(R(d)),R(u).getColor())),R(c).setValue(""))}),[]),h=(0,D.useCallback)((e=>{r((t=>((e,t)=>e.filter((e=>e.title!==t.title)))(t,e)))}),[]),x=(0,D.useCallback)((()=>{o(vt({noteId:n,labels:a}))}),[n,a]);return at(i,t,e),(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)("div",{style:Ht,children:[(0,$.jsx)(It,{labels:a,onRemove:h}),(0,$.jsx)(_t,{ref:c,onBlur:m}),(0,$.jsx)(Q,{clCaption:de,style:Pt,caption:"AddLabel",title:"Click to add a new label",timeout:400,onClick:p})]}),(0,$.jsx)(Lt,{ref:u}),(0,$.jsx)(xt,{refBtClose:i,className:ae,onSave:x,onClose:l})]})},Gt={marginBottom:0},Ft=M((e=>{let{isShow:t,data:s,dispatch:o,onClose:l}=e;const n=fe(Ne),a=(e=>{const{title:t=""}=e,s=t.substring(0,12);return`Details: ${s}${t.length>s.length?"...":""}`})(s);return(0,$.jsx)(ge,{className:"md-details",style:n.DIALOG,captionStyle:Gt,caption:a,isShow:t,withoutClose:!0,onClose:l,children:(0,$.jsxs)(lt,{width:"100%",children:[(0,$.jsx)(nt,{title:"Descr",children:(0,$.jsx)(bt,{note:s,dispatch:o,onClose:l})}),(0,$.jsx)(nt,{title:"Labels",children:(0,$.jsx)($t,{note:s,dispatch:o,onClose:l})})]},s.id)})})),Kt="NOTIF",Xt="SETTINGS",Vt="DETAILS",Ut={DF:je,[Kt]:je,[Xt]:Je,[Vt]:Ft},zt={getDialog:e=>Ut[e]||Ut.DF},Wt=(0,n.oM)({name:"modal",initialState:{id:null,data:null},reducers:{showModal(e,t){const{id:s,data:o}=t.payload;return{id:s,data:o}}}}),{actions:Yt,reducer:Zt}=Wt,{showModal:Jt}=Yt,qt=e=>Jt({id:Kt,data:e}),Qt=Zt,es=(0,n.PH)("columns/addColumn"),ts=(0,n.PH)("columns/removeColumn"),ss=(0,n.PH)("columns/moveColumn"),os=e=>(t,s)=>({...t,[e]:s}),ls=(e,t)=>(s,o,l,n,a)=>{const r=[...a[e]];r.splice(l.index,1),r.splice(n.index,0,o),s[a.id]=t(a,r)},ns=(e,t)=>(s,o,l,n,a,r)=>{const i=[...a[e]];i.splice(l.index,1);const d=[...r[e]];d.splice(n.index,0,o),s[a.id]=t(a,i),s[r.id]=t(r,d)},as=e=>{const t=os(e);return{idsTo:t,moveInternal:ls(e,t),moveExternal:ns(e,t)}},{moveInternal:rs,moveExternal:is}=as("columnIds"),ds=(0,n.oM)({name:"boards",initialState:x.boards,reducers:{editBoardTitle(e,t){const{boardId:s,title:o}=t.payload;e[s].title=o},addBoard(e,t){const{boardId:s}=t.payload;e[s]={id:s,title:"New Board",columnIds:[]}},removeBoard(e,t){const{boardId:s}=t.payload;delete e[s]}},extraReducers:e=>e.addCase(es,((e,t)=>{const{boardId:s,columnId:o}=t.payload;e[s].columnIds.push(o)})).addCase(ts,((e,t)=>{const{boardId:s,columnId:o}=t.payload,l=e[s];l.columnIds=l.columnIds.filter((e=>e!==o))})).addCase(ss,((e,t)=>{const{draggableId:s,source:o,destination:l}=t.payload,n=e[o.droppableId],a=e[l.droppableId];n===a?rs(e,s,o,l,n):is(e,s,o,l,n,a)}))}),{actions:cs,reducer:us}=ds,{editBoardTitle:ms}=cs,ps=us,hs=(0,n.oM)({name:"noteLabels",initialState:x.noteLabels,extraReducers:e=>e.addCase(vt,((e,t)=>{const{newLabels:s}=t.payload;s.forEach((t=>{e[t.id]=t}))}))}),{reducer:xs}=hs,gs=xs,{moveInternal:bs,moveExternal:ys}=as("noteIds"),js={crColumn:function(e,t){return void 0===t&&(t=!0),{id:e,title:"New Topic",noteIds:[],withAdd:t}},moveExternal:ys,moveInternal:bs},{crColumn:Cs,moveExternal:vs,moveInternal:fs}=js,Ns=(0,n.oM)({name:"columns",initialState:x.columns,reducers:{editColumnTitle(e,t){const{columnId:s,title:o}=t.payload;e[s].title=o},toggleColumn(e,t){const{columnId:s}=t.payload,o=e[s];e[s].isHide=!o.isHide},addColumn(e,t){const{columnId:s}=t.payload;e[s]=Cs(s)},removeColumn(e,t){const{columnId:s}=t.payload;delete e[s]}},extraReducers:e=>{e.addCase(yt,((e,t)=>{const{columnId:s,noteId:o}=t.payload;e[s].noteIds.unshift(o)})).addCase(jt,((e,t)=>{const{columnId:s,noteId:o}=t.payload,l=e[s];l.noteIds=l.noteIds.filter((e=>e!==o))})).addCase(Ct,((e,t)=>{const{draggableId:s,source:o,destination:l}=t.payload,n=e[o.droppableId],a=e[l.droppableId];n===a?fs(e,s,o,l,n):vs(e,s,o,l,n,a)}))}}),{actions:Is,reducer:Ss}=Ns,{editColumnTitle:_s,toggleColumn:ws}=Is,ks=Ss,Es=(0,u.UY)({app:C,drawerMsg:k,modal:Qt,boards:ps,notes:mt,noteLabels:gs,columns:ks}),Ds=function(e){void 0===e&&(e="a");return`${e}-${(Date.now().toString(36)+Math.random().toString(36).substr(2,9)).toUpperCase().substr(12)}`},Rs={app:e=>e.app||{},modal:e=>e.modal||{},currentBoard:e=>Rs.app(e).boardId,boardIds:e=>Rs.app(e).boardIds||[],uiTheme:e=>Rs.app(e).uiTheme},As={msg:e=>e.drawerMsg||[]},Ts={boards:e=>e.boards||{},currentBoard:e=>Ts.boards(e)[Rs.currentBoard(e)]||{},board:(e,t)=>Ts.boards(e)[t]||{},columnIds:(e,t)=>Ts.board(e,t).columnIds||[],boardIds:e=>Rs.boardIds(e)},Bs=e=>e.noteLabels||{},Ms={columns:e=>e.columns||{},column:(e,t)=>Ms.columns(e)[t]||{},noteIds:(e,t)=>Ms.column(e,t).noteIds||[]},Os={app:Rs,drawer:As,board:Ts,note:{notes:e=>e.notes||{}},column:Ms},Ls=e=>{let{getState:t,dispatch:s}=e;return e=>o=>{if(o.type===m.type){if(l=t(),Rs.boardIds(l).length>=c.MAX_BOARDS)return s(qt(c.N_MAX_BOARDS)),!1;const n=Ds(c.BOARDS_PREFIX);return o.payload={boardId:n},e(o),n}var l;return e(o)}},Hs=e=>{let{getState:t,dispatch:s}=e;return e=>o=>{if(o.type===es.type){if(((e,t)=>Ts.columnIds(e,t).length>=c.MAX_COLUMNS)(t(),o.payload.boardId))return s(qt(c.N_MAX_COLUMNS)),!1;const l=Ds(c.COLUMNS_PREFIX);return o.payload.columnId=l,e(o),l}return e(o)}},Ps=e=>{let{getState:t,dispatch:s}=e;return e=>o=>{if(o.type===yt.type){const{columnId:l}=o.payload;if(((e,t)=>Ms.noteIds(e,t).length>=c.MAX_NOTES)(t(),l))return s(qt(c.N_MAX_NOTES)),!1;const n=Ds(c.NOTES_PREFIX);return o.payload.noteId=n,e(o),n}return e(o)}},$s=Object.keys,Gs=e=>$s(e).map((t=>e[t])),Fs=Array.isArray,Ks=(e,t)=>{const s=[],o=[];if(!(l=e,l&&"object"==typeof l&&Fs(t)))return{labelsTo:s,newLabels:o};var l;const n=Gs(e);return t.forEach((e=>{if(e.id)s.push(e);else{const t=n.find((e=>t=>t.title===e.title&&t.color===e.color)(e));t?(e.id=t.id,s.push(e)):(e.id=Ds(c.NLABELS_PREFIX),s.push(e),o.push(e))}})),{labelsTo:s,newLabels:o}},Xs=e=>{let{getState:t,dispatch:s}=e;return e=>s=>{if(s.type===vt.type){const e=Bs(t()),{payload:o}=s;s.payload={...o,...Ks(e,o.labels)}}return e(s)}},Vs=(0,n.PH)("app/saveBoard"),Us=(0,n.PH)("app/cleanStorage"),zs=e=>{let{getState:t,dispatch:s}=e;return e=>o=>{switch(o.type){case Vs.type:try{return window.localStorage.setItem(c.STORAGE_KEY,JSON.stringify({...t(),drawerMsg:[],modal:{id:null,data:null}})),s(_({msg:c.MSG_SAVED})),!0}catch(e){return s(_({msg:c.MSG_SAVE_FAIL})),console.log(e.msg),!1}case Us.type:try{return window.localStorage.removeItem(c.STORAGE_KEY),s(_({msg:c.MSG_CLEANED})),!0}catch(e){return s(_({msg:c.MSG_CLEAN_FAIL})),console.log(e.msg),!1}default:return e(o)}}},Ws=e=>e<10?`0${e}`:`${e}`,Ys=()=>e=>t=>{if(t.type===_.type){const{payload:s}=t,o=Ds(c.DMSG_PREFIX);return s.id=o,s.msg=(e=>{const t=new Date;return`${Ws(t.getHours())}:${Ws(t.getMinutes())} ${e}`})(s.msg),e(t),o}return e(t)},Zs=Array.isArray,Js=e=>{let{getState:t}=e;return e=>s=>{if(s.type===ts.type){const e=Ms.noteIds(t(),s.payload.columnId);if(!Zs(e)||0!==e.length)return!1}return e(s)}},qs=Array.isArray,Qs=[...[Ls,Hs,Ps,Xs,zs,Ys,Js,e=>{let{getState:t}=e;return e=>s=>{if(s.type===p.type){const e=Ts.columnIds(t(),s.payload.boardId);if(!qs(e)||0!==e.length)return!1}return e(s)}},()=>e=>t=>{return t.type!==ct.type||"string"==typeof(s=t.payload.title)&&s.trim()?e(t):(t.payload.title="New Note",e(t),!1);var s}]];const eo=(0,n.xC)({reducer:Es,preloadedState:(()=>{let e;try{const t=window.localStorage.getItem(c.STORAGE_KEY);t&&(e=JSON.parse(t))}catch(e){console.log(e.msg)}return e||x})(),devTools:!1,middleware:e=>Qs});var to=s(974);const so={BG:{},ITEM:{}},oo=Object.assign,lo=[(e,t)=>{document.body.style.backgroundColor=t.BG_BODY},(e,t)=>{oo(e.BG,{backgroundColor:t.BG})},(e,t)=>{oo(e.ITEM,{backgroundColor:t.BG,border:`1px solid ${t.BG}`})}],no={DEFAULT:"DARK",DARK:"DARK",WHITE:"WHITE",SAND:"SAND"},ao={[no.DARK]:{pallete:{BG_BODY:"#5f5f5f",BG:"#4d4d4d",BG_HEADER:"#3a6799",C_HEADER:"#8a8a8a"},clSuffix:""},[no.WHITE]:{pallete:{BG_BODY:"#d2d2d2",BG:"#ebf1f5",BG_HEADER:"rgb(0, 150, 200)",C_HEADER:"#4d4d4d"},clSuffix:"--white"},[no.SAND]:{pallete:{BG_BODY:"darkgrey",BG:"#e8e0cb",BG_HEADER:"rgb(0, 150, 200)",C_HEADER:"#4d4d4d"},clSuffix:"--sand"}},ro={},io=e=>{const t=ao[e],{clSuffix:s,pallete:o}=t;var l;void 0===(l=s)&&(l=""),Object.keys(ro).forEach((e=>{so[e]=ro[e]+l})),((e,t)=>{lo.forEach((s=>s(e,t)))})(so,o)},co={themeName:no.DEFAULT,_init(){this.setThemeName(no.DEFAULT)},getThemeName(){return this.themeName},setThemeName(e){this.themeName=no[e]||no.DEFAULT,io(this.themeName)},createStyle(e){return this.themeName!==e.themeName&&(e.style=e.createStyle(so,this.themeName),e.themeName=this.themeName),e.style}};co._init();const uo=co;var mo=s(999);const po=e=>{if(!e||"object"!=typeof e)return!1;const{destination:t,source:s}=e;return!t||!s||t.droppableId===s.droppableId&&t.index===s.index},ho={themeName:void 0,style:void 0,createStyle:e=>({COMP:{...e.BG}})},xo=e=>{let{className:t,style:s,children:o}=e;const l=fe(ho);return(0,$.jsx)("header",{className:t,style:{...s,...l.COMP},children:o})},go=e=>!!e,bo=(e,t)=>"boolean"==typeof t?t:!e,yo=e=>(0,D.useReducer)(bo,e,go),jo={width:"auto",height:"auto"},Co={transform:"translateX(-264px)",pointerEvents:"none"},vo={transform:"translate(0px, 0px)"},fo={opacity:0,zIndex:-1,transition:"opacity 195ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"},No={opacity:1,zIndex:1e3,transition:"opacity 225ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"},Io=e=>{let{btStyle:t,captionEl:s,children:o}=e;const[l,n]=yo(!1),a=fe(ho),[r,i,d]=l?[vo,No,n]:[Co,fo];return[(0,$.jsx)("button",{className:"drawer-bt",style:{...jo,...t},"aria-label":"Open Drawer",onClick:n,children:s},"bt-drawer"),(0,$.jsx)("div",{role:"presentation","aria-hidden":!l,className:"drawer-modal",style:i,onClick:d},"wrapper"),(0,$.jsx)("aside",{className:"drawer-left",style:{...r,...a.COMP},children:o},"aside")]},So=e=>{let{className:t=te,style:s,title:o}=e;return(0,$.jsx)("span",{className:t,style:s,title:o,children:(0,$.jsxs)("svg",{viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:"2",strokeWidth:"2",children:[(0,$.jsx)("rect",{ry:"1.8825414",rx:"194.14471",y:"1.434558",x:"19.176462",height:"12.460618",width:"10.85316",fill:"#8ecc2d",stroke:"#8ecc2d"}),(0,$.jsx)("rect",{ry:"1.87537",rx:"204.478",y:"16.639841",x:"8.8410215",height:"13.752699",width:"18.307165",fill:"#232f3b",stroke:"#232f3b"}),(0,$.jsx)("rect",{ry:"1.87537",rx:"204.478",y:"3.4229634",x:"2.5897937",height:"10.894996",width:"10.001963",fill:"#a487d4",stroke:"#a487d4"})]})})},_o=Array.isArray,wo=(e,t)=>{const s=null==e?"Not Exist":(e=>{const t=e.title||"",{columnIds:s}=e;return`${t} (${_o(s)?s.length:0})`})(e);return`${t||"Notes"}: ${s}`},ko=`${le} header-board__title`,Eo=()=>{const e=(0,l.v9)(Ts.currentBoard);return(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(So,{className:oe},"logo"),(0,$.jsx)("span",{className:ko,children:wo(e)})]})},Do="drawer",Ro=`${Do}__title`,Ao=`${Do}__list`,To=`${Ao}-bt`,Bo=`${To}__badge`,Mo=e=>{let{board:t}=e;return(0,$.jsx)("div",{className:Ro,children:wo(t,"Topics")})},Oo=e=>{let{isHide:t}=e;return(0,$.jsx)("span",{className:Bo,children:t?"H":"S"})},Lo=e=>{let{topic:t,onClick:s}=e;if(!t)return null;const{isHide:o,title:l}=t,n=`Click to ${o?"show":"hide"} topic`;return(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(Q,{className:To,caption:l,title:n,timeout:0,onClick:s}),(0,$.jsx)(Oo,{isHide:o})]})},Ho={listStyleType:"none"},Po={position:"relative"},$o=()=>{},Go=e=>{let{board:t,columns:s,toggleColumn:o=$o}=e;const{columnIds:l}=t;return(0,$.jsx)("ul",{style:Ho,children:(l||[]).map((e=>(0,$.jsx)("li",{style:Po,children:(0,$.jsx)(Lo,{topic:s[e],onClick:()=>o({columnId:e})})},e)))})},Fo={removeDrawerMsg:w},Ko=(0,l.$j)((e=>({items:As.msg(e)})),Fo)((e=>{let{items:t,removeDrawerMsg:s}=e;return(0,$.jsx)("ul",{className:"drawer__msg-ul",children:t.map((e=>(0,$.jsx)("li",{className:"drawer__msg-li",children:(0,$.jsx)("button",{className:"drawer__msg-bt",onClick:()=>s({id:e.id}),children:e.msg})},e.id)))})})),Xo={toggleColumn:ws},Vo=(0,l.$j)((e=>({board:Os.board.currentBoard(e),columns:Os.column.columns(e)})),Xo)((e=>{let{board:t,columns:s,toggleColumn:o}=e;return(0,$.jsxs)("div",{className:Ao,children:[(0,$.jsx)(Mo,{board:t}),(0,$.jsx)(Go,{board:t,columns:s,toggleColumn:o}),(0,$.jsx)(Ko,{})]})})),Uo=(0,$.jsx)(Eo,{}),zo=()=>(0,$.jsx)(Io,{captionEl:Uo,children:(0,$.jsx)(Vo,{})}),Wo={position:"absolute",top:4,right:16},Yo={transform:"translateX(264px)",pointerEvents:"none"},Zo={transform:"translate(0px, 0px)"},Jo={opacity:0,zIndex:-1,transition:"opacity 195ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"},qo={opacity:1,zIndex:1e3,transition:"opacity 225ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"},Qo=e=>{let{btStyle:t,children:s}=e;const[o,l]=yo(!1),n=fe(ho),a=o?Zo:Yo,r=o?qo:Jo,i=o?l:void 0;return[(0,$.jsx)("button",{className:"drawer-bt",style:{...Wo,...t},"aria-label":"Open Drawer",onClick:l,children:(0,$.jsx)("span",{className:"drawer-span",children:(0,$.jsxs)("svg",{className:"drawer-svg",focusable:"false",viewBox:"0 0 24 24","aria-hidden":"true",children:[(0,$.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"}),(0,$.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"})]})})},"bt-drawer"),(0,$.jsx)("div",{role:"presentation","aria-hidden":!o,className:"drawer-modal",style:r,onClick:i},"wrapper"),(0,$.jsx)("aside",{className:"drawer",style:{...a,...n.COMP},children:s},"aside")]},el="Web App Notes v0.4.0",tl="drawer__list-bt",sl={padding:"16px 0 8px 0",marginLeft:16},ol={listStyleType:"none"},ll={showSettings:()=>Jt({id:Xt}),saveBoard:Vs,cleanStorage:Us},nl=(0,l.$j)(null,ll)((e=>{let{showSettings:t,saveBoard:s,cleanStorage:o}=e;return(0,$.jsxs)("div",{className:"drawer__list",children:[(0,$.jsx)("div",{className:"header__title",style:sl,children:el}),(0,$.jsxs)("ul",{style:ol,children:[(0,$.jsx)("li",{children:(0,$.jsx)(Q,{className:tl,caption:"User Settings",title:"Click to open user settings dialog",onClick:t})}),(0,$.jsx)("li",{children:(0,$.jsx)(Q,{className:tl,caption:"Save Boards",title:"Click to save boards to localStorage",onClick:s})}),(0,$.jsx)("li",{children:(0,$.jsx)(Q,{className:tl,caption:"Clean Storage",title:"Click to remove boards from localStorage",onClick:o})})]}),(0,$.jsx)(Ko,{})]})})),al=()=>(0,$.jsx)(Qo,{children:(0,$.jsx)(nl,{})}),rl=`${me} ml-8`,il=e=>{let{addColumn:t}=e;return(0,$.jsxs)(xo,{className:ee,children:[(0,$.jsx)(zo,{}),(0,$.jsx)(Q,{caption:"Add Topic",title:"Click to add topic to board",accessKey:"a",timeout:500,onClick:t}),(0,$.jsx)("nav",{children:(0,$.jsx)(E.OL,{to:"/boards",className:rl,children:"ToBoards"})}),(0,$.jsx)(al,{})]})},dl=e=>{let{children:t}=e;return(0,$.jsx)("main",{className:"container-list",children:t})},cl=Array.isArray,ul=e=>!cl(e)||0===e.length,ml=e=>{let{className:t,style:s,svgStyle:o,title:l,onClick:n}=e;return(0,$.jsx)("button",{className:P("bt-svg-more",t),style:s,title:l,onClick:n,children:(0,$.jsxs)("svg",{style:o,width:"6px",height:"22px",viewBox:"0 0 6 22",preserveAspectRatio:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,$.jsx)("circle",{cx:"3",cy:"4",r:"2"}),(0,$.jsx)("circle",{cx:"3",cy:"11",r:"2"}),(0,$.jsx)("circle",{cx:"3",cy:"18",r:"2"})]})})},pl={paddingLeft:8,width:"100%",textAlign:"left"},hl=e=>{let{style:t,isShow:s,onHideTopic:o,onAddNote:l,onClose:n}=e;const a=fe(ho);return(0,$.jsxs)(Le,{className:ne,style:{...t,...a.COMP},isShow:s,onClose:n,children:[(0,$.jsx)(Q,{style:pl,caption:"Hide Topic",title:"Click to hide Topic",onClick:o}),(0,$.jsx)(Q,{style:pl,caption:"Add Note",title:"Click to add new Note",timeout:100,onClick:l})]})},xl={themeName:void 0,style:void 0,createStyle:e=>({ITEM:{...e.ITEM}})},gl={display:"none"},bl={padding:"8px 0",lineHeight:"36px"},yl={display:"inline-block",paddingLeft:12,fontWeight:600},jl={Item:e=>{let{isHide:t,children:s}=e;const o=fe(xl),l=U(o.ITEM,[t,gl]);return(0,$.jsx)("section",{className:re,style:l,children:s})},Header:e=>{let{children:t}=e;return(0,$.jsx)("div",{style:bl,children:t})},Title:e=>(0,$.jsx)(_t,{className:ie,...e}),Counter:e=>{let{style:t,value:s}=e;return(0,$.jsx)("span",{style:{...yl,...t},children:s})},BtCircle:e=>{let{style:t,caption:s,title:o,tabIndex:l="-1",onClick:n}=e;return(0,$.jsx)("button",{className:"bt-circle",style:t,tabIndex:l,title:o,onClick:n,children:s})}},Cl={ROOT:{minHeight:100},DRAGGING_OVER:{border:"2px dashed lightgreen"},NOT_DRAGGING_OVER:{border:"2px dashed transparent"}},vl=e=>{const{className:t,style:s,innerRef:o,isDraggingOver:l,notDraggingStyle:n,children:a,...r}=e,i=((e,t)=>e?Cl.DRAGGING_OVER:t||Cl.NOT_DRAGGING_OVER)(l,n);return(0,$.jsx)("div",{...r,ref:o,className:t,style:{...Cl.ROOT,...s,...i},children:a})},fl=(e,t)=>s=>{const{draggableProps:o,innerRef:l,isDragging:n,dragHandleProps:a,...r}=s,{dragBg:i,notDragBg:d,isDragHanlerProps:c}=t||{},{style:u,...m}=o,p=function(e,t,s){return void 0===t&&(t="#1e90ff"),void 0===s&&(s="transparent"),{backgroundColor:e?t:s}}(n,i,d),h=c?void 0:a;return(0,$.jsx)("div",{ref:l,style:{...u,...p},...m,...h,children:(0,$.jsx)(e,{dragHandleProps:c?a:void 0,...r})})},Nl=(e,t)=>"function"==typeof e?fl(e,t):t=>fl(t,e),Il=e=>{let{isDetails:t,...s}=e;const o=P("note__handle",[t,"note__handle--open"]);return(0,$.jsx)("span",{className:o,...s})},Sl={paddingLeft:8,width:"100%",textAlign:"left"},_l=e=>{let{isShow:t,className:s,style:o,onClose:l,onEdit:n,onRemove:a}=e;const r=fe(ho),i=P(ne,s);return(0,$.jsxs)(Le,{className:i,style:{...o,...r.COMP},isShow:t,onClose:l,children:[(0,$.jsx)(Q,{style:Sl,caption:"Edit Details",onClick:n}),(0,$.jsx)(Q,{style:Sl,caption:"Remove Note",onClick:a})]})},wl=e=>{let{dragHandleProps:t,isDetails:s,onClickHandle:o,refTitle:l,noteTitle:n,onBlurTitle:a,isMenuMore:r,onClickMenuMore:i,onCloseMenuMore:d,onEditDetails:c,onRemoveNote:u}=e;return(0,$.jsxs)("div",{children:[(0,$.jsx)(Il,{...t,isDetails:s,onClick:o}),(0,$.jsx)(_t,{ref:l,className:"note__caption",initialValue:n,onBlur:a}),(0,$.jsx)(ml,{className:"note__bt-more",title:"Click to open note menu",onClick:i}),r&&(0,$.jsx)(_l,{isShow:r,className:"note__menu-more",onClose:d,onEdit:c,onRemove:u})]})},kl=e=>{let{isShow:t,note:s,editDetails:o}=e;const l=gt(s);return(0,$.jsx)($e,{className:"note__details",isShow:t,children:(0,$.jsxs)("div",{onClick:o,children:[(0,$.jsx)(It,{labels:s.labels}),(0,$.jsx)("div",{children:l})]})})},El=e=>{const{columnId:t,note:s,dragHandleProps:o}=e,{id:n,title:a}=s,r=(0,D.useRef)(),[i,d,c]=_e(),[u,m]=yo(),p=(0,l.I0)(),h=(0,D.useCallback)((()=>{p(jt({columnId:t,noteId:n}))}),[t]),x=(0,D.useCallback)((e=>{const t=e.target.value;if(t)t!==a&&p(ct({noteId:n,title:t}));else{const e=R(r);e&&e.setValue(a)}}),[a]),g=(0,D.useCallback)((()=>{p(Jt({id:Vt,data:s})),c()}),[s]);return(0,$.jsxs)("div",{className:"note",id:n,children:[(0,$.jsx)(wl,{dragHandleProps:o,isDetails:u,onClickHandle:m,refTitle:r,noteTitle:a,onBlurTitle:x,isMenuMore:i,onClickMenuMore:d,onCloseMenuMore:c,onEditDetails:g,onRemoveNote:h}),(0,$.jsx)(kl,{isShow:u,note:s,editDetails:g})]})},Dl=Nl({notDragBg:"#9e9e9e",isDragHanlerProps:!0})(El);Dl.displayName="DnDNote";const Rl=Dl,Al={minHeight:50},Tl={border:"2px solid #9e9e9e"},Bl=e=>{let{cId:t,noteIds:s,notes:o}=e;return(0,$.jsx)(mo.bK,{droppableId:t,children:(e,l)=>(e=>{let{provided:t,snapshot:s,noteIds:o,notes:l,cId:n}=e;return(0,$.jsxs)(vl,{...t.droppableProps,innerRef:t.innerRef,isDraggingOver:s.isDraggingOver,style:Al,notDraggingStyle:Tl,children:[o.map(((e,t)=>(0,$.jsx)(mo._l,{draggableId:e,index:t,children:(t,s)=>(0,$.jsx)(Rl,{draggableProps:t.draggableProps,innerRef:t.innerRef,isDragging:s.isDragging,dragHandleProps:t.dragHandleProps,note:l[e],columnId:n})},e))),t.placeholder]})})({provided:e,snapshot:l,noteIds:s,notes:o,cId:t})})},Ml={marginRight:8},Ol={position:"absolute",width:150},Ll=e=>{let{boardId:t,column:s,notes:o,addNote:n}=e;const{id:a,isHide:r,title:i,withAdd:d,noteIds:c}=s,[u,m,p]=_e(),h=(0,l.I0)(),x=(0,D.useCallback)((()=>{h(ws({columnId:a}))}),[a]),g=(0,D.useCallback)((()=>{n({columnId:a})}),[n,a]),b=(0,D.useCallback)((e=>{h(_s({columnId:a,title:e.target.value}))}),[a]),y=(0,D.useCallback)((()=>{h(ts({boardId:t,columnId:a}))}),[t,a]),j=c.length;return(0,$.jsxs)(jl.Item,{isHide:r,children:[(0,$.jsxs)(jl.Header,{children:[(0,$.jsx)(ml,{style:Ml,title:"Click to open topic menu",onClick:m}),u&&(0,$.jsx)(hl,{style:Ol,isShow:u,onAddNote:g,onHideTopic:x,onClose:p}),(0,$.jsx)(jl.Title,{initialValue:i,onBlur:b}),(0,$.jsx)(jl.Counter,{value:j}),d&&(0,$.jsx)(Q,{clCaption:de,caption:"AddNote",title:"Click to add a new note",timeout:1e3,onClick:g})]}),(0,$.jsx)(Bl,{cId:a,noteIds:c,notes:o}),(0,$.jsx)("div",{children:ul(c)&&(0,$.jsx)(Q,{clCaption:de,caption:"Remove Topic",onClick:y})})]})},Hl=e=>{let{boardId:t,columnIds:s,columns:o,notes:l,addNote:n}=e;return(s||[]).map((e=>{const s=o[e];return(0,$.jsx)(Ll,{boardId:t,column:s,notes:l,addNote:n},s.id)}))},Pl={moveNote:Ct,addNote:yt,addColumn:es},$l=(0,l.$j)((e=>({board:Os.board.currentBoard(e),notes:Os.note.notes(e),columns:Os.column.columns(e)})),Pl)((e=>{let{board:t,notes:s,columns:o,addNote:l,moveNote:n,addColumn:a}=e;const{id:r,columnIds:i}=t,d=(0,D.useCallback)((e=>{po(e)||n(e)}),[]),c=(0,D.useCallback)((()=>{a({boardId:r})}),[]);return(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(il,{addColumn:c}),(0,$.jsx)(mo.Z5,{onDragEnd:d,children:(0,$.jsx)(dl,{children:(0,$.jsx)(Hl,{boardId:r,columnIds:i,columns:o,notes:s,addNote:l})})})]})})),Gl={addBoard:m},Fl=(0,l.$j)(null,Gl)((e=>{let{style:t,addBoard:s}=e;return(0,$.jsxs)(xo,{className:ee,style:t,children:[(0,$.jsx)(So,{title:el}),(0,$.jsx)("span",{className:se}),(0,$.jsx)("span",{className:le,children:"Notes: Boards"}),(0,$.jsx)(Q,{caption:"Add Board",title:"Click to add new board",accessKey:"a",isEvent:!1,timeout:200,onClick:s}),(0,$.jsx)(al,{})]})})),Kl={float:"right",paddingRight:12},Xl=Nl((e=>{let{title:t,count:s}=e;return(0,$.jsxs)("div",{className:"topic",children:[(0,$.jsx)("span",{children:t}),(0,$.jsx)(jl.Counter,{style:Kl,value:s})]})}));Xl.displayName="DnDTopic";const Vl=Xl,Ul=e=>{let{id:t,columnIds:s,columns:o}=e;return(0,$.jsx)(mo.bK,{droppableId:t,children:(e,t)=>(e=>{let{provided:t,snapshot:s,columnIds:o,columns:l}=e;return(0,$.jsxs)(vl,{...t.droppableProps,innerRef:t.innerRef,isDraggingOver:s.isDraggingOver,children:[o.map(((e,t)=>(0,$.jsx)(mo._l,{draggableId:e,index:t,children:(t,s)=>{return(0,$.jsx)(Vl,{draggableProps:t.draggableProps,innerRef:t.innerRef,isDragging:s.isDragging,dragHandleProps:t.dragHandleProps,...(o=l[e],{title:o.title,count:o.noteIds.length})});var o}},e))),t.placeholder]})})({provided:e,snapshot:t,columnIds:s,columns:o})})},zl={margin:"8px 8px 4px 0"},Wl=e=>{let{id:t}=e;const s=(0,l.I0)(),[o,n,a,r]=(0,D.useMemo)((()=>[e=>s(ms({boardId:t,title:e.target.value})),()=>s(p({boardId:t})),()=>s(h({boardId:t})),e=>Ts.board(e,t)]),[t,s]),i=(0,l.v9)(r),d=(0,l.v9)(Ms.columns),{columnIds:c}=i;return(0,$.jsxs)(jl.Item,{children:[(0,$.jsxs)(jl.Header,{children:[(0,$.jsx)(jl.Title,{initialValue:i.title,onBlur:o}),(0,$.jsx)(jl.Counter,{value:c.length})]}),(0,$.jsx)(Ul,{id:t,columnIds:c,columns:d}),(0,$.jsx)(E.OL,{to:`/boards/${t}`,className:me,style:zl,onClick:a,children:"ToNotes"}),(0,$.jsx)("div",{children:ul(c)&&(0,$.jsx)(Q,{clCaption:de,caption:"Remove Board",onClick:n})})]})},Yl=(0,l.$j)((e=>({boardIds:Ts.boardIds(e),boards:Ts.boards(e)})))((e=>{let{boardIds:t,boards:s}=e;return t.map((e=>(0,$.jsx)(Wl,{id:e},e)))})),Zl={moveColumn:ss},Jl=(0,l.$j)(null,Zl)((e=>{let{moveColumn:t}=e;const s=(0,D.useCallback)((e=>{po(e)||t(e)}),[t]);return[(0,$.jsx)(Fl,{},"header"),(0,$.jsx)(mo.Z5,{onDragEnd:s,children:(0,$.jsx)(dl,{children:(0,$.jsx)(Yl,{})})},"ddc")]})),ql="modal-root",Ql=`${ql} show-modal`,en={display:"block"},tn={display:"none"},sn=e=>{let{isShow:t,onClose:s,children:o}=e;const[l,n]=t?[Ql,en]:[ql,tn];return(0,$.jsx)("div",{role:"presentation",className:l,style:n,onClick:s,children:o})},on=e=>{let{TS:t,store:s,shows:o,data:l,dialogs:n,onClose:a}=e;return n.map((e=>{const{type:n,comp:r}=e;return(0,D.createElement)(r,{TS:t,key:n,isShow:o[n],data:l[n],store:s,dispatch:s.dispatch,onClose:a.bind(null,n)})}))},ln=(0,D.memo)((e=>{let{store:t}=e;const s=fe(Ne),o=(0,D.useRef)(),[l,n]=(0,D.useState)({isShow:!1,currentDialog:null,dialogs:[],inits:{},shows:{},data:{}}),a=(0,D.useCallback)((e=>{n((t=>(t.shows[e]=!1,{...t,isShow:!1,currentDialog:null,shows:t.shows})))}),[]);(0,D.useEffect)((()=>t.subscribe((()=>{const e=Rs.modal(t.getState()),{id:s,data:l={}}=e,a=R(o);s&&a!==e&&(A(o,e),n((e=>{const{inits:t,shows:o,data:n,dialogs:a}=e;return t[s]||(a.push({type:s,comp:zt.getDialog(s)}),t[s]=!0),o[s]=!0,n[s]=l,{isShow:!0,currentDialog:s,shows:o,data:n,dialogs:a,inits:t}})))}))),[]);const{isShow:r,currentDialog:i,shows:d,data:c,dialogs:u}=l;return(0,$.jsx)(sn,{isShow:r,onClose:a.bind(null,i),children:(0,$.jsx)(on,{TS:s,store:t,shows:d,data:c,dialogs:u,onClose:a})})})),nn=ln,an=e=>{let{basename:t,store:s}=e;const[o,n]=(0,D.useState)(uo),a=(0,l.v9)(Rs.uiTheme);return(0,D.useEffect)((()=>{o.getThemeName!==a&&(o.setThemeName(a),n({...o}))}),[a]),(0,$.jsx)(D.StrictMode,{children:(0,$.jsx)(E.VK,{basename:t,children:(0,$.jsxs)(ve.Provider,{value:o,children:[(0,$.jsx)(nn,{store:s}),(0,$.jsxs)(to.Z5,{children:[(0,$.jsx)(to.AW,{path:"/boards/:id",element:(0,$.jsx)($l,{})}),(0,$.jsx)(to.AW,{path:"/boards",element:(0,$.jsx)(Jl,{})}),(0,$.jsx)(to.AW,{path:"/",element:(0,$.jsx)(to.Fg,{to:"/boards",replace:!0})})]})]})})})},rn=((window||{}).location||{}).pathname;(0,o.s)(document.getElementById("app")).render((0,$.jsx)(l.zt,{store:eo,children:(0,$.jsx)(an,{basename:rn,store:eo})}))},745:(e,t,s)=>{var o=s(935);t.s=o.createRoot,o.hydrateRoot},251:(e,t,s)=>{var o=s(294),l=Symbol.for("react.element"),n=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,r=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function d(e,t,s){var o,n={},d=null,c=null;for(o in void 0!==s&&(d=""+s),void 0!==t.key&&(d=""+t.key),void 0!==t.ref&&(c=t.ref),t)a.call(t,o)&&!i.hasOwnProperty(o)&&(n[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===n[o]&&(n[o]=t[o]);return{$$typeof:l,type:e,key:d,ref:c,props:n,_owner:r.current}}t.Fragment=n,t.jsx=d,t.jsxs=d},893:(e,t,s)=>{e.exports=s(251)}},e=>{var t;t=397,e(e.s=t)}]);