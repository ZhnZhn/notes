/*! For license information please see app_ea5de99e0031e0acfc6c.js.LICENSE.txt */
"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([[524],{560:(e,t,s)=>{var o=s(338),l=s(468),n=s(88);const a=(e,t)=>"Max number ("+t+") of "+e+" reached.",r=8,i=8,d=12,c={STORAGE_KEY:"notes-manager",DMSG_PREFIX:"m",MSG_SAVED:"Boards saved",MSG_SAVE_FAIL:"Boards not saved",MSG_CLEANED:"localStorage cleaned",MSG_CLEAN_FAIL:"localStorage not cleaned",BOARDS_PREFIX:"b",MAX_BOARDS:r,N_MAX_BOARDS:{descr:a("boards",r)},MAX_COLUMNS:i,COLUMNS_PREFIX:"c",N_MAX_COLUMNS:{descr:a("columns",i)},MAX_NOTES:d,NOTES_PREFIX:"n",N_MAX_NOTES:{descr:a("notes",d)},NLABELS_PREFIX:"nl"};var u=s(644);const m=(0,n.VP)("boards/addBoard"),p=(0,n.VP)("boards/removeBoard"),h=(0,n.VP)("boards/setCurrentBoard"),x={app:{boardId:"b-1",boardIds:["b-1"],uiTheme:"DARK"},drawerMsg:[],modal:{id:void 0,data:void 0},boards:{"b-1":{id:"b-1",title:"Board 1",columnIds:["c-1","c-2"]}},notes:{},noteLabels:{},columns:{"c-1":{id:"c-1",title:"Topic 1",noteIds:[],withAdd:!0},"c-2":{id:"c-2",title:"Topic 2",noteIds:[]}}},g=(0,n.Z0)({name:"app",initialState:x.app,reducers:{setUiTheme(e,t){const{uiTheme:s}=t.payload;e.uiTheme=s}},extraReducers:e=>e.addCase(m,((e,t)=>{const{boardId:s}=t.payload;e.boardIds.push(s)})).addCase(p,((e,t)=>{const{boardId:s}=t.payload;e.boardIds=e.boardIds.filter((e=>e!==s))})).addCase(h,((e,t)=>{const{boardId:s}=t.payload;e.boardId=s}))}),{actions:b,reducer:y}=g,{setUiTheme:j}=b,C=y,v={crMsg:(e,t)=>({id:e,msg:t})},{crMsg:N}=v,f=(0,n.Z0)({name:"drawerMsg",initialState:x.drawerMsg,reducers:{addDrawerMsg(e,t){const{id:s,msg:o}=t.payload;e.unshift(N(s,o))},removeDrawerMsg(e,t){const{id:s}=t.payload;return e.filter((e=>e.id!==s))}}}),{actions:I,reducer:S}=f,{addDrawerMsg:_,removeDrawerMsg:w}=I,k=S;var E=s(651),D=s(540);const A=e=>(e||{}).current,R=(e,t)=>{e&&(e.current=t)},T=e=>{const t=A(e);t&&"function"==typeof t.focus&&t.focus()},B=(e,t)=>e.isShow===t.isShow,M=e=>(0,D.memo)(e,B),O=(e=>(t,s)=>(0,D.useCallback)((s=>{e(s)&&(s.preventDefault(),s.stopPropagation(),t(s))}),s||[]))((e=>27===e.keyCode||"Escape"===e.key)),L=Array.isArray,P=e=>L(e)?e[0]?e[1]:"":e||"",H=(e,t)=>{const s=P(e),o=P(t);return s?o?s+" "+o:s:o||void 0};var G=s(848);const V=e=>{let{className:t,style:s,tabIndex:o,onClose:l}=e;return(0,G.jsx)("button",{tabIndex:o,className:H("bt-svg-close",t),style:s,onClick:l,children:(0,G.jsxs)("svg",{viewBox:"0 0 12 12",width:"100%",height:"100%",preserveAspectRatio:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,G.jsx)("path",{d:"M 0,0 L 12,12"}),(0,G.jsx)("path",{d:"M 12,0 L 0,12"})]})})},F=e=>{let{rootStyle:t,svgStyle:s,caption:o,onClose:l,children:n}=e;return(0,G.jsxs)("div",{className:"dialog__header",style:t,children:[(0,G.jsx)("span",{className:"dialog__caption not-selected",children:o}),n,(0,G.jsx)(V,{className:"dialog__svg-close",onClose:l})]})},K=function(e,t,s){void 0===t&&(t=3e3),void 0===s&&(s=!0);const o=(0,D.useRef)(null);return(0,D.useCallback)((l=>{const n=s?l:void 0;if(0===t)return void e(n);const a=o.current,{timeStamp:r}=l;(null==a||r-a>t)&&(e(n),o.current=r)}),[s,t,e])},X=Array.isArray,U=e=>X(e)?e[0]?e[1]:void 0:e||void 0,z=function(){const e=U(arguments.length<=0?void 0:arguments[0]),t=U(arguments.length<=1?void 0:arguments[1]);return e?t?{...e,...t}:e:t||void 0},Y={textDecoration:"underline"},W=(e,t)=>{const s=((e,t)=>e?t.toLowerCase().indexOf(e):-1)(e,t);if(-1===s)return t;const o=t.substring(0,s),l=t.substring(s,s+1),n=t.substring(s+1);return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)("span",{children:o}),(0,G.jsx)("span",{style:Y,children:l}),(0,G.jsx)("span",{children:n})]})},Z=e=>{let{className:t,caption:s,accessKey:o,children:l}=e;return s?(0,G.jsxs)("span",{className:t,children:[W(o,s),l]}):null},q="bt-flat__div",J={color:"#607d8b"},$=e=>{let{refEl:t,timeout:s,className:o,style:l,clDiv:n=q,clCaption:a,isPrimary:r,title:i="",caption:d,accessKey:c,children:u,isEvent:m,onClick:p}=e;const h=K(p,s,m),x=H("bt-flat",o),g=H("bt-flat__span",a),b=z(l,[r,J]),y=((e,t)=>t?e+" ["+t+"]":e)(i,c);return(0,G.jsx)("button",{ref:t,className:x,style:b,accessKey:c,title:y,onClick:h,children:(0,G.jsxs)("div",{className:n,children:[(0,G.jsx)(Z,{className:g,caption:d,accessKey:c}),u]})})},Q="header",ee=Q+"__logo-notes",te=Q+"__title-gap",se=Q+"-board__logo_notes",oe=Q+"__title",le="modal-pane",ne="md__actions",ae="card",re=ae+"__title",ie="bt__card",de="note__label",ce=de+"__close",ue="nav-link",me={display:"block"},pe={display:"none"},he=e=>{let{buttons:t,refBtClose:s,withoutClose:o,onClose:l}=e;return(0,G.jsxs)("div",{className:ne,children:[t,!o&&(0,G.jsx)($,{refEl:s,caption:"Close",timeout:0,onClick:l})]})},xe=e=>{let{className:t="",style:s,isShow:o,isWithButton:l=!0,isFocusClose:n=!0,caption:a,captionStyle:r,children:i,commandButtons:d,withoutClose:c,onClose:u}=e;const m=((e,t)=>{const s=(0,D.useRef)(),o=(0,D.useRef)(),l=(0,D.useRef)(),n=(0,D.useCallback)((()=>{o.current=document.activeElement,t&&T(s)}),[t]),a=(0,D.useCallback)((()=>{T(o),o.current=null}),[]);return(0,D.useEffect)((()=>{const t=A(l);e&&!t?n():!e&&t&&a(),l.current=e}),[e,n,a]),s})(o,n),p=(0,D.useCallback)((e=>{e.stopPropagation()}),[]),h=O(u),x=H("modal-dialog "+t,[o,"show-popup"]),g=o?me:pe;return(0,G.jsxs)("div",{role:"dialog","aria-label":a,"aria-hidden":!o,className:x,style:{...s,...g},onClick:p,onKeyDown:h,children:[(0,G.jsx)(F,{rootStyle:r,caption:a,onClose:u}),(0,G.jsx)("div",{children:i}),l&&(0,G.jsx)(he,{buttons:d,refBtClose:m,withoutClose:c,onClose:u})]})},ge="d-notif__row",be=M((e=>{let{isShow:t,data:s,TS:o,onClose:l}=e;const{caption:n="",descr:a=""}=s||{};return(0,G.jsxs)(xe,{style:o.DIALOG,caption:"Notification",isShow:t,onClose:l,children:[n&&(0,G.jsx)("div",{className:ge,children:(0,G.jsx)("p",{className:"d-notif__caption",children:n})}),(0,G.jsx)("div",{className:ge,children:(0,G.jsx)("p",{className:"d-notif__descr",children:a})})]})})),ye=be,je=(0,D.createContext)(),Ce=je,ve=e=>(0,D.useContext)(Ce).createStyle(e),Ne={themeName:void 0,style:void 0,createStyle:e=>({DIALOG:{...e.BG},SELECT:{MODAL_PANE:{...e.BG}}})},fe=e=>!!e,Ie=(e,t)=>t,Se=e=>{const[t,s]=(0,D.useReducer)(Ie,e,fe),o=(0,D.useRef)((()=>s(!0))),l=(0,D.useRef)((()=>s(!1)));return[t,A(o),A(l)]},_e="m-select",we=_e+"__label",ke=_e+"__div",Ee=_e+"__div__value",De=_e+"__div__bt",Ae=_e+"__line",Re=_e+"__svg-arrow",Te=()=>(0,G.jsx)("svg",{className:Re,viewBox:"0 0 24 24",children:(0,G.jsx)("path",{d:"M7 10l5 5 5-5z"})}),Be=(e,t)=>{A(t)&&(document.removeEventListener("click",e,!0),R(t,null))},Me=(e,t)=>{const s=(0,D.useRef)(null),o=(0,D.useRef)(null),l=(0,D.useCallback)((e=>{const o=A(s);o&&o.contains&&!o.contains(e.target)&&(e.stopPropagation(),t(e))}),[]);return(0,D.useEffect)((()=>{e&&!A(o)?(document.addEventListener("click",l,!0),R(o,!0)):e||Be(l,o)})),(0,D.useEffect)((()=>()=>Be(l,o)),[]),s},Oe=e=>{let{isShow:t,className:s,style:o,children:l,onClose:n}=e;const a=Me(t,n),r=O(n),i=t?r:void 0;return(0,G.jsx)("div",{role:"presentation",ref:a,className:s,style:o,onKeyDown:i,children:l})},Le={display:"block"},Pe={display:"none"},He=e=>{let{isShow:t,className:s,style:o,children:l}=e;const n=H(s,[t,"show-popup"]),a=z(o,t?Le:Pe);return(0,G.jsx)("div",{className:n,style:a,children:l})},Ge={position:"absolute",top:12,zIndex:20,width:"100%",paddingTop:12,paddingBottom:12,lineHeight:1.8,backgroundColor:"rgb(77, 77, 77)",borderRadius:2,boxShadow:"rgba(0, 0, 0, 0.3) 0px 2px 2px 0px, rgba(0, 0, 0, 0.1) 0px 0px 0px 1px"},Ve={lineHeight:2.2,paddingLeft:12},Fe={color:"greenyellow"},Ke=(e,t,s,o,l)=>e.map((e=>{const l=z(Ve,[e.value===t.value,Fe]),n=o.bind(null,e),a=(r=n,e=>{13===e.which&&r(e)});var r;return(0,G.jsx)("div",{role:"button",tabIndex:"0",style:l,className:s,onClick:n,onKeyPress:a,children:e.caption},e.value)})),Xe=e=>{let{isShow:t,style:s,options:o,item:l,clItem:n,onSelect:a,onClose:r}=e;return(0,G.jsx)(Oe,{isShow:t,style:s,onClose:r,children:(0,G.jsx)(He,{isShow:t,style:{...Ge,...s},children:Ke(o,l,n,a)})})},Ue={caption:"",value:""},ze={},Ye=e=>{let{initialItem:t,caption:s,options:o,styleConfig:l=ze,onSelect:n}=e;const[a,r,i]=Se(),[d,c]=(0,D.useState)(t||Ue),u=(0,D.useCallback)(((e,t)=>{t.stopPropagation(),n(e),i(),c(e)}),[n,i]);return(0,G.jsxs)("div",{role:"presentation",className:_e,style:l.ROOT,onClick:r,children:[(0,G.jsx)(Xe,{style:l.MODAL_PANE,isShow:a,item:d,options:o,clItem:l.CL_ITEM,onSelect:u,onClose:i}),(0,G.jsx)("label",{className:we,children:s}),(0,G.jsxs)("div",{className:ke,children:[(0,G.jsx)("div",{className:Ee,children:d.caption}),(0,G.jsx)("button",{className:De,tabIndex:"0",children:(0,G.jsx)(Te,{})}),(0,G.jsx)("div",{className:Ae})]})]})},We=[{caption:"Dark",value:"DARK"},{caption:"Light",value:"WHITE"},{caption:"Sand",value:"SAND"}],Ze=We[0],qe=M((e=>{let{isShow:t,dispatch:s,onClose:o}=e;const l=(0,D.useCallback)((e=>{let{value:t}=e;s(j({uiTheme:t}))}),[]),n=ve(Ne);return(0,G.jsx)(xe,{isShow:t,className:"md-settings",style:n.DIALOG,caption:"User Settings",onClose:o,children:(0,G.jsx)(Ye,{styleConfig:n.SELECT,caption:"UI Theme (Default: Dark)",initialItem:Ze,options:We,onSelect:l})})})),Je={listStyle:"outside none none",marginTop:4,marginLeft:12,marginRight:5,marginBottom:8,textAlign:"left"},$e={width:"100%",height:"100%"},Qe={display:"block",width:"100%",height:"100%"},et={display:"none"},tt=(e,t,s)=>e.map(((e,o)=>(0,D.cloneElement)(e,{key:o,id:o,onClick:()=>s(o),isSelected:o===t}))),st=(e,t)=>e.map(((e,s)=>{const o=s===t,l=o?Qe:et;return(0,G.jsx)("div",{style:l,role:"tabpanel",id:"tabpanel-"+s,"aria-labelledby":"tab-"+s,children:(0,D.cloneElement)(e.props.children,{key:"comp"+s,isSelected:o})},"a"+s)})),ot=e=>{let{width:t,height:s,tabsStyle:o,children:l}=e;const[n,a]=(0,D.useState)(0);return(0,G.jsxs)("div",{style:{width:t,height:s},children:[(0,G.jsx)("ul",{style:{...Je,...o},children:tt(l,n,a)}),(0,G.jsx)("div",{style:$e,children:st(l,n)})]})},lt=e=>{let{id:t,title:s,isSelected:o,onClick:l}=e;const n=H("tab not-selected",[o,"tab--selected"]),a=()=>{o||l()};return(0,G.jsx)("li",{role:"tab",tabIndex:0,className:n,id:"tab-"+t,"aria-selected":o,"aria-controls":"tabpanel-"+t,onClick:a,onKeyDown:e=>{(e=>""===e.key||32===e.keyCode)(e)&&a()},children:(0,G.jsx)("span",{children:s})})},nt=(e,t,s)=>(0,D.useEffect)((()=>{const s=A(e);t&&s&&s.focus()}),[s]),at=(0,n.Z0)({name:"notes",initialState:{},reducers:{addNote(e,t){const{noteId:s}=t.payload;e[s]=(e=>({id:e,title:"New Note"}))(s)},deleteNote(e,t){const{noteId:s}=t.payload;delete e[s]},editNoteTitle(e,t){const{noteId:s,title:o}=t.payload;e[s].title=o},editNoteDescr(e,t){const{noteId:s,descr:o}=t.payload;e[s].descr=o},editNoteLabels(e,t){const{noteId:s,labelsTo:o}=t.payload;e[s].labels=o}}}),{reducer:rt,actions:it}=at,{editNoteTitle:dt,editNoteDescr:ct}=it,ut=rt,mt=e=>"Delete"===e.key||46===e.keyCode,pt=e=>{let{refEl:t,className:s,style:o,initialValue:l,maxLength:n}=e;const a=(0,D.useRef)(),[r,i]=(0,D.useState)(l),d=(0,D.useCallback)((e=>{i(e.target.value)}),[]),c=(0,D.useCallback)((e=>{mt(e)&&i("")}),[]);return(0,D.useImperativeHandle)(t,(()=>({getValue:()=>r,focus:()=>{const e=A(a);e&&e.focus()}})),[r]),(0,G.jsx)("textarea",{ref:a,className:s,style:o,value:r,maxLength:n,onChange:d,onKeyDown:c})},ht=e=>{let{refBtClose:t,className:s,onSave:o,onClose:l}=e;return(0,G.jsxs)("div",{className:s,children:[(0,G.jsx)($,{caption:"Save",timeout:100,onClick:o}),(0,G.jsx)($,{refEl:t,caption:"Close",timeout:0,onClick:l})]})},xt=e=>"object"!=typeof e||null==e?"This note is not exist.":e.descr||"Edit description...",gt=e=>{const{isSelected:t,note:s,dispatch:o,onClose:l}=e,{id:n}=s,a=(0,D.useRef)(null),r=(0,D.useRef)(null),i=(0,D.useCallback)((()=>{o(ct({noteId:n,descr:A(r).getValue()}))}),[n,o]);nt(a,t,e);const d=xt(s);return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(pt,{refEl:r,className:"md-details__descr",maxLength:250,initialValue:d},n),(0,G.jsx)(ht,{refBtClose:a,className:"md__actions",onSave:i,onClose:l})]})},bt=(0,n.VP)("notes/addNote"),yt=(0,n.VP)("notes/deleteNote"),jt=(0,n.VP)("notes/moveNote"),Ct=(0,n.VP)("notes/editNoteLabels"),vt=e=>{let{className:t,clClose:s,item:o,onRemove:l}=e;return(0,G.jsxs)("button",{className:t,style:{backgroundColor:o.color},onClick:l,children:[o.title,l&&(0,G.jsx)("span",{className:s,children:"x"})]})},Nt={paddingBottom:4},ft=e=>{let{labels:t,onRemove:s}=e;return(0,G.jsx)("div",{style:Nt,children:(t||[]).map((e=>(0,G.jsx)(vt,{className:de,clClose:ce,item:e,onRemove:s?s.bind(null,e):void 0},e.id||e.title)))})},It=e=>"Enter"===e.key||13===e.keyCode,St=e=>{let{refEl:t,className:s,style:o,initialValue:l,maxLength:n=40,onBlur:a}=e;const[r,i]=(0,D.useState)(l),d=(0,D.useCallback)((e=>{const{value:t}=e.target;t.length<=n&&i(t)}),[n]),c=(0,D.useCallback)((e=>{if(It(e)){const e=document.activeElement;e&&"function"==typeof e.blur&&e.blur()}else mt(e)&&i("")}),[]);(0,D.useImperativeHandle)(t,(()=>({setValue:e=>{e.length<=n&&i(e)}})),[n]);const u=H("input-text",s);return(0,G.jsx)("input",{type:"text",className:u,style:o,value:r,onChange:d,onBlur:a,onKeyDown:c})},_t=()=>{},wt=e=>{let{tabIndex:t="-1",style:s,color:o,onClick:l=_t,children:n}=e;const a=o?{backgroundColor:o}:void 0;return(0,G.jsx)("button",{tabIndex:t,style:{...s,...a},onClick:()=>l(o),children:n})},kt="#2f7ed8",Et=["#8abb5d","#f7a35c","#795548","#f45b5b","#d2b772","#dda0dd"],Dt=["#f1d600","#008b8b","#2f7ed8","#000000","#607d8b","#7092be"],At={paddingBottom:4},Rt={padding:"4px 0 0 56px"},Tt={position:"relative",display:"inline-block",height:32,width:32,marginRight:4,borderRadius:2,verticalAlign:"bottom",boxShadow:"0 2px 2px 0 rgba(0,0,0,0.3), 0 0 0 1px rgba(0,0,0,0.1)"},Bt={...Tt,margin:"0 12px"},Mt=e=>{let{colors:t,onClick:s}=e;return(0,G.jsx)(G.Fragment,{children:t.map((e=>(0,G.jsx)(wt,{color:e,style:Tt,onClick:s},e)))})},Ot=e=>{let{refEl:t,initColor:s=kt}=e;const[o,l]=(0,D.useState)(s),n=(0,D.useCallback)((e=>{e&&l(e)}),[]),a=(0,D.useCallback)((()=>l(s)),[s]);return(0,D.useImperativeHandle)(t,(()=>({getColor:()=>o})),[o]),(0,G.jsxs)("div",{style:At,children:[(0,G.jsxs)("div",{children:[(0,G.jsx)(wt,{style:Bt,color:o,onClick:a}),(0,G.jsx)(Mt,{colors:Et,onClick:n})]}),(0,G.jsx)("div",{style:Rt,children:(0,G.jsx)(Mt,{colors:Dt,onClick:n})})]})},Lt={padding:"4px 0 8px 12px"},Pt={marginLeft:16},Ht=e=>{const{isSelected:t,note:s,dispatch:o,onClose:l}=e,{id:n}=s,[a,r]=(0,D.useState)((()=>s.labels||[])),i=(0,D.useRef)(null),d=(0,D.useRef)(""),c=(0,D.useRef)(null),u=(0,D.useRef)(null),m=(0,D.useCallback)((e=>{d.current=e.target.value}),[]),p=(0,D.useCallback)((()=>{r((e=>((e,t,s)=>!t||e.find((e=>e.title===t))?e:e.concat({title:t,color:s}))(e,(e=>{if("string"!=typeof e)return"";const t=e.trim();return t&&t.length>0?t[0].toUpperCase()+t.slice(1):t})(A(d)),A(u).getColor())),A(c).setValue(""))}),[]),h=(0,D.useCallback)((e=>{r((t=>((e,t)=>e.filter((e=>e.title!==t.title)))(t,e)))}),[]),x=(0,D.useCallback)((()=>{o(Ct({noteId:n,labels:a}))}),[n,a]);return nt(i,t,e),(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)("div",{style:Lt,children:[(0,G.jsx)(ft,{labels:a,onRemove:h}),(0,G.jsx)(St,{refEl:c,onBlur:m}),(0,G.jsx)($,{clCaption:ie,style:Pt,caption:"AddLabel",title:"Click to add a new label",timeout:400,onClick:p})]}),(0,G.jsx)(Ot,{refEl:u}),(0,G.jsx)(ht,{refBtClose:i,className:ne,onSave:x,onClose:l})]})},Gt={marginBottom:0},Vt=M((e=>{let{isShow:t,data:s,dispatch:o,onClose:l}=e;const n=ve(Ne),a=(e=>{const{title:t=""}=e,s=t.substring(0,12);return"Details: "+s+(t.length>s.length?"...":"")})(s);return(0,G.jsx)(xe,{className:"md-details",style:n.DIALOG,captionStyle:Gt,caption:a,isShow:t,withoutClose:!0,onClose:l,children:(0,G.jsxs)(ot,{width:"100%",children:[(0,G.jsx)(lt,{title:"Descr",children:(0,G.jsx)(gt,{note:s,dispatch:o,onClose:l})}),(0,G.jsx)(lt,{title:"Labels",children:(0,G.jsx)(Ht,{note:s,dispatch:o,onClose:l})})]},s.id)})})),Ft="NOTIF",Kt="SETTINGS",Xt="DETAILS",Ut={DF:ye,[Ft]:ye,[Kt]:qe,[Xt]:Vt},zt={getDialog:e=>Ut[e]||Ut.DF},Yt=(0,n.Z0)({name:"modal",initialState:{id:null,data:null},reducers:{showModal(e,t){const{id:s,data:o}=t.payload;return{id:s,data:o}}}}),{actions:Wt,reducer:Zt}=Yt,{showModal:qt}=Wt,Jt=e=>qt({id:Ft,data:e}),$t=Zt,Qt=(0,n.VP)("columns/addColumn"),es=(0,n.VP)("columns/removeColumn"),ts=(0,n.VP)("columns/moveColumn"),ss=e=>(t,s)=>({...t,[e]:s}),os=(e,t)=>(s,o,l,n,a)=>{const r=[...a[e]];r.splice(l.index,1),r.splice(n.index,0,o),s[a.id]=t(a,r)},ls=(e,t)=>(s,o,l,n,a,r)=>{const i=[...a[e]];i.splice(l.index,1);const d=[...r[e]];d.splice(n.index,0,o),s[a.id]=t(a,i),s[r.id]=t(r,d)},ns=e=>{const t=ss(e);return{idsTo:t,moveInternal:os(e,t),moveExternal:ls(e,t)}},{moveInternal:as,moveExternal:rs}=ns("columnIds"),is=(0,n.Z0)({name:"boards",initialState:x.boards,reducers:{editBoardTitle(e,t){const{boardId:s,title:o}=t.payload;e[s].title=o},addBoard(e,t){const{boardId:s}=t.payload;e[s]={id:s,title:"New Board",columnIds:[]}},removeBoard(e,t){const{boardId:s}=t.payload;delete e[s]}},extraReducers:e=>e.addCase(Qt,((e,t)=>{const{boardId:s,columnId:o}=t.payload;e[s].columnIds.push(o)})).addCase(es,((e,t)=>{const{boardId:s,columnId:o}=t.payload,l=e[s];l.columnIds=l.columnIds.filter((e=>e!==o))})).addCase(ts,((e,t)=>{const{draggableId:s,source:o,destination:l}=t.payload,n=e[o.droppableId],a=e[l.droppableId];n===a?as(e,s,o,l,n):rs(e,s,o,l,n,a)}))}),{actions:ds,reducer:cs}=is,{editBoardTitle:us}=ds,ms=cs,ps=(0,n.Z0)({name:"noteLabels",initialState:x.noteLabels,extraReducers:e=>e.addCase(Ct,((e,t)=>{const{newLabels:s}=t.payload;s.forEach((t=>{e[t.id]=t}))}))}),{reducer:hs}=ps,xs=hs,{moveInternal:gs,moveExternal:bs}=ns("noteIds"),ys={crColumn:function(e,t){return void 0===t&&(t=!0),{id:e,title:"New Topic",noteIds:[],withAdd:t}},moveExternal:bs,moveInternal:gs},{crColumn:js,moveExternal:Cs,moveInternal:vs}=ys,Ns=(0,n.Z0)({name:"columns",initialState:x.columns,reducers:{editColumnTitle(e,t){const{columnId:s,title:o}=t.payload;e[s].title=o},toggleColumn(e,t){const{columnId:s}=t.payload,o=e[s];e[s].isHide=!o.isHide},addColumn(e,t){const{columnId:s}=t.payload;e[s]=js(s)},removeColumn(e,t){const{columnId:s}=t.payload;delete e[s]}},extraReducers:e=>{e.addCase(bt,((e,t)=>{const{columnId:s,noteId:o}=t.payload;e[s].noteIds.unshift(o)})).addCase(yt,((e,t)=>{const{columnId:s,noteId:o}=t.payload,l=e[s];l.noteIds=l.noteIds.filter((e=>e!==o))})).addCase(jt,((e,t)=>{const{draggableId:s,source:o,destination:l}=t.payload,n=e[o.droppableId],a=e[l.droppableId];n===a?vs(e,s,o,l,n):Cs(e,s,o,l,n,a)}))}}),{actions:fs,reducer:Is}=Ns,{editColumnTitle:Ss,toggleColumn:_s}=fs,ws=Is,ks=(0,u.HY)({app:C,drawerMsg:k,modal:$t,boards:ms,notes:ut,noteLabels:xs,columns:ws}),Es=function(e){void 0===e&&(e="a");return e+"-"+(Date.now().toString(36)+Math.random().toString(36).substr(2,9)).toUpperCase().substr(12)},Ds={app:e=>e.app||{},modal:e=>e.modal||{},currentBoard:e=>Ds.app(e).boardId,boardIds:e=>Ds.app(e).boardIds||[],uiTheme:e=>Ds.app(e).uiTheme},As={msg:e=>e.drawerMsg||[]},Rs={boards:e=>e.boards||{},currentBoard:e=>Rs.boards(e)[Ds.currentBoard(e)]||{},board:(e,t)=>Rs.boards(e)[t]||{},columnIds:(e,t)=>Rs.board(e,t).columnIds||[],boardIds:e=>Ds.boardIds(e)},Ts=e=>e.noteLabels||{},Bs={columns:e=>e.columns||{},column:(e,t)=>Bs.columns(e)[t]||{},noteIds:(e,t)=>Bs.column(e,t).noteIds||[]},Ms={app:Ds,drawer:As,board:Rs,note:{notes:e=>e.notes||{}},column:Bs},Os=e=>{let{getState:t,dispatch:s}=e;return e=>o=>{if(o.type===m.type){if(l=t(),Ds.boardIds(l).length>=c.MAX_BOARDS)return s(Jt(c.N_MAX_BOARDS)),!1;const n=Es(c.BOARDS_PREFIX);return o.payload={boardId:n},e(o),n}var l;return e(o)}},Ls=e=>{let{getState:t,dispatch:s}=e;return e=>o=>{if(o.type===Qt.type){if(((e,t)=>Rs.columnIds(e,t).length>=c.MAX_COLUMNS)(t(),o.payload.boardId))return s(Jt(c.N_MAX_COLUMNS)),!1;const l=Es(c.COLUMNS_PREFIX);return o.payload.columnId=l,e(o),l}return e(o)}},Ps=e=>{let{getState:t,dispatch:s}=e;return e=>o=>{if(o.type===bt.type){const{columnId:l}=o.payload;if(((e,t)=>Bs.noteIds(e,t).length>=c.MAX_NOTES)(t(),l))return s(Jt(c.N_MAX_NOTES)),!1;const n=Es(c.NOTES_PREFIX);return o.payload.noteId=n,e(o),n}return e(o)}},Hs=Object.keys,Gs=e=>Hs(e).map((t=>e[t])),Vs=Array.isArray,Fs=(e,t)=>{const s=[],o=[];if(!(l=e,l&&"object"==typeof l&&Vs(t)))return{labelsTo:s,newLabels:o};var l;const n=Gs(e);return t.forEach((e=>{if(e.id)s.push(e);else{const t=n.find((e=>t=>t.title===e.title&&t.color===e.color)(e));t?(e.id=t.id,s.push(e)):(e.id=Es(c.NLABELS_PREFIX),s.push(e),o.push(e))}})),{labelsTo:s,newLabels:o}},Ks=e=>{let{getState:t,dispatch:s}=e;return e=>s=>{if(s.type===Ct.type){const e=Ts(t()),{payload:o}=s;s.payload={...o,...Fs(e,o.labels)}}return e(s)}},Xs=(0,n.VP)("app/saveBoard"),Us=(0,n.VP)("app/cleanStorage"),zs=e=>{let{getState:t,dispatch:s}=e;return e=>o=>{switch(o.type){case Xs.type:try{return window.localStorage.setItem(c.STORAGE_KEY,JSON.stringify({...t(),drawerMsg:[],modal:{id:null,data:null}})),s(_({msg:c.MSG_SAVED})),!0}catch(e){return s(_({msg:c.MSG_SAVE_FAIL})),console.log(e.msg),!1}case Us.type:try{return window.localStorage.removeItem(c.STORAGE_KEY),s(_({msg:c.MSG_CLEANED})),!0}catch(e){return s(_({msg:c.MSG_CLEAN_FAIL})),console.log(e.msg),!1}default:return e(o)}}},Ys=e=>e<10?"0"+e:""+e,Ws=()=>e=>t=>{if(t.type===_.type){const{payload:s}=t,o=Es(c.DMSG_PREFIX);return s.id=o,s.msg=(e=>{const t=new Date;return Ys(t.getHours())+":"+Ys(t.getMinutes())+" "+e})(s.msg),e(t),o}return e(t)},Zs=Array.isArray,qs=e=>{let{getState:t}=e;return e=>s=>{if(s.type===es.type){const e=Bs.noteIds(t(),s.payload.columnId);if(!Zs(e)||0!==e.length)return!1}return e(s)}},Js=Array.isArray,$s=[...[Os,Ls,Ps,Ks,zs,Ws,qs,e=>{let{getState:t}=e;return e=>s=>{if(s.type===p.type){const e=Rs.columnIds(t(),s.payload.boardId);if(!Js(e)||0!==e.length)return!1}return e(s)}},()=>e=>t=>{return t.type!==dt.type||"string"==typeof(s=t.payload.title)&&s.trim()?e(t):(t.payload.title="New Note",e(t),!1);var s}]];const Qs=(0,n.U1)({reducer:ks,preloadedState:(()=>{let e;try{const t=window.localStorage.getItem(c.STORAGE_KEY);t&&(e=JSON.parse(t))}catch(e){console.log(e.msg)}return e||x})(),devTools:!1,middleware:e=>$s});var eo=s(106);const to={BG:{},ITEM:{}},so=Object.assign,oo=[(e,t)=>{document.body.style.backgroundColor=t.BG_BODY},(e,t)=>{so(e.BG,{backgroundColor:t.BG})},(e,t)=>{so(e.ITEM,{backgroundColor:t.BG,border:"1px solid "+t.BG})}],lo={DEFAULT:"DARK",DARK:"DARK",WHITE:"WHITE",SAND:"SAND"},no={[lo.DARK]:{pallete:{BG_BODY:"#5f5f5f",BG:"#4d4d4d",BG_HEADER:"#3a6799",C_HEADER:"#8a8a8a"},clSuffix:""},[lo.WHITE]:{pallete:{BG_BODY:"#d2d2d2",BG:"#ebf1f5",BG_HEADER:"rgb(0, 150, 200)",C_HEADER:"#4d4d4d"},clSuffix:"--white"},[lo.SAND]:{pallete:{BG_BODY:"darkgrey",BG:"#e8e0cb",BG_HEADER:"rgb(0, 150, 200)",C_HEADER:"#4d4d4d"},clSuffix:"--sand"}},ao={},ro=e=>{const t=no[e],{clSuffix:s,pallete:o}=t;var l;void 0===(l=s)&&(l=""),Object.keys(ao).forEach((e=>{to[e]=ao[e]+l})),((e,t)=>{oo.forEach((s=>s(e,t)))})(to,o)},io={themeName:lo.DEFAULT,_init(){this.setThemeName(lo.DEFAULT)},getThemeName(){return this.themeName},setThemeName(e){this.themeName=lo[e]||lo.DEFAULT,ro(this.themeName)},createStyle(e){return this.themeName!==e.themeName&&(e.style=e.createStyle(to,this.themeName),e.themeName=this.themeName),e.style}};io._init();const co=io;var uo=s(403);const mo=e=>{if(!e||"object"!=typeof e)return!1;const{destination:t,source:s}=e;return!t||!s||t.droppableId===s.droppableId&&t.index===s.index},po={themeName:void 0,style:void 0,createStyle:e=>({COMP:{...e.BG}})},ho=e=>{let{className:t,style:s,children:o}=e;const l=ve(po);return(0,G.jsx)("header",{className:t,style:{...s,...l.COMP},children:o})},xo=e=>!!e,go=(e,t)=>"boolean"==typeof t?t:!e,bo=e=>(0,D.useReducer)(go,e,xo),yo={width:"auto",height:"auto"},jo={transform:"translateX(-264px)",pointerEvents:"none"},Co={transform:"translate(0px, 0px)"},vo={opacity:0,zIndex:-1,transition:"opacity 195ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"},No={opacity:1,zIndex:1e3,transition:"opacity 225ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"},fo=e=>{let{btStyle:t,captionEl:s,children:o}=e;const[l,n]=bo(!1),a=ve(po),[r,i,d]=l?[Co,No,n]:[jo,vo];return[(0,G.jsx)("button",{className:"drawer-bt",style:{...yo,...t},"aria-label":"Open Drawer",onClick:n,children:s},"bt-drawer"),(0,G.jsx)("div",{role:"presentation","aria-hidden":!l,className:"drawer-modal",style:i,onClick:d},"wrapper"),(0,G.jsx)("aside",{className:"drawer-left",style:{...r,...a.COMP},children:o},"aside")]},Io=e=>{let{className:t=ee,style:s,title:o}=e;return(0,G.jsx)("span",{className:t,style:s,title:o,children:(0,G.jsxs)("svg",{viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:"2",strokeWidth:"2",children:[(0,G.jsx)("rect",{ry:"1.8825414",rx:"194.14471",y:"1.434558",x:"19.176462",height:"12.460618",width:"10.85316",fill:"#8ecc2d",stroke:"#8ecc2d"}),(0,G.jsx)("rect",{ry:"1.87537",rx:"204.478",y:"16.639841",x:"8.8410215",height:"13.752699",width:"18.307165",fill:"#232f3b",stroke:"#232f3b"}),(0,G.jsx)("rect",{ry:"1.87537",rx:"204.478",y:"3.4229634",x:"2.5897937",height:"10.894996",width:"10.001963",fill:"#a487d4",stroke:"#a487d4"})]})})},So=Array.isArray,_o=(e,t)=>{const s=null==e?"Not Exist":(e=>{const t=e.title||"",{columnIds:s}=e;return t+" ("+(So(s)?s.length:0)+")"})(e);return(t||"Notes")+": "+s},wo=oe+" header-board__title",ko=()=>{const e=(0,l.d4)(Rs.currentBoard);return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(Io,{className:se},"logo"),(0,G.jsx)("span",{className:wo,children:_o(e)})]})},Eo="drawer",Do=Eo+"__title",Ao=Eo+"__list",Ro=Ao+"-bt",To=Ro+"__badge",Bo=e=>{let{board:t}=e;return(0,G.jsx)("div",{className:Do,children:_o(t,"Topics")})},Mo=e=>{let{isHide:t}=e;return(0,G.jsx)("span",{className:To,children:t?"H":"S"})},Oo=e=>{let{topic:t,onClick:s}=e;if(!t)return null;const{isHide:o,title:l}=t,n="Click to "+(o?"show":"hide")+" topic";return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)($,{className:Ro,caption:l,title:n,timeout:0,onClick:s}),(0,G.jsx)(Mo,{isHide:o})]})},Lo={listStyleType:"none"},Po={position:"relative"},Ho=()=>{},Go=e=>{let{board:t,columns:s,toggleColumn:o=Ho}=e;const{columnIds:l}=t;return(0,G.jsx)("ul",{style:Lo,children:(l||[]).map((e=>(0,G.jsx)("li",{style:Po,children:(0,G.jsx)(Oo,{topic:s[e],onClick:()=>o({columnId:e})})},e)))})},Vo={removeDrawerMsg:w},Fo=(0,l.Ng)((e=>({items:As.msg(e)})),Vo)((e=>{let{items:t,removeDrawerMsg:s}=e;return(0,G.jsx)("ul",{className:"drawer__msg-ul",children:t.map((e=>(0,G.jsx)("li",{className:"drawer__msg-li",children:(0,G.jsx)("button",{className:"drawer__msg-bt",onClick:()=>s({id:e.id}),children:e.msg})},e.id)))})})),Ko={toggleColumn:_s},Xo=(0,l.Ng)((e=>({board:Ms.board.currentBoard(e),columns:Ms.column.columns(e)})),Ko)((e=>{let{board:t,columns:s,toggleColumn:o}=e;return(0,G.jsxs)("div",{className:Ao,children:[(0,G.jsx)(Bo,{board:t}),(0,G.jsx)(Go,{board:t,columns:s,toggleColumn:o}),(0,G.jsx)(Fo,{})]})})),Uo=(0,G.jsx)(ko,{}),zo=()=>(0,G.jsx)(fo,{captionEl:Uo,children:(0,G.jsx)(Xo,{})}),Yo={position:"absolute",top:4,right:16},Wo={transform:"translateX(264px)",pointerEvents:"none"},Zo={transform:"translate(0px, 0px)"},qo={opacity:0,zIndex:-1,transition:"opacity 195ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"},Jo={opacity:1,zIndex:1e3,transition:"opacity 225ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"},$o=e=>{let{btStyle:t,children:s}=e;const[o,l]=bo(!1),n=ve(po),a=o?Zo:Wo,r=o?Jo:qo,i=o?l:void 0;return[(0,G.jsx)("button",{className:"drawer-bt",style:{...Yo,...t},"aria-label":"Open Drawer",onClick:l,children:(0,G.jsx)("span",{className:"drawer-span",children:(0,G.jsxs)("svg",{className:"drawer-svg",focusable:"false",viewBox:"0 0 24 24","aria-hidden":"true",children:[(0,G.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"}),(0,G.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"})]})})},"bt-drawer"),(0,G.jsx)("div",{role:"presentation","aria-hidden":!o,className:"drawer-modal",style:r,onClick:i},"wrapper"),(0,G.jsx)("aside",{className:"drawer",style:{...a,...n.COMP},children:s},"aside")]},Qo="Web App Notes v0.4.0",el="drawer__list-bt",tl={padding:"16px 0 8px 0",marginLeft:16},sl={listStyleType:"none"},ol={showSettings:()=>qt({id:Kt}),saveBoard:Xs,cleanStorage:Us},ll=(0,l.Ng)(null,ol)((e=>{let{showSettings:t,saveBoard:s,cleanStorage:o}=e;return(0,G.jsxs)("div",{className:"drawer__list",children:[(0,G.jsx)("div",{className:"header__title",style:tl,children:Qo}),(0,G.jsxs)("ul",{style:sl,children:[(0,G.jsx)("li",{children:(0,G.jsx)($,{className:el,caption:"User Settings",title:"Click to open user settings dialog",onClick:t})}),(0,G.jsx)("li",{children:(0,G.jsx)($,{className:el,caption:"Save Boards",title:"Click to save boards to localStorage",onClick:s})}),(0,G.jsx)("li",{children:(0,G.jsx)($,{className:el,caption:"Clean Storage",title:"Click to remove boards from localStorage",onClick:o})})]}),(0,G.jsx)(Fo,{})]})})),nl=()=>(0,G.jsx)($o,{children:(0,G.jsx)(ll,{})}),al=ue+" ml-8",rl=e=>{let{addColumn:t}=e;return(0,G.jsxs)(ho,{className:Q,children:[(0,G.jsx)(zo,{}),(0,G.jsx)($,{caption:"Add Topic",title:"Click to add topic to board",accessKey:"a",timeout:500,onClick:t}),(0,G.jsx)("nav",{children:(0,G.jsx)(E.k2,{to:"/boards",className:al,children:"ToBoards"})}),(0,G.jsx)(nl,{})]})},il=e=>{let{children:t}=e;return(0,G.jsx)("main",{className:"container-list",children:t})},dl=Array.isArray,cl=e=>!dl(e)||0===e.length,ul=e=>{let{className:t,style:s,svgStyle:o,title:l,onClick:n}=e;return(0,G.jsx)("button",{className:H("bt-svg-more",t),style:s,title:l,onClick:n,children:(0,G.jsxs)("svg",{style:o,width:"6px",height:"22px",viewBox:"0 0 6 22",preserveAspectRatio:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,G.jsx)("circle",{cx:"3",cy:"4",r:"2"}),(0,G.jsx)("circle",{cx:"3",cy:"11",r:"2"}),(0,G.jsx)("circle",{cx:"3",cy:"18",r:"2"})]})})},ml={paddingLeft:8,width:"100%",textAlign:"left"},pl=e=>{let{style:t,isShow:s,onHideTopic:o,onAddNote:l,onClose:n}=e;const a=ve(po);return(0,G.jsxs)(Oe,{className:le,style:{...t,...a.COMP},isShow:s,onClose:n,children:[(0,G.jsx)($,{style:ml,caption:"Hide Topic",title:"Click to hide Topic",onClick:o}),(0,G.jsx)($,{style:ml,caption:"Add Note",title:"Click to add new Note",timeout:100,onClick:l})]})},hl={themeName:void 0,style:void 0,createStyle:e=>({ITEM:{...e.ITEM}})},xl={display:"none"},gl={padding:"8px 0",lineHeight:"36px"},bl={display:"inline-block",paddingLeft:12,fontWeight:600},yl={Item:e=>{let{isHide:t,children:s}=e;const o=ve(hl),l=z(o.ITEM,[t,xl]);return(0,G.jsx)("section",{className:ae,style:l,children:s})},Header:e=>{let{children:t}=e;return(0,G.jsx)("div",{style:gl,children:t})},Title:e=>(0,G.jsx)(St,{className:re,...e}),Counter:e=>{let{style:t,value:s}=e;return(0,G.jsx)("span",{style:{...bl,...t},children:s})},BtCircle:e=>{let{style:t,caption:s,title:o,tabIndex:l="-1",onClick:n}=e;return(0,G.jsx)("button",{className:"bt-circle",style:t,tabIndex:l,title:o,onClick:n,children:s})}},jl={ROOT:{minHeight:100},DRAGGING_OVER:{border:"2px dashed lightgreen"},NOT_DRAGGING_OVER:{border:"2px dashed transparent"}},Cl=e=>{const{className:t,style:s,innerRef:o,isDraggingOver:l,notDraggingStyle:n,children:a,...r}=e,i=((e,t)=>e?jl.DRAGGING_OVER:t||jl.NOT_DRAGGING_OVER)(l,n);return(0,G.jsx)("div",{...r,ref:o,className:t,style:{...jl.ROOT,...s,...i},children:a})},vl=(e,t)=>s=>{const{draggableProps:o,innerRef:l,isDragging:n,dragHandleProps:a,...r}=s,{dragBg:i,notDragBg:d,isDragHanlerProps:c}=t||{},{style:u,...m}=o,p=function(e,t,s){return void 0===t&&(t="#1e90ff"),void 0===s&&(s="transparent"),{backgroundColor:e?t:s}}(n,i,d),h=c?void 0:a;return(0,G.jsx)("div",{ref:l,style:{...u,...p},...m,...h,children:(0,G.jsx)(e,{dragHandleProps:c?a:void 0,...r})})},Nl=(e,t)=>"function"==typeof e?vl(e,t):t=>vl(t,e),fl=e=>{let{isDetails:t,...s}=e;const o=H("note__handle",[t,"note__handle--open"]);return(0,G.jsx)("span",{className:o,...s})},Il={paddingLeft:8,width:"100%",textAlign:"left"},Sl=e=>{let{isShow:t,className:s,style:o,onClose:l,onEdit:n,onRemove:a}=e;const r=ve(po),i=H(le,s);return(0,G.jsxs)(Oe,{className:i,style:{...o,...r.COMP},isShow:t,onClose:l,children:[(0,G.jsx)($,{style:Il,caption:"Edit Details",onClick:n}),(0,G.jsx)($,{style:Il,caption:"Remove Note",onClick:a})]})},_l=e=>{let{dragHandleProps:t,isDetails:s,onClickHandle:o,refTitle:l,noteTitle:n,onBlurTitle:a,isMenuMore:r,onClickMenuMore:i,onCloseMenuMore:d,onEditDetails:c,onRemoveNote:u}=e;return(0,G.jsxs)("div",{children:[(0,G.jsx)(fl,{...t,isDetails:s,onClick:o}),(0,G.jsx)(St,{refEl:l,className:"note__caption",initialValue:n,onBlur:a}),(0,G.jsx)(ul,{className:"note__bt-more",title:"Click to open note menu",onClick:i}),r&&(0,G.jsx)(Sl,{isShow:r,className:"note__menu-more",onClose:d,onEdit:c,onRemove:u})]})},wl=e=>{let{isShow:t,note:s,editDetails:o}=e;const l=xt(s);return(0,G.jsx)(He,{className:"note__details",isShow:t,children:(0,G.jsxs)("div",{onClick:o,children:[(0,G.jsx)(ft,{labels:s.labels}),(0,G.jsx)("div",{children:l})]})})},kl=e=>{const{columnId:t,note:s,dragHandleProps:o}=e,{id:n,title:a}=s,r=(0,D.useRef)(),[i,d,c]=Se(),[u,m]=bo(),p=(0,l.wA)(),h=(0,D.useCallback)((()=>{p(yt({columnId:t,noteId:n}))}),[t]),x=(0,D.useCallback)((e=>{const t=e.target.value;if(t)t!==a&&p(dt({noteId:n,title:t}));else{const e=A(r);e&&e.setValue(a)}}),[a]),g=(0,D.useCallback)((()=>{p(qt({id:Xt,data:s})),c()}),[s]);return(0,G.jsxs)("div",{className:"note",id:n,children:[(0,G.jsx)(_l,{dragHandleProps:o,isDetails:u,onClickHandle:m,refTitle:r,noteTitle:a,onBlurTitle:x,isMenuMore:i,onClickMenuMore:d,onCloseMenuMore:c,onEditDetails:g,onRemoveNote:h}),(0,G.jsx)(wl,{isShow:u,note:s,editDetails:g})]})},El=Nl({notDragBg:"#9e9e9e",isDragHanlerProps:!0})(kl);El.displayName="DnDNote";const Dl=El,Al={minHeight:50},Rl={border:"2px solid #9e9e9e"},Tl=e=>{let{cId:t,noteIds:s,notes:o}=e;return(0,G.jsx)(uo.gL,{droppableId:t,children:(e,l)=>(e=>{let{provided:t,snapshot:s,noteIds:o,notes:l,cId:n}=e;return(0,G.jsxs)(Cl,{...t.droppableProps,innerRef:t.innerRef,isDraggingOver:s.isDraggingOver,style:Al,notDraggingStyle:Rl,children:[o.map(((e,t)=>(0,G.jsx)(uo.sx,{draggableId:e,index:t,children:(t,s)=>(0,G.jsx)(Dl,{draggableProps:t.draggableProps,innerRef:t.innerRef,isDragging:s.isDragging,dragHandleProps:t.dragHandleProps,note:l[e],columnId:n})},e))),t.placeholder]})})({provided:e,snapshot:l,noteIds:s,notes:o,cId:t})})},Bl={marginRight:8},Ml={position:"absolute",width:150},Ol=e=>{let{boardId:t,column:s,notes:o,addNote:n}=e;const{id:a,isHide:r,title:i,withAdd:d,noteIds:c}=s,[u,m,p]=Se(),h=(0,l.wA)(),x=(0,D.useCallback)((()=>{h(_s({columnId:a}))}),[a]),g=(0,D.useCallback)((()=>{n({columnId:a})}),[n,a]),b=(0,D.useCallback)((e=>{h(Ss({columnId:a,title:e.target.value}))}),[a]),y=(0,D.useCallback)((()=>{h(es({boardId:t,columnId:a}))}),[t,a]),j=c.length;return(0,G.jsxs)(yl.Item,{isHide:r,children:[(0,G.jsxs)(yl.Header,{children:[(0,G.jsx)(ul,{style:Bl,title:"Click to open topic menu",onClick:m}),u&&(0,G.jsx)(pl,{style:Ml,isShow:u,onAddNote:g,onHideTopic:x,onClose:p}),(0,G.jsx)(yl.Title,{initialValue:i,onBlur:b}),(0,G.jsx)(yl.Counter,{value:j}),d&&(0,G.jsx)($,{clCaption:ie,caption:"AddNote",title:"Click to add a new note",timeout:1e3,onClick:g})]}),(0,G.jsx)(Tl,{cId:a,noteIds:c,notes:o}),(0,G.jsx)("div",{children:cl(c)&&(0,G.jsx)($,{clCaption:ie,caption:"Remove Topic",onClick:y})})]})},Ll=e=>{let{boardId:t,columnIds:s,columns:o,notes:l,addNote:n}=e;return(s||[]).map((e=>{const s=o[e];return(0,G.jsx)(Ol,{boardId:t,column:s,notes:l,addNote:n},s.id)}))},Pl={moveNote:jt,addNote:bt,addColumn:Qt},Hl=(0,l.Ng)((e=>({board:Ms.board.currentBoard(e),notes:Ms.note.notes(e),columns:Ms.column.columns(e)})),Pl)((e=>{let{board:t,notes:s,columns:o,addNote:l,moveNote:n,addColumn:a}=e;const{id:r,columnIds:i}=t,d=(0,D.useCallback)((e=>{mo(e)||n(e)}),[]),c=(0,D.useCallback)((()=>{a({boardId:r})}),[]);return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(rl,{addColumn:c}),(0,G.jsx)(uo.JY,{onDragEnd:d,children:(0,G.jsx)(il,{children:(0,G.jsx)(Ll,{boardId:r,columnIds:i,columns:o,notes:s,addNote:l})})})]})})),Gl={addBoard:m},Vl=(0,l.Ng)(null,Gl)((e=>{let{style:t,addBoard:s}=e;return(0,G.jsxs)(ho,{className:Q,style:t,children:[(0,G.jsx)(Io,{title:Qo}),(0,G.jsx)("span",{className:te}),(0,G.jsx)("span",{className:oe,children:"Notes: Boards"}),(0,G.jsx)($,{caption:"Add Board",title:"Click to add new board",accessKey:"a",isEvent:!1,timeout:200,onClick:s}),(0,G.jsx)(nl,{})]})})),Fl={float:"right",paddingRight:12},Kl=Nl((e=>{let{title:t,count:s}=e;return(0,G.jsxs)("div",{className:"topic",children:[(0,G.jsx)("span",{children:t}),(0,G.jsx)(yl.Counter,{style:Fl,value:s})]})}));Kl.displayName="DnDTopic";const Xl=Kl,Ul=e=>{let{id:t,columnIds:s,columns:o}=e;return(0,G.jsx)(uo.gL,{droppableId:t,children:(e,t)=>(e=>{let{provided:t,snapshot:s,columnIds:o,columns:l}=e;return(0,G.jsxs)(Cl,{...t.droppableProps,innerRef:t.innerRef,isDraggingOver:s.isDraggingOver,children:[o.map(((e,t)=>(0,G.jsx)(uo.sx,{draggableId:e,index:t,children:(t,s)=>{return(0,G.jsx)(Xl,{draggableProps:t.draggableProps,innerRef:t.innerRef,isDragging:s.isDragging,dragHandleProps:t.dragHandleProps,...(o=l[e],{title:o.title,count:o.noteIds.length})});var o}},e))),t.placeholder]})})({provided:e,snapshot:t,columnIds:s,columns:o})})},zl={margin:"8px 8px 4px 0"},Yl=e=>{let{id:t}=e;const s=(0,l.wA)(),[o,n,a,r]=(0,D.useMemo)((()=>[e=>s(us({boardId:t,title:e.target.value})),()=>s(p({boardId:t})),()=>s(h({boardId:t})),e=>Rs.board(e,t)]),[t,s]),i=(0,l.d4)(r),d=(0,l.d4)(Bs.columns),{columnIds:c}=i;return(0,G.jsxs)(yl.Item,{children:[(0,G.jsxs)(yl.Header,{children:[(0,G.jsx)(yl.Title,{initialValue:i.title,onBlur:o}),(0,G.jsx)(yl.Counter,{value:c.length})]}),(0,G.jsx)(Ul,{id:t,columnIds:c,columns:d}),(0,G.jsx)(E.k2,{to:"/boards/"+t,className:ue,style:zl,onClick:a,children:"ToNotes"}),(0,G.jsx)("div",{children:cl(c)&&(0,G.jsx)($,{clCaption:ie,caption:"Remove Board",onClick:n})})]})},Wl=(0,l.Ng)((e=>({boardIds:Rs.boardIds(e),boards:Rs.boards(e)})))((e=>{let{boardIds:t,boards:s}=e;return t.map((e=>(0,G.jsx)(Yl,{id:e},e)))})),Zl={moveColumn:ts},ql=(0,l.Ng)(null,Zl)((e=>{let{moveColumn:t}=e;const s=(0,D.useCallback)((e=>{mo(e)||t(e)}),[t]);return[(0,G.jsx)(Vl,{},"header"),(0,G.jsx)(uo.JY,{onDragEnd:s,children:(0,G.jsx)(il,{children:(0,G.jsx)(Wl,{})})},"ddc")]})),Jl="modal-root",$l=Jl+" show-modal",Ql={display:"block"},en={display:"none"},tn=e=>{let{isShow:t,onClose:s,children:o}=e;const[l,n]=t?[$l,Ql]:[Jl,en];return(0,G.jsx)("div",{role:"presentation",className:l,style:n,onClick:s,children:o})},sn=e=>{let{TS:t,store:s,shows:o,data:l,dialogs:n,onClose:a}=e;return n.map((e=>{const{type:n,comp:r}=e;return(0,D.createElement)(r,{TS:t,key:n,isShow:o[n],data:l[n],store:s,dispatch:s.dispatch,onClose:a.bind(null,n)})}))},on=(0,D.memo)((e=>{let{store:t}=e;const s=ve(Ne),o=(0,D.useRef)(),[l,n]=(0,D.useState)({isShow:!1,currentDialog:null,dialogs:[],inits:{},shows:{},data:{}}),a=(0,D.useCallback)((e=>{n((t=>(t.shows[e]=!1,{...t,isShow:!1,currentDialog:null,shows:t.shows})))}),[]);(0,D.useEffect)((()=>t.subscribe((()=>{const e=Ds.modal(t.getState()),{id:s,data:l={}}=e,a=A(o);s&&a!==e&&(R(o,e),n((e=>{const{inits:t,shows:o,data:n,dialogs:a}=e;return t[s]||(a.push({type:s,comp:zt.getDialog(s)}),t[s]=!0),o[s]=!0,n[s]=l,{isShow:!0,currentDialog:s,shows:o,data:n,dialogs:a,inits:t}})))}))),[]);const{isShow:r,currentDialog:i,shows:d,data:c,dialogs:u}=l;return(0,G.jsx)(tn,{isShow:r,onClose:a.bind(null,i),children:(0,G.jsx)(sn,{TS:s,store:t,shows:d,data:c,dialogs:u,onClose:a})})})),ln=on,nn=e=>{let{basename:t,store:s}=e;const[o,n]=(0,D.useState)(co),a=(0,l.d4)(Ds.uiTheme);return(0,D.useEffect)((()=>{o.getThemeName!==a&&(o.setThemeName(a),n({...o}))}),[a]),(0,G.jsx)(D.StrictMode,{children:(0,G.jsx)(E.Kd,{basename:t,children:(0,G.jsxs)(Ce.Provider,{value:o,children:[(0,G.jsx)(ln,{store:s}),(0,G.jsxs)(eo.BV,{children:[(0,G.jsx)(eo.qh,{path:"/boards/:id",element:(0,G.jsx)(Hl,{})}),(0,G.jsx)(eo.qh,{path:"/boards",element:(0,G.jsx)(ql,{})}),(0,G.jsx)(eo.qh,{path:"/",element:(0,G.jsx)(eo.C5,{to:"/boards",replace:!0})})]})]})})})},an=((window||{}).location||{}).pathname;(0,o.H)(document.getElementById("app")).render((0,G.jsx)(l.Kq,{store:Qs,children:(0,G.jsx)(nn,{basename:an,store:Qs})}))},338:(e,t,s)=>{var o=s(961);t.H=o.createRoot,o.hydrateRoot},20:(e,t,s)=>{var o=s(540),l=Symbol.for("react.element"),n=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,r=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function d(e,t,s){var o,n={},d=null,c=null;for(o in void 0!==s&&(d=""+s),void 0!==t.key&&(d=""+t.key),void 0!==t.ref&&(c=t.ref),t)a.call(t,o)&&!i.hasOwnProperty(o)&&(n[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===n[o]&&(n[o]=t[o]);return{$$typeof:l,type:e,key:d,ref:c,props:n,_owner:r.current}}t.Fragment=n,t.jsx=d,t.jsxs=d},848:(e,t,s)=>{e.exports=s(20)}},e=>{var t;t=560,e(e.s=t)}]);