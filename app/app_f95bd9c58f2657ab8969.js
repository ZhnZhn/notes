/*! For license information please see app_f95bd9c58f2657ab8969.js.LICENSE.txt */
"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([[143],{431:(e,t,n)=>{var o=n(935),r=n(216),i=n(403),s=function(e,t){return"Max number ("+t+") of "+e+" reached."},a=8,l=8,c=12;const d={STORAGE_KEY:"notes-manager",DMSG_PREFIX:"m",MSG_SAVED:"Boards saved",MSG_SAVE_FAIL:"Boards not saved",MSG_CLEANED:"localStorage cleaned",MSG_CLEAN_FAIL:"localStorage not cleaned",BOARDS_PREFIX:"b",MAX_BOARDS:a,N_MAX_BOARDS:{descr:s("boards",a)},MAX_COLUMNS:l,COLUMNS_PREFIX:"c",N_MAX_COLUMNS:{descr:s("columns",l)},MAX_NOTES:c,NOTES_PREFIX:"n",N_MAX_NOTES:{descr:s("notes",c)},NLABELS_PREFIX:"nl"};var u=n(857),p=(0,i.PH)("boards/addBoard"),f=(0,i.PH)("boards/removeBoard"),h=(0,i.PH)("boards/setCurrentBoard");const m={app:{boardId:"b-1",boardIds:["b-1"],uiTheme:"DARK"},drawerMsg:[],modal:{id:void 0,data:void 0},boards:{"b-1":{id:"b-1",title:"Board 1",columnIds:["c-1","c-2"]}},notes:{},noteLabels:{},columns:{"c-1":{id:"c-1",title:"Topic 1",noteIds:[],withAdd:!0},"c-2":{id:"c-2",title:"Topic 2",noteIds:[]}}};var v=(0,i.oM)({name:"app",initialState:m.app,reducers:{setUiTheme:function(e,t){var n=t.payload.uiTheme;e.uiTheme=n}},extraReducers:function(e){return e.addCase(p,(function(e,t){var n=t.payload.boardId;e.boardIds.push(n)})).addCase(f,(function(e,t){var n=t.payload.boardId;e.boardIds=e.boardIds.filter((function(e){return e!==n}))})).addCase(h,(function(e,t){var n=t.payload.boardId;e.boardId=n}))}}),g=v.actions,x=v.reducer,b=g.setUiTheme;const C=x;var y=function(e,t){return{id:e,msg:t}},_=(0,i.oM)({name:"drawerMsg",initialState:m.drawerMsg,reducers:{addDrawerMsg:function(e,t){var n=t.payload,o=n.id,r=n.msg;e.unshift(y(o,r))},removeDrawerMsg:function(e,t){var n=t.payload.id;return e.filter((function(e){return e.id!==n}))}}}),j=_.actions,N=_.reducer,S=j.addDrawerMsg,I=j.removeDrawerMsg;const w=N;var D=n(294),T=function(e){return(e||{}).current},E=function(e,t){return e.isShow===t.isShow};const A=function(e){return(0,D.memo)(e,E)};var M=n(462),k=n(721),R=Array.isArray,B=function(e){return R(e)?e[0]?e[1]:"":e||""};const O=function(e,t){var n=B(e),o=B(t);return n?o?n+" "+o:n:o||void 0};var L=n(893);const H=function(e){var t=e.className,n=e.style,o=e.tabIndex,r=e.onClose;return(0,L.jsx)("button",{tabIndex:o,className:O("bt-svg-close",t),style:n,onClick:r,children:(0,L.jsxs)("svg",{viewBox:"0 0 12 12",width:"100%",height:"100%",preserveAspectRatio:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,L.jsx)("path",{d:"M 0,0 L 12,12"}),(0,L.jsx)("path",{d:"M 12,0 L 0,12"})]})})};const P=function(e){var t=e.rootStyle,n=(e.svgStyle,e.caption),o=e.onClose,r=e.children;return(0,L.jsxs)("div",{className:"dialog__header",style:t,children:[(0,L.jsx)("span",{className:"dialog__caption not-selected",children:n}),r,(0,L.jsx)(H,{className:"dialog__svg-close",onClose:o})]})};const G=function(e,t,n){void 0===t&&(t=3e3),void 0===n&&(n=!0);var o=(0,D.useRef)(null);return(0,D.useCallback)((function(r){var i=n?r:void 0;if(0!==t){var s=o.current,a=r.timeStamp;(null==s||a-s>t)&&(e(i),o.current=a)}else e(i)}),[n,t,e])};var Z=Array.isArray,F=function(e){return Z(e)?e[0]?e[1]:void 0:e||void 0};const U=function(){var e=F(arguments.length<=0?void 0:arguments[0]),t=F(arguments.length<=1?void 0:arguments[1]);return e?t?(0,M.Z)({},e,t):e:t||void 0};var K={textDecoration:"underline"},X=function(e,t){var n=function(e,t){return e?t.toLowerCase().indexOf(e):-1}(e,t);if(-1===n)return t;var o=t.substring(0,n),r=t.substring(n,n+1),i=t.substring(n+1);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)("span",{children:o}),(0,L.jsx)("span",{style:K,children:r}),(0,L.jsx)("span",{children:i})]})};const V=function(e){var t=e.className,n=e.caption,o=e.accessKey,r=e.children;return n?(0,L.jsxs)("span",{className:t,children:[X(o,n),r]}):null};var z={color:"#607d8b"};const W=(0,D.forwardRef)((function(e,t){var n=e.timeout,o=e.className,r=e.style,i=e.clDiv,s=void 0===i?"bt-flat__div":i,a=e.clCaption,l=e.isPrimary,c=e.title,d=void 0===c?"":c,u=e.caption,p=e.accessKey,f=e.children,h=e.isEvent,m=e.onClick,v=G(m,n,h),g=O("bt-flat",o),x=O("bt-flat__span",a),b=U(r,[l,z]),C=function(e,t){return t?e+" ["+t+"]":e}(d,p);return(0,L.jsx)("button",{ref:t,className:g,style:b,accessKey:p,title:C,onClick:v,children:(0,L.jsxs)("div",{className:s,children:[(0,L.jsx)(V,{className:x,caption:u,accessKey:p}),f]})})}));var $="modal-dialog",Y={display:"block"},J={display:"none"},q={opacity:0,transform:"scaleY(0)"},Q=function(e){function t(t){var n;return(n=e.call(this,t)||this)._hClickDialog=function(e){e.stopPropagation()},n._refBtClose=function(e){return n._btClose=e},n._renderCommandButton=function(){var e=n.props,t=e.commandButtons,o=e.withoutClose,r=e.onClose;return(0,L.jsxs)("div",{className:"md__actions",children:[t,!o&&(0,L.jsx)(W,{ref:n._refBtClose,caption:"Close",timeout:0,onClick:r})]})},n.wasClosing=!1,n}(0,k.Z)(t,e);var n=t.prototype;return n.shouldComponentUpdate=function(e,t){return e===this.props||!e.isNotUpdate},n.focusBtClose=function(){this.props.isFocusClose&&this._btClose&&this._btClose.focus()},n.componentDidMount=function(){this.focusBtClose()},n.componentDidUpdate=function(e,t){var n=this,o=this.props,r=o.timeout,i=o.isShow;e.isShow&&!i&&(this.wasClosing=!0,setTimeout((function(){n.setState({})}),r)),!1===e.isShow&&i&&this.focusBtClose()},n.render=function(){var e,t,n=this.props,o=n.className,r=n.style,i=n.isShow,s=n.isWithButton,a=n.caption,l=n.captionStyle,c=n.children,d=n.onClose;return this.wasClosing?(t=J,this.wasClosing=!1):(e=i?$+" "+o+" show-popup":$+" "+o+" hide-popup",t=i?Y:q),(0,L.jsxs)("div",{role:"dialog",className:e,style:(0,M.Z)({},r,t),onClick:this._hClickDialog,children:[(0,L.jsx)(P,{rootStyle:l,caption:a,onClose:d}),(0,L.jsx)("div",{children:c}),s&&this._renderCommandButton()]})},t}(D.Component);Q.defaultProps={className:"",isWithButton:!0,isNotUpdate:!1,isFocusClose:!0,timeout:450};const ee=Q;var te="d-notif__row";const ne=A((function(e){var t=e.isShow,n=e.data,o=e.TS,r=e.onClose,i=n||{},s=i.caption,a=void 0===s?"":s,l=i.descr,c=void 0===l?"":l;return(0,L.jsxs)(ee,{style:o.DIALOG,caption:"Notification",isShow:t,onClose:r,children:[a&&(0,L.jsx)("div",{className:te,children:(0,L.jsx)("p",{className:"d-notif__caption",children:a})}),(0,L.jsx)("div",{className:te,children:(0,L.jsx)("p",{className:"d-notif__descr",children:c})})]})}));const oe=(0,D.createContext)();const re=function(e){return(0,D.useContext)(oe).createStyle(e)};var ie={themeName:void 0,style:void 0,createStyle:function(e){return{DIALOG:(0,M.Z)({},e.BG),SELECT:{MODAL_PANE:(0,M.Z)({},e.BG)}}}};const se=ie;var ae={app:function(e){return e.app||{}},currentBoard:function(e){return ae.app(e).boardId},boardIds:function(e){return ae.app(e).boardIds||[]},uiTheme:function(e){return ae.app(e).uiTheme}},le={msg:function(e){return e.drawerMsg||[]}},ce={boards:function(e){return e.boards||{}},currentBoard:function(e){return ce.boards(e)[ae.currentBoard(e)]||{}},board:function(e,t){return ce.boards(e)[t]||{}},columnIds:function(e,t){return ce.board(e,t).columnIds||[]},boardIds:function(e){return ae.boardIds(e)}},de=function(e){return e.noteLabels||{}},ue={columns:function(e){return e.columns||{}},column:function(e,t){return ue.columns(e)[t]||{}},noteIds:function(e,t){return ue.column(e,t).noteIds||[]}};const pe={app:ae,drawer:le,board:ce,note:{notes:function(e){return e.notes||{}}},column:ue};var fe="m-select";const he=function(){return(0,L.jsx)("svg",{className:"m-select__svg-arrow",viewBox:"0 0 24 24",children:(0,L.jsx)("path",{d:"M7 10l5 5 5-5z"})})};var me=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this)._isEventTargetOutside=function(e){return t.rootNode&&t.rootNode.contains&&!t.rootNode.contains(e.target)},t._hClickOutside=function(e){var n=t.props.onClose;t._isEventTargetOutside(e)&&(e.stopPropagation(),n(e))},t._addOutsideListener=function(){document.addEventListener("click",t._hClickOutside,!0)},t._removeOutsideListener=function(){document.removeEventListener("click",t._hClickOutside,!0)},t._initShowMode=function(){t._addOutsideListener(),t.rootNode&&t.rootNode.focus()},t._hKeyDown=function(e){"Escape"===e.key&&(e.preventDefault(),t.props.onClose(e))},t._refRootNode=function(e){return t.rootNode=e},t}(0,k.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.isShow&&this._initShowMode()},n.componentWillUnmount=function(){this._removeOutsideListener()},n.componentDidUpdate=function(e){this.props!==e&&(this.props.isShow?this._initShowMode():this._removeOutsideListener())},n.render=function(){var e=this.props,t=e.className,n=e.style,o=e.children;return(0,L.jsx)("div",{ref:this._refRootNode,className:t,style:n,tabIndex:"0",onKeyDown:this._hKeyDown,children:o})},t}(D.Component);me.defaultProps={onClose:function(){}};const ve=me;var ge={display:"block"},xe={display:"none"};const be=function(e){var t=e.isShow,n=e.className,o=e.style,r=e.children,i=O(n,[t,"show-popup"]),s=U(o,t?ge:xe);return(0,L.jsx)("div",{className:i,style:s,children:r})};var Ce={position:"absolute",top:12,zIndex:20,width:"100%",paddingTop:12,paddingBottom:12,lineHeight:1.8,backgroundColor:"rgb(77, 77, 77)",borderRadius:2,boxShadow:"rgba(0, 0, 0, 0.3) 0px 2px 2px 0px, rgba(0, 0, 0, 0.1) 0px 0px 0px 1px"},ye={lineHeight:2.2,paddingLeft:12},_e={color:"greenyellow"},je=function(e,t,n,o,r){return e.map((function(e){var r,i=U(ye,[e.value===t.value,_e]),s=o.bind(null,e),a=(r=s,function(e){13===e.which&&r(e)});return(0,L.jsx)("div",{role:"button",tabIndex:"0",style:i,className:n,onClick:s,onKeyPress:a,children:e.caption},e.value)}))};const Ne=function(e){var t=e.isShow,n=e.options,o=e.item,r=e.rootStyle,i=e.clItem,s=e.onSelect,a=e.onClose;return(0,L.jsx)(ve,{isShow:t,style:r,onClose:a,children:(0,L.jsx)(be,{isShow:t,style:(0,M.Z)({},Ce,r),children:je(n,o,i,s)})})};var Se=function(e){function t(t){var n;return(n=e.call(this)||this)._handleOpen=function(){n.setState({isShow:!0})},n._handleClose=function(){n.setState({isShow:!1})},n._handleSelect=function(e,t){t.stopPropagation(),n.props.onSelect(e),n.setState({isShow:!1,item:e})},n.state={isShow:!1,item:t.initItem},n}return(0,k.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.caption,n=e.options,o=e.styleConfig,r=void 0===o?{}:o,i=this.state,s=i.isShow,a=i.item;return(0,L.jsxs)("div",{className:fe,style:r.ROOT,onClick:this._handleOpen,children:[(0,L.jsx)(Ne,{rootStyle:r.MODAL_PANE,isShow:s,item:a,options:n,clItem:r.CL_ITEM,onSelect:this._handleSelect,onClose:this._handleClose}),(0,L.jsx)("label",{className:"m-select__label",children:t}),(0,L.jsxs)("div",{className:"m-select__div",children:[(0,L.jsx)("div",{className:"m-select__div__value",children:a.caption}),(0,L.jsx)("button",{className:"m-select__div__bt",tabIndex:"0",children:(0,L.jsx)("div",{children:(0,L.jsx)(he,{})})}),(0,L.jsx)("div",{className:"m-select__line"})]})]})},t}(D.Component);Se.defaultProps={initItem:{caption:"",value:""}};const Ie=Se;var we={caption:"Dark",value:"DARK"},De=[{caption:"Dark",value:"DARK"},{caption:"Light",value:"WHITE"},{caption:"Sand",value:"SAND"}],Te=A((function(e){var t=e.isShow,n=e.store,o=e.dispatch,r=e.onClose,i=(0,D.useState)((function(){return function(e){if(!e)return we;var t=De.find((function(t){return t.value===e}));return t?(0,M.Z)({},t):we}(ae.uiTheme(n.getState()))})),s=i[0],a=i[1],l=re(se),c=(0,D.useCallback)((function(e){var t=e.value;t!==s&&(o(b({uiTheme:t})),a(t))}),[]);return(0,L.jsx)(ee,{className:"md-settings",style:l.DIALOG,caption:"User Settings",isShow:t,onClose:r,children:(0,L.jsx)("div",{children:(0,L.jsx)(Ie,{styleConfig:l.SELECT,caption:"UI Theme (Default: Dark)",initItem:s,options:De,onSelect:c})})})}));const Ee=Te;var Ae={listStyle:"outside none none",marginTop:4,marginLeft:12,marginRight:5,marginBottom:8,textAlign:"left"},Me={width:"100%",height:"100%"},ke={display:"block",width:"100%",height:"100%"},Re={display:"none"},Be=function(e,t,n){return e.map((function(e,o){return(0,D.cloneElement)(e,{key:o,id:o,onClick:function(){return n(o)},isSelected:o===t})}))},Oe=function(e,t){return e.map((function(e,n){var o=n===t,r=o?ke:Re;return(0,L.jsx)("div",{style:r,role:"tabpanel",id:"tabpanel-"+n,"aria-labelledby":"tab-"+n,children:(0,D.cloneElement)(e.props.children,{key:"comp"+n,isSelected:o})},"a"+n)}))};const Le=(0,D.forwardRef)((function(e,t){var n=e.width,o=e.height,r=e.tabsStyle,i=e.children,s=(0,D.useState)(0),a=s[0],l=s[1];return(0,D.useImperativeHandle)(t,(function(){return{getSelectedTabIndex:function(){return a}}}),[a]),(0,L.jsxs)("div",{style:{width:n,height:o},children:[(0,L.jsx)("ul",{style:(0,M.Z)({},Ae,r),children:Be(i,a,l)}),(0,L.jsx)("div",{style:Me,children:Oe(i,a)})]})}));const He=function(e){var t=e.id,n=e.title,o=e.isSelected,r=e.onClick,i=O("tab not-selected",[o,"tab--selected"]),s=function(){o||r()};return(0,L.jsx)("li",{role:"tab",tabIndex:0,className:i,id:"tab-"+t,"aria-selected":o,"aria-controls":"tabpanel-"+t,onClick:s,onKeyDown:function(e){(function(e){return""===e.key||32===e.keyCode})(e)&&s()},children:(0,L.jsx)("span",{children:n})})};const Pe=function(e,t,n){return(0,D.useEffect)((function(){var e=T(e);t&&e&&e.focus()}),[n])};var Ge=(0,i.oM)({name:"notes",initialState:{},reducers:{addNote:function(e,t){var n=t.payload.noteId;e[n]=function(e){return{id:e,title:"New Note"}}(n)},deleteNote:function(e,t){delete e[t.payload.noteId]},editNoteTitle:function(e,t){var n=t.payload,o=n.noteId,r=n.title;e[o].title=r},editNoteDescr:function(e,t){var n=t.payload,o=n.noteId,r=n.descr;e[o].descr=r},editNoteLabels:function(e,t){var n=t.payload,o=n.noteId,r=n.labelsTo;e[o].labels=r}}}),Ze=Ge.reducer,Fe=Ge.actions,Ue=Fe.editNoteTitle,Ke=Fe.editNoteDescr;const Xe=Ze;const Ve=function(e){return"Delete"===e.key||46===e.keyCode};const ze=(0,D.forwardRef)((function(e,t){var n=e.className,o=e.style,r=e.initialValue,i=e.maxLength,s=(0,D.useRef)(),a=(0,D.useState)(r),l=a[0],c=a[1],d=(0,D.useCallback)((function(e){c(e.target.value)}),[]),u=(0,D.useCallback)((function(e){Ve(e)&&c("")}));return(0,D.useImperativeHandle)(t,(function(){return{getValue:function(){return l},focus:function(){var e=T(s);e&&e.focus()}}}),[l]),(0,L.jsx)("textarea",{ref:s,className:n,style:o,value:l,maxLength:i,onChange:d,onKeyDown:u})}));const We=function(e){var t=e.refBtClose,n=e.className,o=e.onSave,r=e.onClose;return(0,L.jsxs)("div",{className:n,children:[(0,L.jsx)(W,{caption:"Save",timeout:100,onClick:o}),(0,L.jsx)(W,{ref:t,caption:"Close",timeout:0,onClick:r})]})};const $e=function(e){return"object"!=typeof e||null==e?"This note is not exist.":e.descr||"Edit description..."};const Ye=function(e){var t=e.isSelected,n=e.note,o=e.dispatch,r=e.onClose,i=n.id,s=(0,D.useRef)(null),a=(0,D.useRef)(null),l=(0,D.useCallback)((function(){o(Ke({noteId:i,descr:T(a).getValue()}))}),[i]);Pe(s,t,e);var c=$e(n);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(ze,{ref:a,className:"md-details__descr",maxLength:250,initialValue:c},i),(0,L.jsx)(We,{refBtClose:s,className:"md__actions",onSave:l,onClose:r})]})};var Je=(0,i.PH)("notes/addNote"),qe=(0,i.PH)("notes/deleteNote"),Qe=(0,i.PH)("notes/moveNote"),et=(0,i.PH)("notes/editNoteLabels");const tt=function(e){var t=e.className,n=e.clClose,o=e.item,r=e.onRemove;return(0,L.jsxs)("button",{className:t,style:{backgroundColor:o.color},onClick:r,children:[o.title,r&&(0,L.jsx)("span",{className:n,children:"x"})]})};const nt={HEADER:"header",LOGO:"header__logo-notes",TITLE_GAP:"header__title-gap",LOGO_BOARD:"header-board__logo_notes",HEADER_TITLE:"header__title",TITLE_BOARD:"header-board__title",CONT:"container-list",MODAL_PANE:"modal-pane",MD_ACTIONS:"md__actions",ITEM_CARD:"card",CARD_TITLE:"card__title",CARD_BT:"bt__card",NOTE_LABEL:"note__label",NOTE_LABEL_CLOSE:"note__label__close",INPUT:"input-text",BT_CIRCLE:"bt-circle",NAV_LINK:"nav-link",ML_8:"ml-8"};var ot={paddingBottom:4};const rt=function(e){var t=e.labels,n=e.onRemove;return(0,L.jsx)("div",{style:ot,children:(t||[]).map((function(e){return(0,L.jsx)(tt,{className:nt.NOTE_LABEL,clClose:nt.NOTE_LABEL_CLOSE,item:e,onRemove:n?n.bind(null,e):void 0},e.id||e.title)}))})};const it=function(e){return"Enter"===e.key||13===e.keyCode};const st=(0,D.forwardRef)((function(e,t){var n=e.className,o=e.style,r=e.initialValue,i=e.maxLength,s=void 0===i?40:i,a=e.onBlur,l=(0,D.useState)(r),c=l[0],d=l[1],u=(0,D.useCallback)((function(e){var t=e.target.value;t.length<=s&&d(t)}),[s]),p=(0,D.useCallback)((function(e){if(it(e)){var t=document.activeElement;t&&"function"==typeof t.blur&&t.blur()}else Ve(e)&&d("")}),[]);(0,D.useImperativeHandle)(t,(function(){return{setValue:function(e){e.length<=s&&d(e)}}}),[s]);var f=O(nt.INPUT,n);return(0,L.jsx)("input",{type:"text",className:f,style:o,value:c,onChange:u,onBlur:a,onKeyDown:p})}));var at=function(){};const lt=function(e){var t=e.tabIndex,n=void 0===t?"-1":t,o=e.style,r=e.color,i=e.onClick,s=void 0===i?at:i,a=e.children,l=r?{backgroundColor:r}:void 0;return(0,L.jsx)("button",{tabIndex:n,style:(0,M.Z)({},o,l),onClick:function(){return s(r)},children:a})};var ct=["#8abb5d","#f7a35c","#795548","#f45b5b","#d2b772","#dda0dd"],dt=["#f1d600","#008b8b","#2f7ed8","#000000","#607d8b","#7092be"],ut={paddingBottom:4},pt={padding:"4px 0 0 56px"},ft={position:"relative",display:"inline-block",height:32,width:32,marginRight:4,borderRadius:2,verticalAlign:"bottom",boxShadow:"0 2px 2px 0 rgba(0,0,0,0.3), 0 0 0 1px rgba(0,0,0,0.1)"},ht=(0,M.Z)({},ft,{margin:"0 12px"}),mt=function(e){var t=e.colors,n=e.onClick;return(0,L.jsx)(L.Fragment,{children:t.map((function(e){return(0,L.jsx)(lt,{color:e,style:ft,onClick:n},e)}))})};const vt=(0,D.forwardRef)((function(e,t){var n=e.initColor,o=void 0===n?"#2f7ed8":n,r=(0,D.useState)(o),i=r[0],s=r[1],a=(0,D.useCallback)((function(e){e&&s(e)}),[]),l=(0,D.useCallback)((function(){return s(o)}),[o]);return(0,D.useImperativeHandle)(t,(function(){return{getColor:function(){return i}}}),[i]),(0,L.jsxs)("div",{style:ut,children:[(0,L.jsxs)("div",{children:[(0,L.jsx)(lt,{style:ht,color:i,onClick:l}),(0,L.jsx)(mt,{colors:ct,onClick:a})]}),(0,L.jsx)("div",{style:pt,children:(0,L.jsx)(mt,{colors:dt,onClick:a})})]})}));var gt={padding:"4px 0 8px 12px"},xt={marginLeft:16};const bt=function(e){var t=e.isSelected,n=e.note,o=e.dispatch,r=e.onClose,i=n.id,s=(0,D.useState)((function(){return n.labels||[]})),a=s[0],l=s[1],c=(0,D.useRef)(null),d=(0,D.useRef)(""),u=(0,D.useRef)(null),p=(0,D.useRef)(null),f=(0,D.useCallback)((function(e){d.current=e.target.value}),[]),h=(0,D.useCallback)((function(){l((function(e){return function(e,t,n){return!t||e.find((function(e){return e.title===t}))?e:e.concat({title:t,color:n})}(e,function(e){if("string"!=typeof e)return"";var t=e.trim();return t&&t.length>0?t[0].toUpperCase()+t.slice(1):t}(T(d)),T(p).getColor())}),T(u).setValue(""))}),[]),m=(0,D.useCallback)((function(e){l((function(t){return function(e,t){return e.filter((function(e){return e.title!==t.title}))}(t,e)}))}),[]),v=(0,D.useCallback)((function(){o(et({noteId:i,labels:a}))}),[i,a]);return Pe(c,t,e),(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)("div",{style:gt,children:[(0,L.jsx)(rt,{labels:a,onRemove:m}),(0,L.jsx)(st,{ref:u,onBlur:f}),(0,L.jsx)(W,{clCaption:nt.CARD_BT,style:xt,caption:"AddLabel",title:"Click to add a new label",timeout:400,onClick:h})]}),(0,L.jsx)(vt,{ref:p}),(0,L.jsx)(We,{refBtClose:c,className:nt.MD_ACTIONS,onSave:v,onClose:r})]})};var Ct={marginBottom:0};const yt=A((function(e){var t,n,o,r=e.isShow,i=e.data,s=e.dispatch,a=e.onClose,l=re(se),c=(t=i.title,"Details: "+(o=(n=void 0===t?"":t).substring(0,12))+(n.length>o.length?"...":""));return(0,L.jsx)(ee,{className:"md-details",style:l.DIALOG,captionStyle:Ct,caption:c,isShow:r,withoutClose:!0,onClose:a,children:(0,L.jsxs)(Le,{width:"100%",children:[(0,L.jsx)(He,{title:"Descr",children:(0,L.jsx)(Ye,{note:i,dispatch:s,onClose:a})}),(0,L.jsx)(He,{title:"Labels",children:(0,L.jsx)(bt,{note:i,dispatch:s,onClose:a})})]},i.id)})}));var _t,jt="NOTIF",Nt="SETTINGS",St="DETAILS",It=((_t={DF:ne})[jt]=ne,_t[Nt]=Ee,_t[St]=yt,_t);const wt={getDialog:function(e){return It[e]||It.DF}};var Dt=(0,i.oM)({name:"modal",initialState:{id:null,data:null},reducers:{showModal:function(e,t){var n=t.payload;return{id:n.id,data:n.data}}}}),Tt=Dt.actions,Et=Dt.reducer,At=Tt.showModal,Mt=function(e){return At({id:jt,data:e})};const kt=Et;var Rt=(0,i.PH)("columns/addColumn"),Bt=(0,i.PH)("columns/removeColumn"),Ot=(0,i.PH)("columns/moveColumn");const Lt=function(e){return function(t,n){var o;return(0,M.Z)({},t,((o={})[e]=n,o))}};var Ht=function(e,t){return function(n,o,r,i,s){var a=[].concat(s[e]);a.splice(r.index,1),a.splice(i.index,0,o),n[s.id]=t(s,a)}},Pt=function(e,t){return function(n,o,r,i,s,a){var l=[].concat(s[e]);l.splice(r.index,1);var c=[].concat(a[e]);c.splice(i.index,0,o),n[s.id]=t(s,l),n[a.id]=t(a,c)}};const Gt=function(e){var t=Lt(e);return{idsTo:t,moveInternal:Ht(e,t),moveExternal:Pt(e,t)}};var Zt=Gt("columnIds"),Ft=Zt.moveInternal,Ut=Zt.moveExternal,Kt=(0,i.oM)({name:"boards",initialState:m.boards,reducers:{editBoardTitle:function(e,t){var n=t.payload,o=n.boardId,r=n.title;e[o].title=r},addBoard:function(e,t){var n=t.payload.boardId;e[n]={id:n,title:"New Board",columnIds:[]}},removeBoard:function(e,t){delete e[t.payload.boardId]}},extraReducers:function(e){return e.addCase(Rt,(function(e,t){var n=t.payload,o=n.boardId,r=n.columnId;e[o].columnIds.push(r)})).addCase(Bt,(function(e,t){var n=t.payload,o=n.boardId,r=n.columnId,i=e[o];i.columnIds=i.columnIds.filter((function(e){return e!==r}))})).addCase(Ot,(function(e,t){var n=t.payload,o=n.draggableId,r=n.source,i=n.destination,s=e[r.droppableId],a=e[i.droppableId];s===a?Ft(e,o,r,i,s):Ut(e,o,r,i,s,a)}))}}),Xt=Kt.actions,Vt=Kt.reducer,zt=Xt.editBoardTitle;const Wt=Vt;const $t=(0,i.oM)({name:"noteLabels",initialState:m.noteLabels,extraReducers:function(e){return e.addCase(et,(function(e,t){t.payload.newLabels.forEach((function(t){e[t.id]=t}))}))}}).reducer;var Yt=Gt("noteIds"),Jt=Yt.moveInternal;const qt={crColumn:function(e,t){return void 0===t&&(t=!0),{id:e,title:"New Topic",noteIds:[],withAdd:t}},moveExternal:Yt.moveExternal,moveInternal:Jt};var Qt=qt.crColumn,en=qt.moveExternal,tn=qt.moveInternal,nn=(0,i.oM)({name:"columns",initialState:m.columns,reducers:{editColumnTitle:function(e,t){var n=t.payload,o=n.columnId,r=n.title;e[o].title=r},toggleColumn:function(e,t){var n=t.payload.columnId,o=e[n];e[n].isHide=!o.isHide},addColumn:function(e,t){var n=t.payload.columnId;e[n]=Qt(n)},removeColumn:function(e,t){delete e[t.payload.columnId]}},extraReducers:function(e){e.addCase(Je,(function(e,t){var n=t.payload,o=n.columnId,r=n.noteId;e[o].noteIds.unshift(r)})).addCase(qe,(function(e,t){var n=t.payload,o=n.columnId,r=n.noteId,i=e[o];i.noteIds=i.noteIds.filter((function(e){return e!==r}))})).addCase(Qe,(function(e,t){var n=t.payload,o=n.draggableId,r=n.source,i=n.destination,s=e[r.droppableId],a=e[i.droppableId];s===a?tn(e,o,r,i,s):en(e,o,r,i,s,a)}))}}),on=nn.actions,rn=nn.reducer,sn=on.editColumnTitle,an=on.toggleColumn;const ln=rn;const cn=(0,u.UY)({app:C,drawerMsg:w,modal:kt,boards:Wt,notes:Xe,noteLabels:$t,columns:ln});const dn=function(e){return void 0===e&&(e="a"),e+"-"+(Date.now().toString(36)+Math.random().toString(36).substr(2,9)).toUpperCase().substr(12)};const un=function(e){var t=e.getState,n=e.dispatch;return function(e){return function(o){if(o.type===p.type){if(i=t(),ae.boardIds(i).length>=d.MAX_BOARDS)return n(Mt(d.N_MAX_BOARDS)),!1;var r=dn(d.BOARDS_PREFIX);return o.payload={boardId:r},e(o),r}var i;return e(o)}}};const pn=function(e){var t=e.getState,n=e.dispatch;return function(e){return function(o){if(o.type===Rt.type){if(function(e,t){return ce.columnIds(e,t).length>=d.MAX_COLUMNS}(t(),o.payload.boardId))return n(Mt(d.N_MAX_COLUMNS)),!1;var r=dn(d.COLUMNS_PREFIX);return o.payload.columnId=r,e(o),r}return e(o)}}};const fn=function(e){var t=e.getState,n=e.dispatch;return function(e){return function(o){if(o.type===Je.type){var r=o.payload.columnId;if(function(e,t){return ue.noteIds(e,t).length>=d.MAX_NOTES}(t(),r))return n(Mt(d.N_MAX_NOTES)),!1;var i=dn(d.NOTES_PREFIX);return o.payload.noteId=i,e(o),i}return e(o)}}};const hn=function(e){return Object.keys(e).map((function(t){return e[t]}))};const mn=function(e){var t=e.getState;e.dispatch;return function(e){return function(n){if(n.type===et.type){var o=de(t()),r=n.payload;n.payload=(0,M.Z)({},r,function(e,t){var n=[],o=[];if(!e||"object"!=typeof e||!Array.isArray(t))return{labelsTo:n,newLabels:o};var r=hn(e);return t.forEach((function(e){if(e.id)n.push(e);else{var t=r.find(function(e){return function(t){return t.title===e.title&&t.color===e.color}}(e));t?(e.id=t.id,n.push(e)):(e.id=dn(d.NLABELS_PREFIX),n.push(e),o.push(e))}})),{labelsTo:n,newLabels:o}}(o,r.labels))}return e(n)}}};var vn=(0,i.PH)("app/saveBoard"),gn=(0,i.PH)("app/cleanStorage");const xn=function(e){var t=e.getState,n=e.dispatch;return function(e){return function(o){switch(o.type){case vn.type:try{return window.localStorage.setItem(d.STORAGE_KEY,JSON.stringify((0,M.Z)({},t(),{drawerMsg:[],modal:{id:null,data:null}}))),n(S({msg:d.MSG_SAVED})),!0}catch(e){return n(S({msg:d.MSG_SAVE_FAIL})),console.log(e.msg),!1}case gn.type:try{return window.localStorage.removeItem(d.STORAGE_KEY),n(S({msg:d.MSG_CLEANED})),!0}catch(e){return n(S({msg:d.MSG_CLEAN_FAIL})),console.log(e.msg),!1}default:return e(o)}}}};var bn=function(e){return e<10?"0"+e:""+e};const Cn=function(){return function(e){return function(t){if(t.type===S.type){var n=t.payload,o=dn(d.DMSG_PREFIX);return n.id=o,n.msg=(r=n.msg,i=new Date,bn(i.getHours())+":"+bn(i.getMinutes())+" "+r),e(t),o}var r,i;return e(t)}}};var yn=Array.isArray;const _n=function(e){var t=e.getState;return function(e){return function(n){if(n.type===Bt.type){var o=ue.noteIds(t(),n.payload.columnId);if(!yn(o)||0!==o.length)return!1}return e(n)}}};var jn=Array.isArray;var Nn=[].concat([un,pn,fn,mn,xn,Cn,_n,function(e){var t=e.getState;return function(e){return function(n){if(n.type===f.type){var o=ce.columnIds(t(),n.payload.boardId);if(!jn(o)||0!==o.length)return!1}return e(n)}}},function(){return function(e){return function(t){return t.type!==Ue.type||"string"==typeof(n=t.payload.title)&&n.trim()?e(t):(t.payload.title="New Note",e(t),!1);var n}}}]);const Sn=(0,i.xC)({reducer:cn,preloadedState:function(){var e;try{var t=window.localStorage.getItem(d.STORAGE_KEY);t&&(e=JSON.parse(t))}catch(e){console.log(e.msg)}return e||m}(),devTools:!1,middleware:function(e){return Nn}});var In,wn=n(711),Dn=n(974),Tn={BG:{},ITEM:{}},En=Object.assign,An=[function(e,t){document.body.style.backgroundColor=t.BG_BODY},function(e,t){En(e.BG,{backgroundColor:t.BG})},function(e,t){En(e.ITEM,{backgroundColor:t.BG,border:"1px solid "+t.BG})}],Mn={DEFAULT:"DARK",DARK:"DARK",WHITE:"WHITE",SAND:"SAND"},kn=((In={})[Mn.DARK]={pallete:{BG_BODY:"#5f5f5f",BG:"#4d4d4d",BG_HEADER:"#3a6799",C_HEADER:"#8a8a8a"},clSuffix:""},In[Mn.WHITE]={pallete:{BG_BODY:"#d2d2d2",BG:"#ebf1f5",BG_HEADER:"rgb(0, 150, 200)",C_HEADER:"#4d4d4d"},clSuffix:"--white"},In[Mn.SAND]={pallete:{BG_BODY:"darkgrey",BG:"#e8e0cb",BG_HEADER:"rgb(0, 150, 200)",C_HEADER:"#4d4d4d"},clSuffix:"--sand"},In),Rn={},Bn=function(e){var t,n=kn[e],o=n.clSuffix,r=n.pallete;void 0===(t=o)&&(t=""),Object.keys(Rn).forEach((function(e){Tn[e]=Rn[e]+t})),function(e,t){An.forEach((function(n){return n(e,t)}))}(Tn,r)},On={themeName:Mn.DEFAULT,_init:function(){this.setThemeName(Mn.DEFAULT)},getThemeName:function(){return this.themeName},setThemeName:function(e){this.themeName=Mn[e]||Mn.DEFAULT,Bn(this.themeName)},createStyle:function(e){return this.themeName!==e.themeName&&(e.style=e.createStyle(Tn,this.themeName),e.themeName=this.themeName),e.style}};On._init();const Ln=On;var Hn=n(782);const Pn=function(e){if(!e||"object"!=typeof e)return!1;var t=e.destination,n=e.source;return!t||!n||t.droppableId===n.droppableId&&t.index===n.index};var Gn={themeName:void 0,style:void 0,createStyle:function(e){return{COMP:(0,M.Z)({},e.BG)}}};const Zn=Gn;const Fn=function(e){var t=e.className,n=e.style,o=e.children,r=re(Zn);return(0,L.jsx)("header",{className:t,style:(0,M.Z)({},n,r.COMP),children:o})};const Un=function(e){var t=(0,D.useState)((function(){return!!e})),n=t[0],o=t[1];return[n,(0,D.useCallback)((function(){return o((function(e){return!e}))}),[])]};var Kn={width:"auto",height:"auto"},Xn={transform:"translateX(-264px)",pointerEvents:"none"},Vn={transform:"translate(0px, 0px)"},zn={opacity:0,zIndex:-1,transition:"opacity 195ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"},Wn={opacity:1,zIndex:1e3,transition:"opacity 225ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"};const $n=function(e){var t=e.btStyle,n=e.captionComp,o=e.children,r=Un(!1),i=r[0],s=r[1],a=re(Zn),l=i?Vn:Xn,c=i?Wn:zn,d=i?s:void 0;return[(0,L.jsx)("button",{className:"drawer-bt",style:(0,M.Z)({},Kn,t),"aria-label":"Open Drawer",onClick:s,children:n},"bt-drawer"),(0,L.jsx)("div",{role:"presentation","aria-hidden":!i,className:"drawer-modal",style:c,onClick:d},"wrapper"),(0,L.jsx)("aside",{className:"drawer-left",style:(0,M.Z)({},l,a.COMP),children:o},"aside")]};const Yn=function(e){var t=e.className,n=void 0===t?nt.LOGO:t,o=e.style,r=e.title,i=void 0===r?"Logo of web app Notes v0.3.0":r;return(0,L.jsx)("span",{className:n,style:o,title:i,children:(0,L.jsxs)("svg",{viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:"2",strokeWidth:"2",children:[(0,L.jsx)("rect",{ry:"1.8825414",rx:"194.14471",y:"1.434558",x:"19.176462",height:"12.460618",width:"10.85316",fill:"#8ecc2d",stroke:"#8ecc2d"}),(0,L.jsx)("rect",{ry:"1.87537",rx:"204.478",y:"16.639841",x:"8.8410215",height:"13.752699",width:"18.307165",fill:"#232f3b",stroke:"#232f3b"}),(0,L.jsx)("rect",{ry:"1.87537",rx:"204.478",y:"3.4229634",x:"2.5897937",height:"10.894996",width:"10.001963",fill:"#a487d4",stroke:"#a487d4"})]})})};const Jn=function(e,t){return void 0===t&&(t="Notes"),null==e?t+": Not Exist":t+": "+(e.title||"")+" ("+(Array.isArray(e.columnIds)?e.columnIds.length:0)+")"};const qn=function(){var e=(0,r.v9)(pe.board.currentBoard);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(Yn,{className:nt.LOGO_BOARD},"logo"),(0,L.jsx)("span",{className:nt.HEADER_TITLE+" "+nt.TITLE_BOARD,children:Jn(e)})]})};const Qn=function(e){var t=e.board;return(0,L.jsx)("div",{className:"drawer__title",children:Jn(t,"Topics")})};var eo=function(e){var t=e.isHide;return(0,L.jsx)("span",{className:"drawer__list-bt__badge",children:t?"H":"S"})};const to=function(e){var t=e.topic,n=e.onClick;if(!t)return null;var o=t.isHide,r=t.title,i="Click to "+(o?"show":"hide")+" topic";return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(W,{className:"drawer__list-bt",caption:r,title:i,timeout:0,onClick:n}),(0,L.jsx)(eo,{isHide:o})]})};var no={listStyleType:"none"},oo={position:"relative"},ro=function(){};const io=function(e){var t=e.board,n=e.columns,o=e.toggleColumn,r=void 0===o?ro:o,i=t.columnIds;return(0,L.jsx)("ul",{style:no,children:(i||[]).map((function(e){return(0,L.jsx)("li",{style:oo,children:(0,L.jsx)(to,{topic:n[e],onClick:function(){return r({columnId:e})}})},e)}))})};var so={removeDrawerMsg:I};const ao=(0,r.$j)((function(e){return{items:le.msg(e)}}),so)((function(e){var t=e.items,n=e.removeDrawerMsg;return(0,L.jsx)("ul",{className:"drawer__msg-ul",children:t.map((function(e){return(0,L.jsx)("li",{className:"drawer__msg-li",children:(0,L.jsx)("button",{className:"drawer__msg-bt",onClick:function(){return n({id:e.id})},children:e.msg})},e.id)}))})}));var lo={toggleColumn:an};const co=(0,r.$j)((function(e){return{board:pe.board.currentBoard(e),columns:pe.column.columns(e)}}),lo)((function(e){var t=e.board,n=e.columns,o=e.toggleColumn;return(0,L.jsxs)("div",{className:"drawer__list",children:[(0,L.jsx)(Qn,{board:t}),(0,L.jsx)(io,{board:t,columns:n,toggleColumn:o}),(0,L.jsx)(ao,{})]})}));const uo=function(){return(0,L.jsx)($n,{captionComp:(0,L.jsx)(qn,{}),children:(0,L.jsx)(co,{})})};var po={position:"absolute",top:4,right:16},fo={transform:"translateX(264px)",pointerEvents:"none"},ho={transform:"translate(0px, 0px)"},mo={opacity:0,zIndex:-1,transition:"opacity 195ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"},vo={opacity:1,zIndex:1e3,transition:"opacity 225ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"};const go=function(e){var t=e.btStyle,n=e.children,o=Un(!1),r=o[0],i=o[1],s=re(Zn),a=r?ho:fo,l=r?vo:mo,c=r?i:void 0;return[(0,L.jsx)("button",{className:"drawer-bt",style:(0,M.Z)({},po,t),"aria-label":"Open Drawer",onClick:i,children:(0,L.jsx)("span",{className:"drawer-span",children:(0,L.jsxs)("svg",{className:"drawer-svg",focusable:"false",viewBox:"0 0 24 24","aria-hidden":"true",children:[(0,L.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"}),(0,L.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"})]})})},"bt-drawer"),(0,L.jsx)("div",{role:"presentation","aria-hidden":!r,className:"drawer-modal",style:l,onClick:c},"wrapper"),(0,L.jsx)("aside",{className:"drawer",style:(0,M.Z)({},a,s.COMP),children:n},"aside")]};var xo="drawer__list-bt",bo={padding:"16px 0 8px 0",marginLeft:16},Co={listStyleType:"none"},yo={showSettings:function(){return At({id:Nt})},saveBoard:vn,cleanStorage:gn};const _o=(0,r.$j)(null,yo)((function(e){var t=e.showSettings,n=e.saveBoard,o=e.cleanStorage;return(0,L.jsxs)("div",{className:"drawer__list",children:[(0,L.jsx)("div",{className:"header__title",style:bo,children:"Web App Notes v0.3.0"}),(0,L.jsxs)("ul",{style:Co,children:[(0,L.jsx)("li",{children:(0,L.jsx)(W,{className:xo,caption:"User Settings",title:"Click to open user settings dialog",onClick:t})}),(0,L.jsx)("li",{children:(0,L.jsx)(W,{className:xo,caption:"Save Boards",title:"Click to save boards to localStorage",onClick:n})}),(0,L.jsx)("li",{children:(0,L.jsx)(W,{className:xo,caption:"Clean Storage",title:"Click to remove boards from localStorage",onClick:o})})]}),(0,L.jsx)(ao,{})]})}));const jo=function(){return(0,L.jsx)(go,{children:(0,L.jsx)(_o,{})})};const No=function(e){var t=e.addColumn;return(0,L.jsxs)(Fn,{className:nt.HEADER,children:[(0,L.jsx)(uo,{}),(0,L.jsx)(W,{caption:"Add Topic",title:"Click to add topic to board",accessKey:"a",timeout:500,onClick:t}),(0,L.jsx)("nav",{children:(0,L.jsx)(wn.OL,{to:"/boards",className:nt.NAV_LINK+" "+nt.ML_8,children:"ToBoards"})}),(0,L.jsx)(jo,{})]})};const So=function(e){var t=e.children;return(0,L.jsx)("main",{className:nt.CONT,children:t})};const Io=function(e){return!Array.isArray(e)||0===e.length};const wo=function(e){var t=e.className,n=e.style,o=e.svgStyle,r=e.title,i=e.onClick;return(0,L.jsx)("button",{className:O("bt-svg-more",t),style:n,title:r,onClick:i,children:(0,L.jsxs)("svg",{style:o,width:"6px",height:"22px",viewBox:"0 0 6 22",preserveAspectRatio:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,L.jsx)("circle",{cx:"3",cy:"4",r:"2"}),(0,L.jsx)("circle",{cx:"3",cy:"11",r:"2"}),(0,L.jsx)("circle",{cx:"3",cy:"18",r:"2"})]})})};var Do={paddingLeft:8,width:"100%",textAlign:"left"};const To=function(e){var t=e.style,n=e.isShow,o=e.onHideTopic,r=e.onAddNote,i=e.onClose,s=re(Zn);return(0,L.jsxs)(ve,{className:nt.MODAL_PANE,style:(0,M.Z)({},t,s.COMP),isShow:n,onClose:i,children:[(0,L.jsx)(W,{style:Do,caption:"Hide Topic",title:"Click to hide Topic",onClick:o}),(0,L.jsx)(W,{style:Do,caption:"Add Note",title:"Click to add new Note",timeout:100,onClick:r})]})};var Eo={themeName:void 0,style:void 0,createStyle:function(e){return{ITEM:(0,M.Z)({},e.ITEM)}}};const Ao=Eo;var Mo={display:"none"};var ko={padding:"8px 0",lineHeight:"36px"};var Ro={display:"inline-block",paddingLeft:12,fontWeight:600};const Bo={Item:function(e){var t=e.isHide,n=e.children,o=re(Ao),r=U(o.ITEM,[t,Mo]);return(0,L.jsx)("section",{className:nt.ITEM_CARD,style:r,children:n})},Header:function(e){var t=e.children;return(0,L.jsx)("div",{style:ko,children:t})},Title:function(e){return(0,L.jsx)(st,(0,M.Z)({className:nt.CARD_TITLE},e))},Counter:function(e){var t=e.style,n=e.value;return(0,L.jsx)("span",{style:(0,M.Z)({},Ro,t),children:n})},BtCircle:function(e){var t=e.style,n=e.caption,o=e.title,r=e.tabIndex,i=void 0===r?"-1":r,s=e.onClick;return(0,L.jsx)("button",{className:nt.BT_CIRCLE,style:t,tabIndex:i,title:o,onClick:s,children:n})}};var Oo=n(366),Lo=["className","style","innerRef","isDraggingOver","notDraggingStyle","children"],Ho={ROOT:{minHeight:100},DRAGGING_OVER:{border:"2px dashed lightgreen"},NOT_DRAGGING_OVER:{border:"2px dashed transparent"}};const Po=function(e){var t=e.className,n=e.style,o=e.innerRef,r=e.isDraggingOver,i=e.notDraggingStyle,s=e.children,a=(0,Oo.Z)(e,Lo),l=function(e,t){return e?Ho.DRAGGING_OVER:t||Ho.NOT_DRAGGING_OVER}(r,i);return(0,L.jsx)("div",(0,M.Z)({},a,{ref:o,className:t,style:(0,M.Z)({},Ho.ROOT,n,l),children:s}))};var Go=["draggableProps","innerRef","isDragging","dragHandleProps"],Zo=["style"],Fo=function(e,t){return function(n){var o=n.draggableProps,r=n.innerRef,i=n.isDragging,s=n.dragHandleProps,a=(0,Oo.Z)(n,Go),l=t||{},c=l.dragBg,d=l.notDragBg,u=l.isDragHanlerProps,p=o.style,f=(0,Oo.Z)(o,Zo),h=function(e,t,n){return void 0===t&&(t="#1e90ff"),void 0===n&&(n="transparent"),{backgroundColor:e?t:n}}(i,c,d),m=u?void 0:s;return(0,L.jsx)("div",(0,M.Z)({ref:r,style:(0,M.Z)({},p,h)},f,m,{children:(0,L.jsx)(e,(0,M.Z)({dragHandleProps:u?s:void 0},a))}))}};const Uo=function(e,t){return"function"==typeof e?Fo(e,t):function(t){return Fo(t,e)}};var Ko=["isDetails"];const Xo=function(e){var t=e.isDetails,n=(0,Oo.Z)(e,Ko),o=O("note__handle",[t,"note__handle--open"]);return(0,L.jsx)("span",(0,M.Z)({className:o},n))};const Vo=function(e){return function(t){function n(){return t.apply(this,arguments)||this}return(0,k.Z)(n,t),n.prototype.render=function(){var t=this;return(0,L.jsx)(oe.Consumer,{children:function(n){return(0,L.jsx)(e,(0,M.Z)({},t.props,{theme:n}))}})},n}(D.Component)};var zo={paddingLeft:8,width:"100%",textAlign:"left"};const Wo=Vo((function(e){var t=e.theme,n=e.className,o=e.style,r=e.isShow,i=e.onClose,s=e.onEdit,a=e.onRemove,l=t.createStyle(Zn),c=O(nt.MODAL_PANE,n);return(0,L.jsxs)(ve,{className:c,style:(0,M.Z)({},o,l.COMP),isShow:r,onClose:i,children:[(0,L.jsx)(W,{style:zo,caption:"Edit Details",onClick:s}),(0,L.jsx)(W,{style:zo,caption:"Remove Note",onClick:a})]})}));const $o=function(e){var t=e.dragHandleProps,n=e.isDetails,o=e.onClickHandle,r=e.noteTitle,i=e.onBlurTitle,s=e.isMenuMore,a=e.onClickMenuMore,l=e.onCloseMenuMore,c=e.onEditDetails,d=e.onRemoveNote;return(0,L.jsxs)("div",{children:[(0,L.jsx)(Xo,(0,M.Z)({},t,{isDetails:n,onClick:o})),(0,L.jsx)(st,{className:"note__caption",initialValue:r,onBlur:i}),(0,L.jsx)(wo,{className:"note__bt-more",title:"Click to open note menu",onClick:a}),s&&(0,L.jsx)(Wo,{isShow:s,className:"note__menu-more",onClose:l,onEdit:c,onRemove:d})]})};const Yo=function(e){var t=e.isShow,n=e.note,o=e.editDetails,r=$e(n);return(0,L.jsx)(be,{className:"note__details",isShow:t,children:(0,L.jsxs)("div",{onClick:o,children:[(0,L.jsx)(rt,{labels:n.labels}),(0,L.jsx)("div",{children:r})]})})};var Jo=function(e){function t(t){var n;return(n=e.call(this,t)||this)._openMenuMore=function(){n.state.isMenuMore||n.setState({isMenuMore:!0})},n._closeMenuMore=function(){n.setState({isMenuMore:!1})},n._deleteNote=function(){var e=n.props;(0,e.deleteNote)({columnId:e.columnId,noteId:e.note.id})},n._blurTitle=function(e){var t=e.target.value,o=n.props,r=o.note,i=o.editNoteTitle;t!==r.title&&i({noteId:r.id,title:t})},n._toggleDetails=function(){n.setState((function(e){return{isDetails:!e.isDetails}}))},n._editDetails=function(){var e=n.props,t=e.note;(0,e.editDetails)(t),n._closeMenuMore()},n.state=function(e){return{noteTitle:e.note.title,isMenuMore:!1,isDetails:!1}}(t),n}return(0,k.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.dragHandleProps,n=e.note,o=this.state,r=o.noteTitle,i=o.isMenuMore,s=o.isDetails;return(0,L.jsxs)("div",{className:"note",id:n.id,children:[(0,L.jsx)($o,{dragHandleProps:t,isDetails:s,onClickHandle:this._toggleDetails,noteTitle:r,onBlurTitle:this._blurTitle,isMenuMore:i,onClickMenuMore:this._openMenuMore,onCloseMenuMore:this._closeMenuMore,onEditDetails:this._editDetails,onRemoveNote:this._deleteNote}),(0,L.jsx)(Yo,{isShow:s,note:n,editDetails:this._editDetails})]})},t}(D.Component),qo={deleteNote:qe,editNoteTitle:Ue,editDetails:function(e){return At({id:St,data:e})}};const Qo=(0,r.$j)(null,qo)(Jo);var er=Uo({notDragBg:"#9e9e9e",isDragHanlerProps:!0})(Qo);er.displayName="DnDNote";const tr=er;var nr={minHeight:50},or={border:"2px solid #9e9e9e"};const rr=function(e){var t=e.cId,n=e.noteIds,o=e.notes;return(0,L.jsx)(Hn.bK,{droppableId:t,children:function(e,r){return function(e){var t=e.provided,n=e.snapshot,o=e.noteIds,r=e.notes,i=e.cId;return(0,L.jsxs)(Po,(0,M.Z)({},t.droppableProps,{innerRef:t.innerRef,isDraggingOver:n.isDraggingOver,style:nr,notDraggingStyle:or,children:[o.map((function(e,t){return(0,L.jsx)(Hn._l,{draggableId:e,index:t,children:function(t,n){return(0,L.jsx)(tr,{draggableProps:t.draggableProps,innerRef:t.innerRef,isDragging:n.isDragging,dragHandleProps:t.dragHandleProps,note:r[e],columnId:i})}},e)})),t.placeholder]}))}({provided:e,snapshot:r,noteIds:n,notes:o,cId:t})}})};var ir={marginRight:8},sr={position:"absolute",width:150},ar=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this).state={isMenuMore:!1},t._openMenuMore=function(){t.state.isMenuMore||t.setState({isMenuMore:!0})},t._closeMenuMore=function(){t.setState({isMenuMore:!1})},t._hHideTopic=function(){var e=t.props;(0,e.toggleColumn)({columnId:e.column.id})},t._hAddNewTask=function(){var e=t.props,n=e.column;(0,e.addNote)({columnId:n.id})},t._hBlurTitle=function(e){var n=t.props,o=n.column;(0,n.editColumnTitle)({columnId:o.id,title:e.target.value})},t._hRemoveColumn=function(){var e=t.props,n=e.boardId,o=e.column;(0,e.removeColumn)({boardId:n,columnId:o.id})},t}return(0,k.Z)(t,e),t.prototype.render=function(){var e=this.state.isMenuMore,t=this.props,n=t.column,o=t.notes,r=n.id,i=n.isHide,s=n.title,a=n.withAdd,l=n.noteIds;return(0,L.jsxs)(Bo.Item,{isHide:i,children:[(0,L.jsxs)(Bo.Header,{children:[(0,L.jsx)(wo,{style:ir,title:"Click to open topic menu",onClick:this._openMenuMore}),e&&(0,L.jsx)(To,{style:sr,isShow:e,onAddNote:this._hAddNewTask,onHideTopic:this._hHideTopic,onClose:this._closeMenuMore}),(0,L.jsx)(Bo.Title,{initialValue:s,onBlur:this._hBlurTitle}),(0,L.jsx)(Bo.Counter,{value:l.length}),a&&(0,L.jsx)(W,{clCaption:nt.CARD_BT,caption:"AddNote",title:"Click to add a new note",timeout:1e3,onClick:this._hAddNewTask})]}),(0,L.jsx)(rr,{cId:r,noteIds:l,notes:o}),(0,L.jsx)("div",{children:Io(l)&&(0,L.jsx)(W,{clCaption:nt.CARD_BT,caption:"Remove Topic",onClick:this._hRemoveColumn})})]})},t}(D.Component),lr={editColumnTitle:sn,removeColumn:Bt,toggleColumn:an};const cr=(0,r.$j)(null,lr)(ar);var dr=function(e){var t=e.boardId,n=e.columnIds,o=e.columns,r=e.notes,i=e.addNote;return(n||[]).map((function(e){var n=o[e];return(0,L.jsx)(cr,{boardId:t,column:n,notes:r,addNote:i},n.id)}))},ur={moveNote:Qe,addNote:Je,addColumn:Rt};const pr=(0,r.$j)((function(e){return{board:pe.board.currentBoard(e),notes:pe.note.notes(e),columns:pe.column.columns(e)}}),ur)((function(e){var t=e.board,n=e.notes,o=e.columns,r=e.addNote,i=e.moveNote,s=e.addColumn,a=t.id,l=t.columnIds,c=(0,D.useCallback)((function(e){Pn(e)||i(e)}),[]),d=(0,D.useCallback)((function(){s({boardId:a})}),[]);return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(No,{addColumn:d}),(0,L.jsx)(Hn.Z5,{onDragEnd:c,children:(0,L.jsx)(So,{children:(0,L.jsx)(dr,{boardId:a,columnIds:l,columns:o,notes:n,addNote:r})})})]})}));var fr={addBoard:p};const hr=(0,r.$j)(null,fr)((function(e){var t=e.style,n=e.addBoard;return(0,L.jsxs)(Fn,{className:nt.HEADER,style:t,children:[(0,L.jsx)(Yn,{}),(0,L.jsx)("span",{className:nt.TITLE_GAP}),(0,L.jsx)("span",{className:nt.HEADER_TITLE,children:"Notes: Boards"}),(0,L.jsx)(W,{caption:"Add Board",title:"Click to add new board",accessKey:"a",isEvent:!1,timeout:200,onClick:n}),(0,L.jsx)(jo,{})]})}));var mr={paddingLeft:12,lineHeight:2},vr={float:"right",paddingRight:12};var gr=Uo((function(e){var t=e.title,n=e.count;return(0,L.jsxs)("div",{style:mr,children:[(0,L.jsx)("span",{children:t}),(0,L.jsx)(Bo.Counter,{style:vr,value:n})]})}));gr.displayName="DnDTopic";const xr=gr;const br=function(e){var t=e.id,n=e.columnIds,o=e.columns;return(0,L.jsx)(Hn.bK,{droppableId:t,children:function(e,t){return function(e){var t=e.provided,n=e.snapshot,o=e.columnIds,r=e.columns;return(0,L.jsxs)(Po,(0,M.Z)({},t.droppableProps,{innerRef:t.innerRef,isDraggingOver:n.isDraggingOver,children:[o.map((function(e,t){return(0,L.jsx)(Hn._l,{draggableId:e,index:t,children:function(t,n){return(0,L.jsx)(xr,(0,M.Z)({draggableProps:t.draggableProps,innerRef:t.innerRef,isDragging:n.isDragging,dragHandleProps:t.dragHandleProps},{title:(o=r[e]).title,count:o.noteIds.length}));var o}},e)})),t.placeholder]}))}({provided:e,snapshot:t,columnIds:n,columns:o})}})};var Cr={margin:"8px 8px 4px 0"},yr=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this)._hBlurTitle=function(e){var n=t.props,o=n.board;(0,n.editBoardTitle)({boardId:o.id,title:e.target.value})},t._hSetCurrent=function(){var e=t.props,n=e.board;(0,e.setBoardCurrent)({boardId:n.id})},t._hRemove=function(){var e=t.props,n=e.board;(0,e.removeBoard)({boardId:n.id})},t._hToNotes=function(){var e=t.props,n=e.board;(0,e.setCurrentBoard)({boardId:n.id})},t}return(0,k.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.id,n=e.board,o=e.columns,r=n.columnIds;return(0,L.jsxs)(Bo.Item,{children:[(0,L.jsxs)(Bo.Header,{children:[(0,L.jsx)(Bo.Title,{initialValue:n.title,onBlur:this._hBlurTitle}),(0,L.jsx)(Bo.Counter,{value:r.length})]}),(0,L.jsx)(br,{id:t,columnIds:r,columns:o}),(0,L.jsx)(wn.OL,{to:"/boards/"+n.id,className:nt.NAV_LINK,style:Cr,onClick:this._hToNotes,children:"ToNotes"}),(0,L.jsx)("div",{children:Io(r)&&(0,L.jsx)(W,{clCaption:nt.CARD_BT,caption:"Remove Board",onClick:this._hRemove})})]})},t}(D.Component),_r={editBoardTitle:zt,setCurrentBoard:h,removeBoard:f};const jr=(0,r.$j)((function(e,t){return{board:ce.board(e,t.id),columns:ue.columns(e)}}),_r)(yr);const Nr=(0,r.$j)((function(e){return{boardIds:ce.boardIds(e),boards:ce.boards(e)}}))((function(e){var t=e.boardIds;e.boards;return t.map((function(e){return(0,L.jsx)(jr,{id:e},e)}))}));var Sr={moveColumn:Ot};const Ir=(0,r.$j)(null,Sr)((function(e){var t=e.moveColumn,n=(0,D.useCallback)((function(e){Pn(e)||t(e)}),[t]);return[(0,L.jsx)(hr,{},"header"),(0,L.jsx)(Hn.Z5,{onDragEnd:n,children:(0,L.jsx)(So,{children:(0,L.jsx)(Nr,{})})},"ddc")]}));var wr="modal-root",Dr={display:"block"},Tr={display:"none"},Er={backgroundColor:"rgba(0,0,0, 0)"},Ar=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this).wasClosing=!0,t._hideModal=function(){t.wasClosing=!0,t.setState({})},t}(0,k.Z)(t,e);var n=t.prototype;return n.shouldComponentUpdate=function(e,t){return!!(this.wasClosing||e.isShow||this.props.isShow)},n.componentDidUpdate=function(e,t){e.isShow&&!this.props.isShow&&setTimeout(this._hideModal,this.props.timeout)},n.render=function(){var e,t,n,o=this.props,r=o.isShow,i=o.children,s=o.onClose;return!r&&this.wasClosing?(e=wr,t=Tr,n=!0,this.wasClosing=!1):(e=O(wr,r?"show-modal":"hide-modal"),t=r?Dr:Er,n=!1),(0,L.jsx)("div",{role:"presentation",className:e,style:t,"aria-hidden":n,onClick:s,children:i})},t}(D.Component);Ar.defaultProps={timeout:450};const Mr=Ar;var kr=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this).state={isShow:!1,inits:{},shows:{},data:{},dialogs:[],currentDialog:null},t._onStore=function(){var e=t.props.store.getState().modal,n=void 0===e?{}:e,o=n.id,r=n.data,i=void 0===r?{}:r;o&&t.modal!==n&&(t.modal=n,t.setState((function(e){var t=e.inits,n=e.shows,r=e.data,s=e.dialogs;return t[o]?(n[o]=!0,r[o]=i,{isShow:!0,currentDialog:o,shows:n,data:r}):(s.push({type:o,comp:wt.getDialog(o)}),t[o]=!0,n[o]=!0,r[o]=i,{isShow:!0,currentDialog:o,shows:n,data:r,dialogs:s})})))},t._hClose=function(e){t.setState((function(t){return t.shows[e]=!1,{isShow:!1,currentDialog:null,shows:t.shows}}))},t._renderDialogs=function(){var e=t.props,n=e.store,o=e.theme,r=t.state,i=r.shows,s=r.data;return r.dialogs.map((function(e){var r=e.type,a=e.comp;return(0,D.createElement)(a,{key:r,isShow:i[r],data:s[r],onClose:t._hClose.bind(null,r),store:n,dispatch:n.dispatch,TS:o.createStyle(se)})}))},t}(0,k.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.unsubscribe=this.props.store.subscribe(this._onStore)},n.componentWillUnmount=function(){this.unsubscribe()},n.shouldComponentUpdate=function(e,t){return this.state.currentDialog!==t.currentDialog},n.render=function(){var e=this.state,t=e.isShow,n=e.currentDialog;return(0,L.jsx)(Mr,{isShow:t,onClose:this._hClose.bind(null,n),children:this._renderDialogs()})},t}(D.Component);const Rr=Vo(kr);const Br=function(e){var t=e.basename,n=e.store,o=(0,D.useState)(Ln),i=o[0],s=o[1],a=(0,r.v9)(ae.uiTheme);return(0,D.useEffect)((function(){i.getThemeName!==a&&(i.setThemeName(a),s((0,M.Z)({},i)))}),[a]),(0,L.jsx)(D.StrictMode,{children:(0,L.jsx)(wn.VK,{basename:t,children:(0,L.jsxs)(oe.Provider,{value:i,children:[(0,L.jsx)(Rr,{store:n}),(0,L.jsxs)(Dn.Z5,{children:[(0,L.jsx)(Dn.AW,{path:"/boards/:id",element:(0,L.jsx)(pr,{})}),(0,L.jsx)(Dn.AW,{path:"/boards",element:(0,L.jsx)(Ir,{})}),(0,L.jsx)(Dn.AW,{path:"/",element:(0,L.jsx)(Dn.Fg,{to:"/boards",replace:!0})})]})]})})})};var Or=((window||{}).location||{}).pathname;(0,o.render)((0,L.jsx)(r.zt,{store:Sn,children:(0,L.jsx)(Br,{basename:Or,store:Sn})}),document.getElementById("app"))},251:(e,t,n)=>{n(418);var o=n(294),r=60103;if(t.Fragment=60107,"function"==typeof Symbol&&Symbol.for){var i=Symbol.for;r=i("react.element"),t.Fragment=i("react.fragment")}var s=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a=Object.prototype.hasOwnProperty,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var o,i={},c=null,d=null;for(o in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)a.call(t,o)&&!l.hasOwnProperty(o)&&(i[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===i[o]&&(i[o]=t[o]);return{$$typeof:r,type:e,key:c,ref:d,props:i,_owner:s.current}}t.jsx=c,t.jsxs=c},893:(e,t,n)=>{e.exports=n(251)}},e=>{var t;t=431,e(e.s=t)}]);