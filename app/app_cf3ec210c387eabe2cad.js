/*! For license information please see app_cf3ec210c387eabe2cad.js.LICENSE.txt */
"use strict";(self.webpackChunknotes=self.webpackChunknotes||[]).push([[143],{135:(e,t,n)=>{var o=n(935),r=n(216),i=n(403),s=function(e,t){return"Max number ("+t+") of "+e+" reached."},a=8,l=8,c=12;const d={STORAGE_KEY:"notes-manager",DMSG_PREFIX:"m",MSG_SAVED:"Boards saved",MSG_SAVE_FAIL:"Boards not saved",MSG_CLEANED:"localStorage cleaned",MSG_CLEAN_FAIL:"localStorage not cleaned",BOARDS_PREFIX:"b",MAX_BOARDS:a,N_MAX_BOARDS:{descr:s("boards",a)},MAX_COLUMNS:l,COLUMNS_PREFIX:"c",N_MAX_COLUMNS:{descr:s("columns",l)},MAX_NOTES:c,NOTES_PREFIX:"n",N_MAX_NOTES:{descr:s("notes",c)},NLABELS_PREFIX:"nl"};var u=n(857),p=(0,i.PH)("boards/addBoard"),h=(0,i.PH)("boards/removeBoard"),f=(0,i.PH)("boards/setCurrentBoard");const m={app:{boardId:"b-1",boardIds:["b-1"],uiTheme:"DARK"},drawerMsg:[],modal:{id:void 0,data:void 0},boards:{"b-1":{id:"b-1",title:"Board 1",columnIds:["c-1","c-2"]}},notes:{},noteLabels:{},columns:{"c-1":{id:"c-1",title:"Topic 1",noteIds:[],withAdd:!0},"c-2":{id:"c-2",title:"Topic 2",noteIds:[]}}};var v=(0,i.oM)({name:"app",initialState:m.app,reducers:{setUiTheme:function(e,t){var n=t.payload.uiTheme;e.uiTheme=n}},extraReducers:function(e){return e.addCase(p,(function(e,t){var n=t.payload.boardId;e.boardIds.push(n)})).addCase(h,(function(e,t){var n=t.payload.boardId;e.boardIds=e.boardIds.filter((function(e){return e!==n}))})).addCase(f,(function(e,t){var n=t.payload.boardId;e.boardId=n}))}}),g=v.actions,x=v.reducer,b=g.setUiTheme;const C=x;var _=function(e,t){return{id:e,msg:t}},y=(0,i.oM)({name:"drawerMsg",initialState:m.drawerMsg,reducers:{addDrawerMsg:function(e,t){var n=t.payload,o=n.id,r=n.msg;e.unshift(_(o,r))},removeDrawerMsg:function(e,t){var n=t.payload.id;return e.filter((function(e){return e.id!==n}))}}}),N=y.actions,j=y.reducer,I=N.addDrawerMsg,S=N.removeDrawerMsg;const w=j;var D=n(294),T=n(462),E=n(721),A=Array.isArray,M=function(e){return A(e)?e[0]?e[1]:"":e||""};const k=function(e,t){var n=M(e),o=M(t);return n?o?n+" "+o:n:o||void 0};var B=n(893);const R=function(e){var t=e.className,n=e.style,o=e.tabIndex,r=e.onClose;return(0,B.jsx)("button",{tabIndex:o,className:k("bt-svg-close",t),style:n,onClick:r,children:(0,B.jsxs)("svg",{viewBox:"0 0 12 12",width:"100%",height:"100%",preserveAspectRatio:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,B.jsx)("path",{d:"M 0,0 L 12,12"}),(0,B.jsx)("path",{d:"M 12,0 L 0,12"})]})})};const L=function(e){var t=e.rootStyle,n=(e.svgStyle,e.caption),o=e.onClose,r=e.children;return(0,B.jsxs)("div",{className:"dialog__header",style:t,children:[(0,B.jsx)("span",{className:"dialog__caption not-selected",children:n}),r,(0,B.jsx)(R,{className:"dialog__svg-close",onClose:o})]})};const O=function(e,t,n){void 0===t&&(t=3e3),void 0===n&&(n=!0);var o=(0,D.useRef)(null);return(0,D.useCallback)((function(r){var i=n?r:void 0;if(0!==t){var s=o.current,a=r.timeStamp;(null==s||a-s>t)&&(e(i),o.current=a)}else e(i)}),[n,t,e])};var P=Array.isArray,H=function(e){return P(e)?e[0]?e[1]:void 0:e||void 0};const G=function(){var e=H(arguments.length<=0?void 0:arguments[0]),t=H(arguments.length<=1?void 0:arguments[1]);return e?t?(0,T.Z)({},e,t):e:t||void 0};var Z={textDecoration:"underline"},K=function(e,t){var n=function(e,t){return e?t.toLowerCase().indexOf(e):-1}(e,t);if(-1===n)return t;var o=t.substring(0,n),r=t.substring(n,n+1),i=t.substring(n+1);return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("span",{children:o}),(0,B.jsx)("span",{style:Z,children:r}),(0,B.jsx)("span",{children:i})]})};const U=function(e){var t=e.className,n=e.caption,o=e.accessKey,r=e.children;return n?(0,B.jsxs)("span",{className:t,children:[K(o,n),r]}):null};var F={color:"#607d8b"};const X=(0,D.forwardRef)((function(e,t){var n=e.timeout,o=e.className,r=e.style,i=e.clDiv,s=void 0===i?"bt-flat__div":i,a=e.clCaption,l=e.isPrimary,c=e.title,d=void 0===c?"":c,u=e.caption,p=e.accessKey,h=e.children,f=e.isEvent,m=e.onClick,v=O(m,n,f),g=k("bt-flat",o),x=k("bt-flat__span",a),b=G(r,[l,F]),C=function(e,t){return t?e+" ["+t+"]":e}(d,p);return(0,B.jsx)("button",{ref:t,className:g,style:b,accessKey:p,title:C,onClick:v,children:(0,B.jsxs)("div",{className:s,children:[(0,B.jsx)(U,{className:x,caption:u,accessKey:p}),h]})})}));var V="modal-dialog",z={display:"block"},W={display:"none"},$={opacity:0,transform:"scaleY(0)"},Y=function(e){function t(t){var n;return(n=e.call(this,t)||this)._hClickDialog=function(e){e.stopPropagation()},n._refBtClose=function(e){return n._btClose=e},n._renderCommandButton=function(){var e=n.props,t=e.commandButtons,o=e.withoutClose,r=e.onClose;return(0,B.jsxs)("div",{className:"md__actions",children:[t,!o&&(0,B.jsx)(X,{ref:n._refBtClose,caption:"Close",timeout:0,onClick:r})]})},n.wasClosing=!1,n}(0,E.Z)(t,e);var n=t.prototype;return n.shouldComponentUpdate=function(e,t){return e===this.props||!e.isNotUpdate},n.focusBtClose=function(){this.props.isFocusClose&&this._btClose&&this._btClose.focus()},n.componentDidMount=function(){this.focusBtClose()},n.componentDidUpdate=function(e,t){var n=this,o=this.props,r=o.timeout,i=o.isShow;e.isShow&&!i&&(this.wasClosing=!0,setTimeout((function(){n.setState({})}),r)),!1===e.isShow&&i&&this.focusBtClose()},n.render=function(){var e,t,n=this.props,o=n.className,r=n.style,i=n.isShow,s=n.isWithButton,a=n.caption,l=n.captionStyle,c=n.children,d=n.onClose;return this.wasClosing?(t=W,this.wasClosing=!1):(e=i?V+" "+o+" show-popup":V+" "+o+" hide-popup",t=i?z:$),(0,B.jsxs)("div",{role:"dialog",className:e,style:(0,T.Z)({},r,t),onClick:this._hClickDialog,children:[(0,B.jsx)(L,{rootStyle:l,caption:a,onClose:d}),(0,B.jsx)("div",{children:c}),s&&this._renderCommandButton()]})},t}(D.Component);Y.defaultProps={className:"",isWithButton:!0,isNotUpdate:!1,isFocusClose:!0,timeout:450};const J=Y;var q="d-notif__row",Q="d-notif__caption",ee="d-notif__descr",te=function(e){var t=e.isShow,n=e.data,o=void 0===n?{}:n,r=e.TS,i=e.onClose,s=o.caption,a=void 0===s?"":s,l=o.descr,c=void 0===l?"":l;return(0,B.jsxs)(J,{style:r.DIALOG,caption:"Notification",isShow:t,onClose:i,children:[a&&(0,B.jsx)("div",{className:q,children:(0,B.jsx)("p",{className:Q,children:a})}),(0,B.jsx)("div",{className:q,children:(0,B.jsx)("p",{className:ee,children:c})})]})},ne=function(e,t){return e.isShow===t.isShow};const oe=(0,D.memo)(te,ne);const re=(0,D.createContext)();const ie=function(e){return(0,D.useContext)(re).createStyle(e)};var se={themeName:void 0,style:void 0,createStyle:function(e){return{DIALOG:(0,T.Z)({},e.BG),SELECT:{MODAL_PANE:(0,T.Z)({},e.BG)}}}};const ae=se;var le={app:function(e){return e.app||{}},currentBoard:function(e){return le.app(e).boardId},boardIds:function(e){return le.app(e).boardIds||[]},uiTheme:function(e){return le.app(e).uiTheme}},ce={msg:function(e){return e.drawerMsg||[]}},de={boards:function(e){return e.boards||{}},currentBoard:function(e){return de.boards(e)[le.currentBoard(e)]||{}},board:function(e,t){return de.boards(e)[t]||{}},columnIds:function(e,t){return de.board(e,t).columnIds||[]},boardIds:function(e){return le.boardIds(e)}},ue=function(e){return e.noteLabels||{}},pe={columns:function(e){return e.columns||{}},column:function(e,t){return pe.columns(e)[t]||{}},noteIds:function(e,t){return pe.column(e,t).noteIds||[]}};const he={app:le,drawer:ce,board:de,note:{notes:function(e){return e.notes||{}}},column:pe};const fe=function(){return(0,B.jsx)("svg",{viewBox:"0 0 24 24",className:"m-select__svg-arrow",children:(0,B.jsx)("path",{d:"M7 10l5 5 5-5z"})})};var me=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this)._isEventTargetOutside=function(e){return t.rootNode&&t.rootNode.contains&&!t.rootNode.contains(e.target)},t._hClickOutside=function(e){var n=t.props.onClose;t._isEventTargetOutside(e)&&(e.stopPropagation(),n(e))},t._addOutsideListener=function(){document.addEventListener("click",t._hClickOutside,!0)},t._removeOutsideListener=function(){document.removeEventListener("click",t._hClickOutside,!0)},t._initShowMode=function(){t._addOutsideListener(),t.rootNode&&t.rootNode.focus()},t._hKeyDown=function(e){"Escape"===e.key&&(e.preventDefault(),t.props.onClose(e))},t._refRootNode=function(e){return t.rootNode=e},t}(0,E.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.isShow&&this._initShowMode()},n.componentWillUnmount=function(){this._removeOutsideListener()},n.componentDidUpdate=function(e){this.props!==e&&(this.props.isShow?this._initShowMode():this._removeOutsideListener())},n.render=function(){var e=this.props,t=e.className,n=e.style,o=e.children;return(0,B.jsx)("div",{ref:this._refRootNode,className:t,style:n,tabIndex:"0",onKeyDown:this._hKeyDown,children:o})},t}(D.Component);me.defaultProps={onClose:function(){}};const ve=me;var ge={display:"block"},xe={display:"none"};const be=function(e){var t=e.isShow,n=e.className,o=e.style,r=e.children,i=k(n,[t,"show-popup"]),s=G(o,t?ge:xe);return(0,B.jsx)("div",{className:i,style:s,children:r})};var Ce={PANE:{position:"absolute",top:12,zIndex:20,width:"100%",paddingTop:12,paddingBottom:12,lineHeight:1.8,backgroundColor:"rgb(77, 77, 77)",borderRadius:2,boxShadow:"rgba(0, 0, 0, 0.3) 0px 2px 2px 0px, rgba(0, 0, 0, 0.1) 0px 0px 0px 1px"},ITEM:{lineHeight:2.2,paddingLeft:12},ITEM_CURRENT:{color:"greenyellow"}},_e=function(e,t,n,o,r){return e.map((function(e){var r,i=e.value===t.value?(0,T.Z)({},Ce.ITEM,Ce.ITEM_CURRENT):Ce.ITEM,s=o.bind(null,e),a=(r=s,function(e){13===e.which&&r(e)});return(0,B.jsx)("div",{role:"button",tabIndex:"0",style:i,className:n,onClick:s,onKeyPress:a,children:e.caption},e.value)}))};const ye=function(e){var t=e.isShow,n=e.options,o=e.item,r=e.rootStyle,i=e.clItem,s=e.onSelect,a=e.onClose;return(0,B.jsx)(ve,{style:r,isShow:t,onClose:a,children:(0,B.jsx)(be,{isShow:t,style:(0,T.Z)({},Ce.PANE,r),children:_e(n,o,i,s)})})};var Ne="m-select",je="m-select__label",Ie="m-select__div",Se="m-select__div__value",we="m-select__div__bt",De="m-select__line",Te=function(e){function t(t){var n;return(n=e.call(this)||this)._handleOpen=function(){n.setState({isShow:!0})},n._handleClose=function(){n.setState({isShow:!1})},n._handleSelect=function(e,t){t.stopPropagation(),n.props.onSelect(e),n.setState({isShow:!1,item:e})},n.state={isShow:!1,item:t.initItem},n}return(0,E.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.caption,n=e.options,o=e.styleConfig,r=void 0===o?{}:o,i=this.state,s=i.isShow,a=i.item;return(0,B.jsxs)("div",{className:Ne,style:r.ROOT,onClick:this._handleOpen,children:[(0,B.jsx)(ye,{rootStyle:r.MODAL_PANE,isShow:s,item:a,options:n,clItem:r.CL_ITEM,onSelect:this._handleSelect,onClose:this._handleClose}),(0,B.jsx)("label",{className:je,children:t}),(0,B.jsxs)("div",{className:Ie,children:[(0,B.jsx)("div",{className:Se,children:a.caption}),(0,B.jsx)("button",{className:we,tabIndex:"0",children:(0,B.jsx)("div",{children:(0,B.jsx)(fe,{})})}),(0,B.jsx)("div",{className:De})]})]})},t}(D.Component);Te.defaultProps={initItem:{caption:"",value:""}};const Ee=Te;var Ae={caption:"Dark",value:"DARK"},Me=[{caption:"Dark",value:"DARK"},{caption:"Light",value:"WHITE"},{caption:"Sand",value:"SAND"}],ke=function(e){var t=e.isShow,n=e.store,o=e.dispatch,r=e.onClose,i=(0,D.useState)((function(){return function(e){if(!e)return Ae;var t=Me.find((function(t){return t.value===e}));return t?(0,T.Z)({},t):Ae}(le.uiTheme(n.getState()))})),s=i[0],a=i[1],l=ie(ae),c=(0,D.useCallback)((function(e){var t=e.value;t!==s&&(o(b({uiTheme:t})),a(t))}),[]);return(0,B.jsx)(J,{className:"md-settings",style:l.DIALOG,caption:"User Settings",isShow:t,onClose:r,children:(0,B.jsx)("div",{children:(0,B.jsx)(Ee,{styleConfig:l.SELECT,caption:"UI Theme (Default: Dark)",initItem:s,options:Me,onSelect:c})})})},Be=function(e,t){return e.isShow===t.isShow};const Re=(0,D.memo)(ke,Be);var Le={listStyle:"outside none none",marginTop:4,marginLeft:12,marginRight:5,marginBottom:8,textAlign:"left"},Oe={width:"100%",height:"100%"},Pe={display:"block",width:"100%",height:"100%"},He={display:"none"},Ge=function(e,t,n){return e.map((function(e,o){return(0,D.cloneElement)(e,{key:o,id:o,onClick:function(){return n(o)},isSelected:o===t})}))},Ze=function(e,t){return e.map((function(e,n){var o=n===t,r=o?Pe:He;return(0,B.jsx)("div",{style:r,role:"tabpanel",id:"tabpanel-"+n,"aria-labelledby":"tab-"+n,children:(0,D.cloneElement)(e.props.children,{key:"comp"+n,isSelected:o})},"a"+n)}))};const Ke=(0,D.forwardRef)((function(e,t){var n=e.width,o=e.height,r=e.tabsStyle,i=e.children,s=(0,D.useState)(0),a=s[0],l=s[1];return(0,D.useImperativeHandle)(t,(function(){return{getSelectedTabIndex:function(){return a}}}),[a]),(0,B.jsxs)("div",{style:{width:n,height:o},children:[(0,B.jsx)("ul",{style:(0,T.Z)({},Le,r),children:Ge(i,a,l)}),(0,B.jsx)("div",{style:Oe,children:Ze(i,a)})]})}));const Ue=function(e){var t=e.id,n=e.title,o=e.isSelected,r=e.onClick,i=k("tab not-selected",[o,"tab--selected"]),s=function(){o||r()};return(0,B.jsx)("li",{role:"tab",tabIndex:0,className:i,id:"tab-"+t,"aria-selected":o,"aria-controls":"tabpanel-"+t,onClick:s,onKeyDown:function(e){(function(e){return""===e.key||32===e.keyCode})(e)&&s()},children:(0,B.jsx)("span",{children:n})})};var Fe=(0,i.oM)({name:"notes",initialState:{},reducers:{addNote:function(e,t){var n=t.payload.noteId;e[n]=function(e){return{id:e,title:"New Note"}}(n)},deleteNote:function(e,t){delete e[t.payload.noteId]},editNoteTitle:function(e,t){var n=t.payload,o=n.noteId,r=n.title;e[o].title=r},editNoteDescr:function(e,t){var n=t.payload,o=n.noteId,r=n.descr;e[o].descr=r},editNoteLabels:function(e,t){var n=t.payload,o=n.noteId,r=n.labelsTo;e[o].labels=r}}}),Xe=Fe.reducer,Ve=Fe.actions,ze=Ve.editNoteTitle,We=Ve.editNoteDescr;const $e=Xe;const Ye=function(e){return"Delete"===e.key||46===e.keyCode};var Je=function(e){function t(t){var n;return(n=e.call(this,t)||this)._hChange=function(e){n.setState({value:e.target.value})},n._hKeyDown=function(e){Ye(e)&&n.setState({value:""})},n._refInputNode=function(e){return n._inputNode=e},n.state={value:t.initValue},n}(0,E.Z)(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.className,n=e.style,o=e.maxLength,r=this.state.value;return(0,B.jsx)("textarea",{ref:this._refInputNode,className:t,style:n,value:r,maxLength:o,onChange:this._hChange,onKeyDown:this._hKeyDown})},n.getValue=function(){return this.state.value},n.focus=function(){this._inputNode&&this._inputNode.focus&&this._inputNode.focus()},t}(D.Component);Je.defaultProps={initValue:""};const qe=Je;const Qe=function(e){var t=e.refBtClose,n=e.className,o=e.onSave,r=e.onClose;return(0,B.jsxs)("div",{className:n,children:[(0,B.jsx)(X,{caption:"Save",timeout:100,onClick:o}),(0,B.jsx)(X,{ref:t,caption:"Close",timeout:0,onClick:r})]})};const et=function(e){return"object"!=typeof e||null==e?"This note is not exist.":e.descr||"Edit description..."};var tt="md-details__descr",nt="md__actions";const ot=function(e){var t=e.isSelected,n=e.note,o=e.dispatch,r=e.onClose,i=n.id,s=(0,D.useRef)(null),a=(0,D.useRef)(null),l=(0,D.useCallback)((function(){o(We({noteId:i,descr:a.current.getValue()}))}),[i]);(0,D.useEffect)((function(){var e=s.current;t&&e&&e.focus()}),[e]);var c=et(n);return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(qe,{ref:a,className:tt,maxLength:250,initValue:c},i),(0,B.jsx)(Qe,{refBtClose:s,className:nt,onSave:l,onClose:r})]})};var rt=(0,i.PH)("notes/addNote"),it=(0,i.PH)("notes/deleteNote"),st=(0,i.PH)("notes/moveNote"),at=(0,i.PH)("notes/editNoteLabels");const lt=function(e){var t=e.className,n=e.clClose,o=e.item,r=e.onRemove;return(0,B.jsxs)("button",{className:t,style:{backgroundColor:o.color},onClick:r,children:[o.title,r&&(0,B.jsx)("span",{className:n,children:"x"})]})};const ct={HEADER:"header",LOGO:"header__logo-notes",TITLE_GAP:"header__title-gap",LOGO_BOARD:"header-board__logo_notes",HEADER_TITLE:"header__title",TITLE_BOARD:"header-board__title",CONT:"container-list",MODAL_PANE:"modal-pane",MD_ACTIONS:"md__actions",ITEM_CARD:"card",CARD_TITLE:"card__title",CARD_BT:"bt__card",NOTE_LABEL:"note__label",NOTE_LABEL_CLOSE:"note__label__close",INPUT:"input-text",BT_CIRCLE:"bt-circle",NAV_LINK:"nav-link",ML_8:"ml-8"};var dt={paddingBottom:4};const ut=function(e){var t=e.labels,n=e.onRemove;return(0,B.jsx)("div",{style:dt,children:(t||[]).map((function(e){return(0,B.jsx)(lt,{className:ct.NOTE_LABEL,clClose:ct.NOTE_LABEL_CLOSE,item:e,onRemove:n?n.bind(null,e):void 0},e.id||e.title)}))})};const pt=function(e){return"Enter"===e.key||13===e.keyCode};var ht=function(e){return{value:e.value}},ft=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this).state=ht(t.props),t._hChange=function(e){var n=e.target.value;n.length<=t.props.maxLength&&t.setState({value:n})},t._hKeyDown=function(e){if(pt(e)){var n=document.activeElement;n&&"function"==typeof n.blur&&n.blur()}else Ye(e)&&t.setState({value:""})},t}(0,E.Z)(t,e);var n=t.prototype;return n.render=function(){var e=this.props,t=e.className,n=e.style,o=e.onBlur,r=k(ct.INPUT,t),i=this.state.value;return(0,B.jsx)("input",{type:"text",className:r,style:n,value:i,onChange:this._hChange,onBlur:o,onKeyDown:this._hKeyDown})},n.setValue=function(e){this.setState({value:e})},t}(D.Component);ft.defaultProps={maxLength:40};const mt=ft;var vt=function(){};const gt=function(e){var t=e.tabIndex,n=void 0===t?"-1":t,o=e.style,r=e.color,i=e.onClick,s=void 0===i?vt:i,a=e.children,l=r?{backgroundColor:r}:void 0;return(0,B.jsx)("button",{tabIndex:n,style:(0,T.Z)({},o,l),onClick:function(){return s(r)},children:a})};var xt=["#8abb5d","#f7a35c","#795548","#f45b5b","#d2b772","#dda0dd"],bt=["#f1d600","#008b8b","#2f7ed8","#000000","#607d8b","#7092be"],Ct={paddingBottom:4},_t={padding:"4px 0 0 56px"},yt={position:"relative",display:"inline-block",height:32,width:32,marginRight:4,borderRadius:2,verticalAlign:"bottom",boxShadow:"0 2px 2px 0 rgba(0,0,0,0.3), 0 0 0 1px rgba(0,0,0,0.1)"},Nt=(0,T.Z)({},yt,{margin:"0 12px"}),jt=function(e){var t=e.colors,n=e.onClick;return(0,B.jsx)(B.Fragment,{children:t.map((function(e){return(0,B.jsx)(gt,{color:e,style:yt,onClick:n},e)}))})};const It=(0,D.forwardRef)((function(e,t){var n=e.initColor,o=void 0===n?"#2f7ed8":n,r=(0,D.useState)(o),i=r[0],s=r[1],a=(0,D.useCallback)((function(e){e&&s(e)}),[]),l=(0,D.useCallback)((function(){return s(o)}),[o]);return(0,D.useImperativeHandle)(t,(function(){return{getColor:function(){return i}}}),[i]),(0,B.jsxs)("div",{style:Ct,children:[(0,B.jsxs)("div",{children:[(0,B.jsx)(gt,{style:Nt,color:i,onClick:l}),(0,B.jsx)(jt,{colors:xt,onClick:a})]}),(0,B.jsx)("div",{style:_t,children:(0,B.jsx)(jt,{colors:bt,onClick:a})})]})}));const St={toTitle:function(e){if("string"!=typeof e)return"";var t=e.trim();return t&&t.length>0?t[0].toUpperCase()+t.slice(1):t},addLabel:function(e,t,n){return!t||e.find((function(e){return e.title===t}))?e:e.concat({title:t,color:n})},removeLabel:function(e,t){return e.filter((function(e){return e.title!==t.title}))}};var wt=St.toTitle,Dt=St.addLabel,Tt=St.removeLabel,Et={LABELS:{paddingTop:4,paddingLeft:12,paddingBottom:8},BT_ADD:{marginLeft:16}};const At=function(e){var t=e.isSelected,n=e.note,o=e.dispatch,r=e.onClose,i=n.id,s=(0,D.useState)((function(){return n.labels||[]})),a=s[0],l=s[1],c=(0,D.useRef)(null),d=(0,D.useRef)(""),u=(0,D.useRef)(null),p=(0,D.useRef)(null),h=(0,D.useCallback)((function(e){d.current=e.target.value}),[]),f=(0,D.useCallback)((function(){l((function(e){return Dt(e,wt(d.current),p.current.getColor())}),u.current.setValue(""))}),[]),m=(0,D.useCallback)((function(e){l((function(t){return Tt(t,e)}))}),[]),v=(0,D.useCallback)((function(){o(at({noteId:i,labels:a}))}),[i,a]);return(0,D.useEffect)((function(){var e=c.current;t&&e&&e.focus()}),[e]),(0,B.jsxs)(B.Fragment,{children:[(0,B.jsxs)("div",{style:Et.LABELS,children:[(0,B.jsx)(ut,{labels:a,onRemove:m}),(0,B.jsx)(mt,{ref:u,onBlur:h}),(0,B.jsx)(X,{clCaption:ct.CARD_BT,style:Et.BT_ADD,caption:"AddLabel",title:"Click to add a new label",timeout:400,onClick:f})]}),(0,B.jsx)(It,{ref:p}),(0,B.jsx)(Qe,{refBtClose:c,className:ct.MD_ACTIONS,onSave:v,onClose:r})]})};var Mt="md-details",kt={CAPTION:{marginBottom:0}},Bt=function(e){var t,n,o,r=e.isShow,i=e.data,s=e.dispatch,a=e.onClose,l=ie(ae),c=(t=i.title,"Details: "+(o=(n=void 0===t?"":t).substring(0,12))+(n.length>o.length?"...":""));return(0,B.jsx)(J,{className:Mt,style:l.DIALOG,captionStyle:kt.CAPTION,caption:c,isShow:r,withoutClose:!0,onClose:a,children:(0,B.jsxs)(Ke,{width:"100%",children:[(0,B.jsx)(Ue,{title:"Descr",children:(0,B.jsx)(ot,{note:i,dispatch:s,onClose:a})}),(0,B.jsx)(Ue,{title:"Labels",children:(0,B.jsx)(At,{note:i,dispatch:s,onClose:a})})]},i.id)})},Rt=function(e,t){return e.isShow===t.isShow};const Lt=(0,D.memo)(Bt,Rt);var Ot,Pt="NOTIF",Ht="SETTINGS",Gt="DETAILS",Zt=((Ot={DF:oe})[Pt]=oe,Ot[Ht]=Re,Ot[Gt]=Lt,Ot);const Kt={getDialog:function(e){return Zt[e]||Zt.DF}};var Ut=(0,i.oM)({name:"modal",initialState:{id:null,data:null},reducers:{showModal:function(e,t){var n=t.payload;return{id:n.id,data:n.data}}}}),Ft=Ut.actions,Xt=Ut.reducer,Vt=Ft.showModal,zt=function(e){return Vt({id:Pt,data:e})};const Wt=Xt;var $t=(0,i.PH)("columns/addColumn"),Yt=(0,i.PH)("columns/removeColumn"),Jt=(0,i.PH)("columns/moveColumn");const qt=function(e){return function(t,n){var o;return(0,T.Z)({},t,((o={})[e]=n,o))}};var Qt=function(e,t){return function(n,o,r,i,s){var a=[].concat(s[e]);a.splice(r.index,1),a.splice(i.index,0,o),n[s.id]=t(s,a)}},en=function(e,t){return function(n,o,r,i,s,a){var l=[].concat(s[e]);l.splice(r.index,1);var c=[].concat(a[e]);c.splice(i.index,0,o),n[s.id]=t(s,l),n[a.id]=t(a,c)}};const tn=function(e){var t=qt(e);return{idsTo:t,moveInternal:Qt(e,t),moveExternal:en(e,t)}};var nn=tn("columnIds"),on=nn.moveInternal,rn=nn.moveExternal,sn=(0,i.oM)({name:"boards",initialState:m.boards,reducers:{editBoardTitle:function(e,t){var n=t.payload,o=n.boardId,r=n.title;e[o].title=r},addBoard:function(e,t){var n=t.payload.boardId;e[n]={id:n,title:"New Board",columnIds:[]}},removeBoard:function(e,t){delete e[t.payload.boardId]}},extraReducers:function(e){return e.addCase($t,(function(e,t){var n=t.payload,o=n.boardId,r=n.columnId;e[o].columnIds.push(r)})).addCase(Yt,(function(e,t){var n=t.payload,o=n.boardId,r=n.columnId,i=e[o];i.columnIds=i.columnIds.filter((function(e){return e!==r}))})).addCase(Jt,(function(e,t){var n=t.payload,o=n.draggableId,r=n.source,i=n.destination,s=e[r.droppableId],a=e[i.droppableId];s===a?on(e,o,r,i,s):rn(e,o,r,i,s,a)}))}}),an=sn.actions,ln=sn.reducer,cn=an.editBoardTitle;const dn=ln;const un=(0,i.oM)({name:"noteLabels",initialState:m.noteLabels,extraReducers:function(e){return e.addCase(at,(function(e,t){t.payload.newLabels.forEach((function(t){e[t.id]=t}))}))}}).reducer;var pn=tn("noteIds"),hn=pn.moveInternal;const fn={crColumn:function(e,t){return void 0===t&&(t=!0),{id:e,title:"New Topic",noteIds:[],withAdd:t}},moveExternal:pn.moveExternal,moveInternal:hn};var mn=fn.crColumn,vn=fn.moveExternal,gn=fn.moveInternal,xn=(0,i.oM)({name:"columns",initialState:m.columns,reducers:{editColumnTitle:function(e,t){var n=t.payload,o=n.columnId,r=n.title;e[o].title=r},toggleColumn:function(e,t){var n=t.payload.columnId,o=e[n];e[n].isHide=!o.isHide},addColumn:function(e,t){var n=t.payload.columnId;e[n]=mn(n)},removeColumn:function(e,t){delete e[t.payload.columnId]}},extraReducers:function(e){e.addCase(rt,(function(e,t){var n=t.payload,o=n.columnId,r=n.noteId;e[o].noteIds.unshift(r)})).addCase(it,(function(e,t){var n=t.payload,o=n.columnId,r=n.noteId,i=e[o];i.noteIds=i.noteIds.filter((function(e){return e!==r}))})).addCase(st,(function(e,t){var n=t.payload,o=n.draggableId,r=n.source,i=n.destination,s=e[r.droppableId],a=e[i.droppableId];s===a?gn(e,o,r,i,s):vn(e,o,r,i,s,a)}))}}),bn=xn.actions,Cn=xn.reducer,_n=bn.editColumnTitle,yn=bn.toggleColumn;const Nn=Cn;const jn=(0,u.UY)({app:C,drawerMsg:w,modal:Wt,boards:dn,notes:$e,noteLabels:un,columns:Nn});const In=function(e){return void 0===e&&(e="a"),e+"-"+(Date.now().toString(36)+Math.random().toString(36).substr(2,9)).toUpperCase().substr(12)};const Sn=function(e){var t=e.getState,n=e.dispatch;return function(e){return function(o){if(o.type===p.type){if(i=t(),le.boardIds(i).length>=d.MAX_BOARDS)return n(zt(d.N_MAX_BOARDS)),!1;var r=In(d.BOARDS_PREFIX);return o.payload={boardId:r},e(o),r}var i;return e(o)}}};const wn=function(e){var t=e.getState,n=e.dispatch;return function(e){return function(o){if(o.type===$t.type){if(function(e,t){return de.columnIds(e,t).length>=d.MAX_COLUMNS}(t(),o.payload.boardId))return n(zt(d.N_MAX_COLUMNS)),!1;var r=In(d.COLUMNS_PREFIX);return o.payload.columnId=r,e(o),r}return e(o)}}};const Dn=function(e){var t=e.getState,n=e.dispatch;return function(e){return function(o){if(o.type===rt.type){var r=o.payload.columnId;if(function(e,t){return pe.noteIds(e,t).length>=d.MAX_NOTES}(t(),r))return n(zt(d.N_MAX_NOTES)),!1;var i=In(d.NOTES_PREFIX);return o.payload.noteId=i,e(o),i}return e(o)}}};const Tn=function(e){return Object.keys(e).map((function(t){return e[t]}))};const En=function(e){var t=e.getState;e.dispatch;return function(e){return function(n){if(n.type===at.type){var o=ue(t()),r=n.payload;n.payload=(0,T.Z)({},r,function(e,t){var n=[],o=[];if(!e||"object"!=typeof e||!Array.isArray(t))return{labelsTo:n,newLabels:o};var r=Tn(e);return t.forEach((function(e){if(e.id)n.push(e);else{var t=r.find(function(e){return function(t){return t.title===e.title&&t.color===e.color}}(e));t?(e.id=t.id,n.push(e)):(e.id=In(d.NLABELS_PREFIX),n.push(e),o.push(e))}})),{labelsTo:n,newLabels:o}}(o,r.labels))}return e(n)}}};var An=(0,i.PH)("app/saveBoard"),Mn=(0,i.PH)("app/cleanStorage");const kn=function(e){var t=e.getState,n=e.dispatch;return function(e){return function(o){switch(o.type){case An.type:try{return window.localStorage.setItem(d.STORAGE_KEY,JSON.stringify((0,T.Z)({},t(),{drawerMsg:[],modal:{id:null,data:null}}))),n(I({msg:d.MSG_SAVED})),!0}catch(e){return n(I({msg:d.MSG_SAVE_FAIL})),console.log(e.msg),!1}case Mn.type:try{return window.localStorage.removeItem(d.STORAGE_KEY),n(I({msg:d.MSG_CLEANED})),!0}catch(e){return n(I({msg:d.MSG_CLEAN_FAIL})),console.log(e.msg),!1}default:return e(o)}}}};var Bn=function(e){return e<10?"0"+e:""+e};const Rn=function(){return function(e){return function(t){if(t.type===I.type){var n=t.payload,o=In(d.DMSG_PREFIX);return n.id=o,n.msg=(r=n.msg,i=new Date,Bn(i.getHours())+":"+Bn(i.getMinutes())+" "+r),e(t),o}var r,i;return e(t)}}};var Ln=Array.isArray;const On=function(e){var t=e.getState;return function(e){return function(n){if(n.type===Yt.type){var o=pe.noteIds(t(),n.payload.columnId);if(!Ln(o)||0!==o.length)return!1}return e(n)}}};var Pn=Array.isArray;var Hn=[].concat([Sn,wn,Dn,En,kn,Rn,On,function(e){var t=e.getState;return function(e){return function(n){if(n.type===h.type){var o=de.columnIds(t(),n.payload.boardId);if(!Pn(o)||0!==o.length)return!1}return e(n)}}},function(){return function(e){return function(t){return t.type!==ze.type||"string"==typeof(n=t.payload.title)&&n.trim()?e(t):(t.payload.title="New Note",e(t),!1);var n}}}]);const Gn=(0,i.xC)({reducer:jn,preloadedState:function(){var e;try{var t=window.localStorage.getItem(d.STORAGE_KEY);t&&(e=JSON.parse(t))}catch(e){console.log(e.msg)}return e||m}(),devTools:!1,middleware:function(e){return Hn}});var Zn,Kn=n(727),Un=n(977),Fn={BG:{},ITEM:{}},Xn=Object.assign,Vn=[function(e,t){document.body.style.backgroundColor=t.BG_BODY},function(e,t){Xn(e.BG,{backgroundColor:t.BG})},function(e,t){Xn(e.ITEM,{backgroundColor:t.BG,border:"1px solid "+t.BG})}],zn={DEFAULT:"DARK",DARK:"DARK",WHITE:"WHITE",SAND:"SAND"},Wn=((Zn={})[zn.DARK]={pallete:{BG_BODY:"#5f5f5f",BG:"#4d4d4d",BG_HEADER:"#3a6799",C_HEADER:"#8a8a8a"},clSuffix:""},Zn[zn.WHITE]={pallete:{BG_BODY:"#d2d2d2",BG:"#ebf1f5",BG_HEADER:"rgb(0, 150, 200)",C_HEADER:"#4d4d4d"},clSuffix:"--white"},Zn[zn.SAND]={pallete:{BG_BODY:"darkgrey",BG:"#e8e0cb",BG_HEADER:"rgb(0, 150, 200)",C_HEADER:"#4d4d4d"},clSuffix:"--sand"},Zn),$n={},Yn=function(e){var t,n=Wn[e],o=n.clSuffix,r=n.pallete;void 0===(t=o)&&(t=""),Object.keys($n).forEach((function(e){Fn[e]=$n[e]+t})),function(e,t){Vn.forEach((function(n){return n(e,t)}))}(Fn,r)},Jn={themeName:zn.DEFAULT,_init:function(){this.setThemeName(zn.DEFAULT)},getThemeName:function(){return this.themeName},setThemeName:function(e){this.themeName=zn[e]||zn.DEFAULT,Yn(this.themeName)},createStyle:function(e){return this.themeName!==e.themeName&&(e.style=e.createStyle(Fn,this.themeName),e.themeName=this.themeName),e.style}};Jn._init();const qn=Jn;var Qn=n(164);const eo=function(e){if(!e||"object"!=typeof e)return!1;var t=e.destination,n=e.source;return!t||!n||t.droppableId===n.droppableId&&t.index===n.index};var to={themeName:void 0,style:void 0,createStyle:function(e){return{COMP:(0,T.Z)({},e.BG)}}};const no=to;const oo=function(e){var t=e.className,n=e.style,o=e.children,r=ie(no);return(0,B.jsx)("header",{className:t,style:(0,T.Z)({},n,r.COMP),children:o})};const ro=function(e){var t=(0,D.useState)((function(){return!!e})),n=t[0],o=t[1];return[n,(0,D.useCallback)((function(){return o((function(e){return!e}))}),[])]};var io={width:"auto",height:"auto"},so={transform:"translateX(-264px)",pointerEvents:"none"},ao={transform:"translate(0px, 0px)"},lo={opacity:0,zIndex:-1,transition:"opacity 195ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"},co={opacity:1,zIndex:1e3,transition:"opacity 225ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"};const uo=function(e){var t=e.btStyle,n=e.captionComp,o=e.children,r=ro(!1),i=r[0],s=r[1],a=ie(no),l=i?ao:so,c=i?co:lo,d=i?s:void 0;return[(0,B.jsx)("button",{className:"drawer-bt",style:(0,T.Z)({},io,t),"aria-label":"Open Drawer",onClick:s,children:n},"bt-drawer"),(0,B.jsx)("div",{role:"presentation","aria-hidden":!i,className:"drawer-modal",style:c,onClick:d},"wrapper"),(0,B.jsx)("aside",{className:"drawer-left",style:(0,T.Z)({},l,a.COMP),children:o},"aside")]};const po=function(e){var t=e.className,n=void 0===t?ct.LOGO:t,o=e.style,r=e.title,i=void 0===r?"Logo of web app Notes v0.3.0":r;return(0,B.jsx)("span",{className:n,style:o,title:i,children:(0,B.jsxs)("svg",{viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:"2",strokeWidth:"2",children:[(0,B.jsx)("rect",{ry:"1.8825414",rx:"194.14471",y:"1.434558",x:"19.176462",height:"12.460618",width:"10.85316",fill:"#8ecc2d",stroke:"#8ecc2d"}),(0,B.jsx)("rect",{ry:"1.87537",rx:"204.478",y:"16.639841",x:"8.8410215",height:"13.752699",width:"18.307165",fill:"#232f3b",stroke:"#232f3b"}),(0,B.jsx)("rect",{ry:"1.87537",rx:"204.478",y:"3.4229634",x:"2.5897937",height:"10.894996",width:"10.001963",fill:"#a487d4",stroke:"#a487d4"})]})})};const ho=function(e,t){return void 0===t&&(t="Notes"),null==e?t+": Not Exist":t+": "+(e.title||"")+" ("+(Array.isArray(e.columnIds)?e.columnIds.length:0)+")"};const fo=function(){var e=(0,r.v9)(he.board.currentBoard);return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(po,{className:ct.LOGO_BOARD},"logo"),(0,B.jsx)("span",{className:ct.HEADER_TITLE+" "+ct.TITLE_BOARD,children:ho(e)})]})},mo="drawer__title",vo="drawer__list",go="drawer__list-bt",xo="drawer__list-bt__badge";const bo=function(e){var t=e.board;return(0,B.jsx)("div",{className:mo,children:ho(t,"Topics")})};var Co=function(e){var t=e.isHide;return(0,B.jsx)("span",{className:xo,children:t?"H":"S"})};const _o=function(e){var t=e.topic,n=e.onClick;if(!t)return null;var o=t.isHide,r=t.title,i="Click to "+(o?"show":"hide")+" topic";return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(X,{className:go,caption:r,title:i,timeout:0,onClick:n}),(0,B.jsx)(Co,{isHide:o})]})};var yo={listStyleType:"none"},No={position:"relative"},jo=function(){},Io=function(e){var t=e.board,n=e.columns,o=e.toggleColumn,r=void 0===o?jo:o;return(t.columnIds||[]).map((function(e){return(0,B.jsx)("li",{style:No,children:(0,B.jsx)(_o,{topic:n[e],onClick:function(){return r({columnId:e})}})},e)}))};const So=function(e){return(0,B.jsx)("ul",{style:yo,children:Io(e)})};var wo={removeDrawerMsg:S};const Do=(0,r.$j)((function(e){return{items:ce.msg(e)}}),wo)((function(e){var t=e.items,n=e.removeDrawerMsg;return(0,B.jsx)("ul",{className:"drawer__msg-ul",children:t.map((function(e){return(0,B.jsx)("li",{className:"drawer__msg-li",children:(0,B.jsx)("button",{className:"drawer__msg-bt",onClick:function(){return n({id:e.id})},children:e.msg})},e.id)}))})}));var To={toggleColumn:yn};const Eo=(0,r.$j)((function(e){return{board:he.board.currentBoard(e),columns:he.column.columns(e)}}),To)((function(e){var t=e.board,n=e.columns,o=e.toggleColumn;return(0,B.jsxs)("div",{className:vo,children:[(0,B.jsx)(bo,{board:t}),(0,B.jsx)(So,{board:t,columns:n,toggleColumn:o}),(0,B.jsx)(Do,{})]})}));const Ao=function(){return(0,B.jsx)(uo,{captionComp:(0,B.jsx)(fo,{}),children:(0,B.jsx)(Eo,{})})};var Mo={position:"absolute",top:4,right:16},ko={transform:"translateX(264px)",pointerEvents:"none"},Bo={transform:"translate(0px, 0px)"},Ro={opacity:0,zIndex:-1,transition:"opacity 195ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"},Lo={opacity:1,zIndex:1e3,transition:"opacity 225ms cubic-bezier(0.4, 0, 0.2, 1) 0ms"};const Oo=function(e){var t=e.btStyle,n=e.children,o=ro(!1),r=o[0],i=o[1],s=ie(no),a=r?Bo:ko,l=r?Lo:Ro,c=r?i:void 0;return[(0,B.jsx)("button",{className:"drawer-bt",style:(0,T.Z)({},Mo,t),"aria-label":"Open Drawer",onClick:i,children:(0,B.jsx)("span",{className:"drawer-span",children:(0,B.jsxs)("svg",{className:"drawer-svg",focusable:"false",viewBox:"0 0 24 24","aria-hidden":"true",children:[(0,B.jsx)("path",{fill:"none",d:"M0 0h24v24H0z"}),(0,B.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"})]})})},"bt-drawer"),(0,B.jsx)("div",{role:"presentation","aria-hidden":!r,className:"drawer-modal",style:l,onClick:c},"wrapper"),(0,B.jsx)("aside",{className:"drawer",style:(0,T.Z)({},a,s.COMP),children:n},"aside")]};var Po="drawer__list-bt",Ho={padding:"16px 0 8px 0",marginLeft:16},Go={listStyleType:"none"},Zo={showSettings:function(){return Vt({id:Ht})},saveBoard:An,cleanStorage:Mn};const Ko=(0,r.$j)(null,Zo)((function(e){var t=e.showSettings,n=e.saveBoard,o=e.cleanStorage;return(0,B.jsxs)("div",{className:"drawer__list",children:[(0,B.jsx)("div",{className:"header__title",style:Ho,children:"Web App Notes v0.3.0"}),(0,B.jsxs)("ul",{style:Go,children:[(0,B.jsx)("li",{children:(0,B.jsx)(X,{className:Po,caption:"User Settings",title:"Click to open user settings dialog",onClick:t})}),(0,B.jsx)("li",{children:(0,B.jsx)(X,{className:Po,caption:"Save Boards",title:"Click to save boards to localStorage",onClick:n})}),(0,B.jsx)("li",{children:(0,B.jsx)(X,{className:Po,caption:"Clean Storage",title:"Click to remove boards from localStorage",onClick:o})})]}),(0,B.jsx)(Do,{})]})}));const Uo=function(){return(0,B.jsx)(Oo,{children:(0,B.jsx)(Ko,{})})};const Fo=function(e){var t=e.addColumn;return(0,B.jsxs)(oo,{className:ct.HEADER,children:[(0,B.jsx)(Ao,{}),(0,B.jsx)(X,{caption:"Add Topic",title:"Click to add topic to board",accessKey:"a",timeout:500,onClick:t}),(0,B.jsx)("nav",{children:(0,B.jsx)(Kn.OL,{to:"/boards",className:ct.NAV_LINK+" "+ct.ML_8,children:"ToBoards"})}),(0,B.jsx)(Uo,{})]})};const Xo=function(e){var t=e.children;return(0,B.jsx)("main",{className:ct.CONT,children:t})};const Vo=function(e){return!Array.isArray(e)||0===e.length};const zo=function(e){var t=e.className,n=e.style,o=e.svgStyle,r=e.title,i=e.onClick;return(0,B.jsx)("button",{className:k("bt-svg-more",t),style:n,title:r,onClick:i,children:(0,B.jsxs)("svg",{style:o,width:"6px",height:"22px",viewBox:"0 0 6 22",preserveAspectRatio:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,B.jsx)("circle",{cx:"3",cy:"4",r:"2"}),(0,B.jsx)("circle",{cx:"3",cy:"11",r:"2"}),(0,B.jsx)("circle",{cx:"3",cy:"18",r:"2"})]})})};var Wo={paddingLeft:8,width:"100%",textAlign:"left"};const $o=function(e){var t=e.style,n=e.isShow,o=e.onHideTopic,r=e.onAddNote,i=e.onClose,s=ie(no);return(0,B.jsxs)(ve,{className:ct.MODAL_PANE,style:(0,T.Z)({},t,s.COMP),isShow:n,onClose:i,children:[(0,B.jsx)(X,{style:Wo,caption:"Hide Topic",title:"Click to hide Topic",onClick:o}),(0,B.jsx)(X,{style:Wo,caption:"Add Note",title:"Click to add new Note",timeout:100,onClick:r})]})};var Yo={themeName:void 0,style:void 0,createStyle:function(e){return{ITEM:(0,T.Z)({},e.ITEM)}}};const Jo=Yo;var qo={display:"none"};var Qo={padding:"8px 0",lineHeight:"36px"};var er={display:"inline-block",paddingLeft:12,fontWeight:600};const tr={Item:function(e){var t=e.isHide,n=e.children,o=ie(Jo),r=G(o.ITEM,[t,qo]);return(0,B.jsx)("section",{className:ct.ITEM_CARD,style:r,children:n})},Header:function(e){var t=e.children;return(0,B.jsx)("div",{style:Qo,children:t})},Title:function(e){return(0,B.jsx)(mt,(0,T.Z)({className:ct.CARD_TITLE},e))},Counter:function(e){var t=e.style,n=e.value;return(0,B.jsx)("span",{style:(0,T.Z)({},er,t),children:n})},BtCircle:function(e){var t=e.style,n=e.caption,o=e.title,r=e.tabIndex,i=void 0===r?"-1":r,s=e.onClick;return(0,B.jsx)("button",{className:ct.BT_CIRCLE,style:t,tabIndex:i,title:o,onClick:s,children:n})}};var nr=n(366),or=["className","style","innerRef","isDraggingOver","notDraggingStyle","children"],rr={ROOT:{minHeight:100},DRAGGING_OVER:{border:"2px dashed lightgreen"},NOT_DRAGGING_OVER:{border:"2px dashed transparent"}};const ir=function(e){var t=e.className,n=e.style,o=e.innerRef,r=e.isDraggingOver,i=e.notDraggingStyle,s=e.children,a=(0,nr.Z)(e,or),l=function(e,t){return e?rr.DRAGGING_OVER:t||rr.NOT_DRAGGING_OVER}(r,i);return(0,B.jsx)("div",(0,T.Z)({},a,{ref:o,className:t,style:(0,T.Z)({},rr.ROOT,n,l),children:s}))};var sr=["draggableProps","innerRef","isDragging","dragHandleProps"],ar=["style"],lr=function(e,t){return function(n){var o=n.draggableProps,r=n.innerRef,i=n.isDragging,s=n.dragHandleProps,a=(0,nr.Z)(n,sr),l=t||{},c=l.dragBg,d=l.notDragBg,u=l.isDragHanlerProps,p=o.style,h=(0,nr.Z)(o,ar),f=function(e,t,n){return void 0===t&&(t="#1e90ff"),void 0===n&&(n="transparent"),{backgroundColor:e?t:n}}(i,c,d),m=u?void 0:s;return(0,B.jsx)("div",(0,T.Z)({ref:r,style:(0,T.Z)({},p,f)},h,m,{children:(0,B.jsx)(e,(0,T.Z)({dragHandleProps:u?s:void 0},a))}))}};const cr=function(e,t){return"function"==typeof e?lr(e,t):function(t){return lr(t,e)}};var dr=["isDetails"];const ur=function(e){var t=e.isDetails,n=(0,nr.Z)(e,dr),o=k("note__handle",[t,"note__handle--open"]);return(0,B.jsx)("span",(0,T.Z)({className:o},n))};const pr=function(e){return function(t){function n(){return t.apply(this,arguments)||this}return(0,E.Z)(n,t),n.prototype.render=function(){var t=this;return(0,B.jsx)(re.Consumer,{children:function(n){return(0,B.jsx)(e,(0,T.Z)({},t.props,{theme:n}))}})},n}(D.Component)};var hr={BT:{paddingLeft:8,width:"100%",textAlign:"left"}};const fr=pr((function(e){var t=e.theme,n=e.className,o=e.style,r=e.isShow,i=e.onClose,s=e.onEdit,a=e.onRemove,l=t.createStyle(no);return(0,B.jsxs)(ve,{className:ct.MODAL_PANE+" "+(n||""),style:(0,T.Z)({},o,l.COMP),isShow:r,onClose:i,children:[(0,B.jsx)(X,{style:hr.BT,caption:"Edit Details",onClick:s}),(0,B.jsx)(X,{style:hr.BT,caption:"Remove Note",onClick:a})]})}));var mr="note__caption",vr="note__bt-more",gr="note__menu-more";const xr=function(e){var t=e.dragHandleProps,n=e.isDetails,o=e.onClickHandle,r=e.noteTitle,i=e.onBlurTitle,s=e.isMenuMore,a=e.onClickMenuMore,l=e.onCloseMenuMore,c=e.onEditDetails,d=e.onRemoveNote;return(0,B.jsxs)("div",{children:[(0,B.jsx)(ur,(0,T.Z)({},t,{isDetails:n,onClick:o})),(0,B.jsx)(mt,{className:mr,value:r,onBlur:i}),(0,B.jsx)(zo,{className:vr,title:"Click to open note menu",onClick:a}),s&&(0,B.jsx)(fr,{isShow:s,className:gr,onClose:l,onEdit:c,onRemove:d})]})};const br=function(e){var t=e.isShow,n=e.note,o=e.editDetails,r=et(n);return(0,B.jsx)(be,{className:"note__details",isShow:t,children:(0,B.jsxs)("div",{onClick:o,children:[(0,B.jsx)(ut,{labels:n.labels}),(0,B.jsx)("div",{children:r})]})})};var Cr=function(e){function t(t){var n;return(n=e.call(this,t)||this)._openMenuMore=function(){n.state.isMenuMore||n.setState({isMenuMore:!0})},n._closeMenuMore=function(){n.setState({isMenuMore:!1})},n._deleteNote=function(){var e=n.props;(0,e.deleteNote)({columnId:e.columnId,noteId:e.note.id})},n._blurTitle=function(e){var t=e.target.value,o=n.props,r=o.note,i=o.editNoteTitle;t!==r.title&&i({noteId:r.id,title:t})},n._toggleDetails=function(){n.setState((function(e){return{isDetails:!e.isDetails}}))},n._editDetails=function(){var e=n.props,t=e.note;(0,e.editDetails)(t),n._closeMenuMore()},n.state=function(e){return{noteTitle:e.note.title,isMenuMore:!1,isDetails:!1}}(t),n}return(0,E.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.dragHandleProps,n=e.note,o=this.state,r=o.noteTitle,i=o.isMenuMore,s=o.isDetails;return(0,B.jsxs)("div",{className:"note",id:n.id,children:[(0,B.jsx)(xr,{dragHandleProps:t,isDetails:s,onClickHandle:this._toggleDetails,noteTitle:r,onBlurTitle:this._blurTitle,isMenuMore:i,onClickMenuMore:this._openMenuMore,onCloseMenuMore:this._closeMenuMore,onEditDetails:this._editDetails,onRemoveNote:this._deleteNote}),(0,B.jsx)(br,{isShow:s,note:n,editDetails:this._editDetails})]})},t}(D.Component),_r={deleteNote:it,editNoteTitle:ze,editDetails:function(e){return Vt({id:Gt,data:e})}};const yr=(0,r.$j)(null,_r)(Cr);var Nr=cr({notDragBg:"#9e9e9e",isDragHanlerProps:!0})(yr);Nr.displayName="DnDNote";const jr=Nr;var Ir={minHeight:50},Sr={border:"2px solid #9e9e9e"};const wr=function(e){var t=e.cId,n=e.noteIds,o=e.notes;return(0,B.jsx)(Qn.bK,{droppableId:t,children:function(e,r){return function(e){var t=e.provided,n=e.snapshot,o=e.noteIds,r=e.notes,i=e.cId;return(0,B.jsxs)(ir,(0,T.Z)({},t.droppableProps,{innerRef:t.innerRef,isDraggingOver:n.isDraggingOver,style:Ir,notDraggingStyle:Sr,children:[o.map((function(e,t){return(0,B.jsx)(Qn._l,{draggableId:e,index:t,children:function(t,n){return(0,B.jsx)(jr,{draggableProps:t.draggableProps,innerRef:t.innerRef,isDragging:n.isDragging,dragHandleProps:t.dragHandleProps,note:r[e],columnId:i})}},e)})),t.placeholder]}))}({provided:e,snapshot:r,noteIds:n,notes:o,cId:t})}})};var Dr={marginRight:8},Tr={position:"absolute",width:150},Er=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this).state={isMenuMore:!1},t._openMenuMore=function(){t.state.isMenuMore||t.setState({isMenuMore:!0})},t._closeMenuMore=function(){t.setState({isMenuMore:!1})},t._hHideTopic=function(){var e=t.props;(0,e.toggleColumn)({columnId:e.column.id})},t._hAddNewTask=function(){var e=t.props,n=e.column;(0,e.addNote)({columnId:n.id})},t._hBlurTitle=function(e){var n=t.props,o=n.column;(0,n.editColumnTitle)({columnId:o.id,title:e.target.value})},t._hRemoveColumn=function(){var e=t.props,n=e.boardId,o=e.column;(0,e.removeColumn)({boardId:n,columnId:o.id})},t}return(0,E.Z)(t,e),t.prototype.render=function(){var e=this.state.isMenuMore,t=this.props,n=t.column,o=t.notes,r=n.id,i=n.isHide,s=n.title,a=n.withAdd,l=n.noteIds;return(0,B.jsxs)(tr.Item,{isHide:i,children:[(0,B.jsxs)(tr.Header,{children:[(0,B.jsx)(zo,{style:Dr,title:"Click to open topic menu",onClick:this._openMenuMore}),e&&(0,B.jsx)($o,{style:Tr,isShow:e,onAddNote:this._hAddNewTask,onHideTopic:this._hHideTopic,onClose:this._closeMenuMore}),(0,B.jsx)(tr.Title,{value:s,onBlur:this._hBlurTitle}),(0,B.jsx)(tr.Counter,{value:l.length}),a&&(0,B.jsx)(X,{clCaption:ct.CARD_BT,caption:"AddNote",title:"Click to add a new note",timeout:1e3,onClick:this._hAddNewTask})]}),(0,B.jsx)(wr,{cId:r,noteIds:l,notes:o}),(0,B.jsx)("div",{children:Vo(l)&&(0,B.jsx)(X,{clCaption:ct.CARD_BT,caption:"Remove Topic",onClick:this._hRemoveColumn})})]})},t}(D.Component),Ar={editColumnTitle:_n,removeColumn:Yt,toggleColumn:yn};const Mr=(0,r.$j)(null,Ar)(Er);var kr=function(e){var t=e.boardId,n=e.columnIds,o=e.columns,r=e.notes,i=e.addNote;return(n||[]).map((function(e){var n=o[e];return(0,B.jsx)(Mr,{boardId:t,column:n,notes:r,addNote:i},n.id)}))},Br={moveNote:st,addNote:rt,addColumn:$t};const Rr=(0,r.$j)((function(e){return{board:he.board.currentBoard(e),notes:he.note.notes(e),columns:he.column.columns(e)}}),Br)((function(e){var t=e.board,n=e.notes,o=e.columns,r=e.addNote,i=e.moveNote,s=e.addColumn,a=t.id,l=t.columnIds,c=(0,D.useCallback)((function(e){eo(e)||i(e)}),[]),d=(0,D.useCallback)((function(){s({boardId:a})}),[]);return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(Fo,{addColumn:d}),(0,B.jsx)(Qn.Z5,{onDragEnd:c,children:(0,B.jsx)(Xo,{children:(0,B.jsx)(kr,{boardId:a,columnIds:l,columns:o,notes:n,addNote:r})})})]})}));var Lr={addBoard:p};const Or=(0,r.$j)(null,Lr)((function(e){var t=e.style,n=e.addBoard;return(0,B.jsxs)(oo,{className:ct.HEADER,style:t,children:[(0,B.jsx)(po,{}),(0,B.jsx)("span",{className:ct.TITLE_GAP}),(0,B.jsx)("span",{className:ct.HEADER_TITLE,children:"Notes: Boards"}),(0,B.jsx)(X,{caption:"Add Board",title:"Click to add new board",accessKey:"a",isEvent:!1,timeout:200,onClick:n}),(0,B.jsx)(Uo,{})]})}));var Pr={TOPIC:{paddingLeft:12,lineHeight:2},COUNTER:{float:"right",paddingRight:12}};var Hr=cr((function(e){var t=e.title,n=e.count;return(0,B.jsxs)("div",{style:Pr.TOPIC,children:[(0,B.jsx)("span",{children:t}),(0,B.jsx)(tr.Counter,{style:Pr.COUNTER,value:n})]})}));Hr.displayName="DnDTopic";const Gr=Hr;const Zr=function(e){var t=e.id,n=e.columnIds,o=e.columns;return(0,B.jsx)(Qn.bK,{droppableId:t,children:function(e,t){return function(e){var t=e.provided,n=e.snapshot,o=e.columnIds,r=e.columns;return(0,B.jsxs)(ir,(0,T.Z)({},t.droppableProps,{innerRef:t.innerRef,isDraggingOver:n.isDraggingOver,children:[o.map((function(e,t){return(0,B.jsx)(Qn._l,{draggableId:e,index:t,children:function(t,n){return(0,B.jsx)(Gr,(0,T.Z)({draggableProps:t.draggableProps,innerRef:t.innerRef,isDragging:n.isDragging,dragHandleProps:t.dragHandleProps},{title:(o=r[e]).title,count:o.noteIds.length}));var o}},e)})),t.placeholder]}))}({provided:e,snapshot:t,columnIds:n,columns:o})}})};var Kr={LINK:{marginTop:8,marginLeft:8,marginBottom:4}},Ur=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this)._hBlurTitle=function(e){var n=t.props,o=n.board;(0,n.editBoardTitle)({boardId:o.id,title:e.target.value})},t._hSetCurrent=function(){var e=t.props,n=e.board;(0,e.setBoardCurrent)({boardId:n.id})},t._hRemove=function(){var e=t.props,n=e.board;(0,e.removeBoard)({boardId:n.id})},t._hToNotes=function(){var e=t.props,n=e.board;(0,e.setCurrentBoard)({boardId:n.id})},t}return(0,E.Z)(t,e),t.prototype.render=function(){var e=this.props,t=e.id,n=e.board,o=e.columns,r=n.columnIds;return(0,B.jsxs)(tr.Item,{children:[(0,B.jsxs)(tr.Header,{children:[(0,B.jsx)(tr.Title,{value:n.title,onBlur:this._hBlurTitle}),(0,B.jsx)(tr.Counter,{value:r.length})]}),(0,B.jsx)(Zr,{id:t,columnIds:r,columns:o}),(0,B.jsx)(Kn.OL,{to:"/boards/"+n.id,className:ct.NAV_LINK,style:Kr.LINK,onClick:this._hToNotes,children:"ToNotes"}),(0,B.jsx)("div",{children:Vo(r)&&(0,B.jsx)(X,{clCaption:ct.CARD_BT,caption:"Remove Board",onClick:this._hRemove})})]})},t}(D.Component),Fr={editBoardTitle:cn,setCurrentBoard:f,removeBoard:h};const Xr=(0,r.$j)((function(e,t){return{board:de.board(e,t.id),columns:pe.columns(e)}}),Fr)(Ur);const Vr=(0,r.$j)((function(e){return{boardIds:de.boardIds(e),boards:de.boards(e)}}))((function(e){var t=e.boardIds;e.boards;return t.map((function(e){return(0,B.jsx)(Xr,{id:e},e)}))}));var zr={moveColumn:Jt};const Wr=(0,r.$j)(null,zr)((function(e){var t=e.moveColumn,n=(0,D.useCallback)((function(e){eo(e)||t(e)}),[t]);return[(0,B.jsx)(Or,{},"header"),(0,B.jsx)(Qn.Z5,{onDragEnd:n,children:(0,B.jsx)(Xo,{children:(0,B.jsx)(Vr,{})})},"ddc")]}));var $r="modal-root",Yr={display:"block"},Jr={display:"none"},qr={backgroundColor:"rgba(0,0,0, 0)"},Qr=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this).wasClosing=!0,t._hideModal=function(){t.wasClosing=!0,t.setState({})},t}(0,E.Z)(t,e);var n=t.prototype;return n.shouldComponentUpdate=function(e,t){return!!(this.wasClosing||e.isShow||this.props.isShow)},n.componentDidUpdate=function(e,t){e.isShow&&!this.props.isShow&&setTimeout(this._hideModal,this.props.timeout)},n.render=function(){var e,t,n,o=this.props,r=o.isShow,i=o.children,s=o.onClose;return!r&&this.wasClosing?(e=$r,t=Jr,n=!0,this.wasClosing=!1):(e=k($r,r?"show-modal":"hide-modal"),t=r?Yr:qr,n=!1),(0,B.jsx)("div",{role:"presentation",className:e,style:t,"aria-hidden":n,onClick:s,children:i})},t}(D.Component);Qr.defaultProps={timeout:450};const ei=Qr;var ti=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this).state={isShow:!1,inits:{},shows:{},data:{},dialogs:[],currentDialog:null},t._onStore=function(){var e=t.props.store.getState().modal,n=void 0===e?{}:e,o=n.id,r=n.data,i=void 0===r?{}:r;o&&t.modal!==n&&(t.modal=n,t.setState((function(e){var t=e.inits,n=e.shows,r=e.data,s=e.dialogs;return t[o]?(n[o]=!0,r[o]=i,{isShow:!0,currentDialog:o,shows:n,data:r}):(s.push({type:o,comp:Kt.getDialog(o)}),t[o]=!0,n[o]=!0,r[o]=i,{isShow:!0,currentDialog:o,shows:n,data:r,dialogs:s})})))},t._hClose=function(e){t.setState((function(t){return t.shows[e]=!1,{isShow:!1,currentDialog:null,shows:t.shows}}))},t._renderDialogs=function(){var e=t.props,n=e.store,o=e.theme,r=t.state,i=r.shows,s=r.data;return r.dialogs.map((function(e){var r=e.type,a=e.comp;return(0,D.createElement)(a,{key:r,isShow:i[r],data:s[r],onClose:t._hClose.bind(null,r),store:n,dispatch:n.dispatch,TS:o.createStyle(ae)})}))},t}(0,E.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.unsubscribe=this.props.store.subscribe(this._onStore)},n.componentWillUnmount=function(){this.unsubscribe()},n.shouldComponentUpdate=function(e,t){return this.state.currentDialog!==t.currentDialog},n.render=function(){var e=this.state,t=e.isShow,n=e.currentDialog;return(0,B.jsx)(ei,{isShow:t,onClose:this._hClose.bind(null,n),children:this._renderDialogs()})},t}(D.Component);const ni=pr(ti);const oi=function(e){var t=e.basename,n=e.store,o=(0,D.useState)(qn),i=o[0],s=o[1],a=(0,r.v9)(le.uiTheme);return(0,D.useEffect)((function(){i.getThemeName!==a&&(i.setThemeName(a),s((0,T.Z)({},i)))}),[a]),(0,B.jsx)(D.StrictMode,{children:(0,B.jsx)(Kn.VK,{basename:t,children:(0,B.jsxs)(re.Provider,{value:i,children:[(0,B.jsx)(ni,{store:n}),(0,B.jsxs)(Un.rs,{children:[(0,B.jsx)(Un.AW,{path:"/boards/:id",component:Rr}),(0,B.jsx)(Un.AW,{path:"/boards",component:Wr}),(0,B.jsx)(Un.l_,{from:"/",to:"/boards"})]})]})})})};(0,o.render)((0,B.jsx)(r.zt,{store:Gn,children:(0,B.jsx)(oi,{basename:"/notes",store:Gn})}),document.getElementById("app"))},251:(e,t,n)=>{n(418);var o=n(294),r=60103;if(t.Fragment=60107,"function"==typeof Symbol&&Symbol.for){var i=Symbol.for;r=i("react.element"),t.Fragment=i("react.fragment")}var s=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a=Object.prototype.hasOwnProperty,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var o,i={},c=null,d=null;for(o in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)a.call(t,o)&&!l.hasOwnProperty(o)&&(i[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===i[o]&&(i[o]=t[o]);return{$$typeof:r,type:e,key:c,ref:d,props:i,_owner:s.current}}t.jsx=c,t.jsxs=c},893:(e,t,n)=>{e.exports=n(251)}},e=>{var t;t=135,e(e.s=t)}]);